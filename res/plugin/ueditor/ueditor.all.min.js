(function(){UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var b=window.baidu||{};window.baidu=b;window.UE=b.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";var d=UE.dom={};var c=UE.browser=function(){var w=navigator.userAgent.toLowerCase(),z=window.opera,x={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(w),opera:(!!z&&z.version),webkit:(w.indexOf(" applewebkit/")>-1),mac:(w.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};x.gecko=(navigator.product=="Gecko"&&!x.webkit&&!x.opera&&!x.ie);var C=0;if(x.ie){var A=w.match(/(?:msie\s([\w.]+))/);var B=w.match(/(?:trident.*rv:([\w.]+))/);if(A&&B&&A[1]&&B[1]){C=Math.max(A[1]*1,B[1]*1)}else{if(A&&A[1]){C=A[1]*1}else{if(B&&B[1]){C=B[1]*1}else{C=0}}}x.ie11Compat=document.documentMode==11;x.ie9Compat=document.documentMode==9;x.ie8=!!document.documentMode;x.ie8Compat=document.documentMode==8;x.ie7Compat=((C==7&&!document.documentMode)||document.documentMode==7);x.ie6Compat=(C<7||x.quirks);x.ie9above=C>8;x.ie9below=C<9;x.ie11above=C>10;x.ie11below=C<11}if(x.gecko){var y=w.match(/rv:([\d\.]+)/);if(y){y=y[1].split(".");C=y[0]*10000+(y[1]||0)*100+(y[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(w)){x.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(w)&&!/chrome/i.test(w)){x.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(x.opera){C=parseFloat(z.version())}if(x.webkit){C=parseFloat(w.match(/ applewebkit\/(\d+)/)[1])}x.version=C;x.isCompatible=!x.mobile&&((x.ie&&C>=6)||(x.gecko&&C>=10801)||(x.opera&&C>=9.5)||(x.air&&C>=1)||(x.webkit&&C>=522)||false);return x}();var p=c.ie,v=c.webkit,l=c.gecko,s=c.opera;var u=UE.utils={each:function(B,y,w){if(B==null){return}if(B.length===+B.length){for(var x=0,A=B.length;x<A;x++){if(y.call(w,B[x],x,B)===false){return false}}}else{for(var z in B){if(B.hasOwnProperty(z)){if(y.call(w,B[z],z,B)===false){return false}}}}},makeInstance:function(x){var w=new Function();w.prototype=x;x=new w;w.prototype=null;return x},extend:function(z,y,w){if(y){for(var x in y){if(!w||!z.hasOwnProperty(x)){z[x]=y[x]}}}return z},extend2:function(A){var w=arguments;for(var y=1;y<w.length;y++){var B=w[y];for(var z in B){if(!A.hasOwnProperty(z)){A[z]=B[z]}}}return A},inherits:function(y,z){var x=y.prototype,w=u.makeInstance(z.prototype);u.extend(w,x,true);y.prototype=w;return(w.constructor=y)},bind:function(x,w){return function(){return x.apply(w,arguments)}},defer:function(y,w,x){var z;return function(){if(x){clearTimeout(z)}z=setTimeout(y,w)}},indexOf:function(w,y,z){var x=-1;z=this.isNumber(z)?z:0;this.each(w,function(B,A){if(A>=z&&B===y){x=A;return false}});return x},removeItem:function(w,y){for(var x=0,z=w.length;x<z;x++){if(w[x]===y){w.splice(x,1);x--}}},trim:function(w){return w.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(y){if(!y){return{}}y=u.isArray(y)?y:y.split(",");for(var x=0,w,z={};w=y[x++];){z[w.toUpperCase()]=z[w]=1}return z},unhtml:function(x,w){return x?x.replace(w||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(y,z){if(z){return y}else{return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[y]}}):""},unhtmlForUrl:function(x,w){return x?x.replace(w||/[<">']/g,function(y){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[y]}):""},html:function(w){return w?w.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(x){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[x]}):""},cssStyleToDomStyle:function(){var x=document.createElement("div").style,w={"float":x.cssFloat!=undefined?"cssFloat":x.styleFloat!=undefined?"styleFloat":"float"};return function(y){return w[y]||(w[y]=y.toLowerCase().replace(/-./g,function(z){return z.charAt(1).toUpperCase()}))}}(),loadFile:function(){var x=[];function w(z,C){try{for(var B=0,y;y=x[B++];){if(y.doc===z&&y.url==(C.src||C.href)){return y}}}catch(A){return null}}return function(y,D,A){var C=w(y,D);if(C){if(C.ready){A&&A()}else{C.funs.push(A)}return}x.push({doc:y,url:D.src||D.href,funs:[A]});if(!y.body){var B=[];for(var E in D){if(E=="tag"){continue}B.push(E+'="'+D[E]+'"')}y.write("<"+D.tag+" "+B.join(" ")+" ></"+D.tag+">");return}if(D.id&&y.getElementById(D.id)){return}var z=y.createElement(D.tag);delete D.tag;for(var E in D){z.setAttribute(E,D[E])}z.onload=z.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){C=w(y,D);if(C.funs.length>0){C.ready=1;for(var F;F=C.funs.pop();){F()}}z.onload=z.onreadystatechange=null}};z.onerror=function(){throw Error("The load "+(D.href||D.src)+" fails,check the url settings of file ueditor.config.js ")};y.getElementsByTagName("head")[0].appendChild(z)}}(),isEmptyObject:function(x){if(x==null){return true}if(this.isArray(x)||this.isString(x)){return x.length===0}for(var w in x){if(x.hasOwnProperty(w)){return false}}return true},fixColor:function(z,A){if(/color/i.test(z)&&/rgba?/.test(A)){var w=A.split(",");if(w.length>3){return""}A="#";for(var y=0,x;x=w[y++];){x=parseInt(x.replace(/[^\d]/gi,""),10).toString(16);A+=x.length==1?"0"+x:x}A=A.toUpperCase()}return A},optCss:function(A){var z,x,w;A=A.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(D,B,C,E){if(E.split(" ").length==1){switch(B){case"padding":!z&&(z={});z[C]=E;return"";case"margin":!x&&(x={});x[C]=E;return"";case"border":return E=="initial"?"":D}}return D});function y(E,D){if(!E){return""}var H=E.top,B=E.bottom,C=E.left,G=E.right,I="";if(!H||!C||!B||!G){for(var F in E){I+=";"+D+"-"+F+":"+E[F]+";"}}else{I+=";"+D+":"+(H==B&&B==C&&C==G?H:H==B&&C==G?(H+" "+C):C==G?(H+" "+C+" "+B):(H+" "+G+" "+B+" "+C))+";"}return I}A+=y(z,"padding")+y(x,"margin");return A.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(B,C){return C?C+";;":";"})},clone:function(x,y){var z;y=y||{};for(var w in x){if(x.hasOwnProperty(w)){z=x[w];if(typeof z=="object"){y[w]=u.isArray(z)?[]:{};u.clone(x[w],y[w])}else{y[w]=z}}}return y},transUnitToPx:function(x){if(!/(pt|cm)/.test(x)){return x}var w;x.replace(/([\d.]+)(\w+)/,function(y,A,z){x=A;w=z});switch(w){case"cm":x=parseFloat(x)*25;break;case"pt":x=Math.round(parseFloat(x)*96/72)}return x+(x?"px":"")},domReady:function(){var x=[];function w(z){z.isReady=true;for(var y;y=x.pop();y()){}}return function(z,A){A=A||window;var y=A.document;z&&x.push(z);if(y.readyState==="complete"){w(y)}else{y.isReady&&w(y);if(c.ie&&c.version!=11){(function(){if(y.isReady){return}try{y.documentElement.doScroll("left")}catch(B){setTimeout(arguments.callee,0);return}w(y)})();A.attachEvent("onload",function(){w(y)})}else{y.addEventListener("DOMContentLoaded",function(){y.removeEventListener("DOMContentLoaded",arguments.callee,false);w(y)},false);A.addEventListener("load",function(){w(y)},false)}}}}(),cssRule:c.ie&&c.version!=11?function(z,A,w){var y,x;if(A===undefined||A&&A.nodeType&&A.nodeType==9){w=A&&A.nodeType&&A.nodeType==9?A:(w||document);y=w.indexList||(w.indexList={});x=y[z];if(x!==undefined){return w.styleSheets[x].cssText}return undefined}w=w||document;y=w.indexList||(w.indexList={});x=y[z];if(A===""){if(x!==undefined){w.styleSheets[x].cssText="";delete y[z];return true}return false}if(x!==undefined){sheetStyle=w.styleSheets[x]}else{sheetStyle=w.createStyleSheet("",x=w.styleSheets.length);y[z]=x}sheetStyle.cssText=A}:function(y,A,w){var x,z;if(A===undefined||A&&A.nodeType&&A.nodeType==9){w=A&&A.nodeType&&A.nodeType==9?A:(w||document);z=w.getElementById(y);return z?z.innerHTML:undefined}w=w||document;z=w.getElementById(y);if(A===""){if(z){z.parentNode.removeChild(z);return true}return false}if(z){z.innerHTML=A}else{z=w.createElement("style");z.id=y;z.innerHTML=A;w.getElementsByTagName("head")[0].appendChild(z)}},sort:function(w,x){x=x||function(D,E){return D.localeCompare(E)};for(var y=0,A=w.length;y<A;y++){for(var z=y,B=w.length;z<B;z++){if(x(w[y],w[z])>0){var C=w[y];w[y]=w[z];w[z]=C}}}return w},serializeParam:function(y){var z=[];for(var w in y){if(w=="method"||w=="timeout"||w=="async"){continue}if(!((typeof y[w]).toLowerCase()=="function"||(typeof y[w]).toLowerCase()=="object")){z.push(encodeURIComponent(w)+"="+encodeURIComponent(y[w]))}else{if(u.isArray(y[w])){for(var x=0;x<y[w].length;x++){z.push(encodeURIComponent(w)+"[]="+encodeURIComponent(y[w][x]))}}}}return z.join("&")},formatUrl:function(x){var w=x.replace(/&&/g,"&");w=w.replace(/\?&/g,"?");w=w.replace(/&$/g,"");w=w.replace(/&#/g,"#");w=w.replace(/&+/g,"&");return w},isCrossDomainUrl:function(x){var w=document.createElement("a");w.href=x;if(c.ie){w.href=w.href}return !(w.protocol==location.protocol&&w.hostname==location.hostname&&(w.port==location.port||(w.port=="80"&&location.port=="")||(w.port==""&&location.port=="80")))},clearEmptyAttrs:function(w){for(var x in w){if(w[x]===""){delete w[x]}}return w},str2json:function(w){if(!u.isString(w)){return null}if(window.JSON){return JSON.parse(w)}else{return(new Function("return "+u.trim(w||"")))()}},json2str:(function(){if(window.JSON){return JSON.stringify}else{var z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function y(B){if(/["\\\x00-\x1f]/.test(B)){B=B.replace(/["\\\x00-\x1f]/g,function(D){var C=z[D];if(C){return C}C=D.charCodeAt();return"\\u00"+Math.floor(C/16).toString(16)+(C%16).toString(16)})}return'"'+B+'"'}function w(G){var F=["["],D=G.length,E,B,C;for(B=0;B<D;B++){C=G[B];switch(typeof C){case"undefined":case"function":case"unknown":break;default:if(E){F.push(",")}F.push(u.json2str(C));E=1}}F.push("]");return F.join("")}function A(B){return B<10?"0"+B:B}function x(B){return'"'+B.getFullYear()+"-"+A(B.getMonth()+1)+"-"+A(B.getDate())+"T"+A(B.getHours())+":"+A(B.getMinutes())+":"+A(B.getSeconds())+'"'}return function(G){switch(typeof G){case"undefined":return"undefined";case"number":return isFinite(G)?String(G):"null";case"string":return y(G);case"boolean":return String(G);default:if(G===null){return"null"}else{if(u.isArray(G)){return w(G)}else{if(u.isDate(G)){return x(G)}else{var F=["{"],B=u.json2str,E,C;for(var D in G){if(Object.prototype.hasOwnProperty.call(G,D)){C=G[D];switch(typeof C){case"undefined":case"unknown":case"function":break;default:if(E){F.push(",")}E=1;F.push(B(D)+":"+B(C))}}}F.push("}");return F.join("")}}}}}}})()};u.each(["String","Function","Array","Number","RegExp","Object","Date"],function(w){UE.utils["is"+w]=function(x){return Object.prototype.toString.apply(x)=="[object "+w+"]"}});var g=UE.EventBase=function(){};g.prototype={addListener:function(z,x){z=u.trim(z).split(/\s+/);for(var w=0,y;y=z[w++];){n(this,y,true).push(x)}},on:function(x,w){return this.addListener(x,w)},off:function(x,w){return this.removeListener(x,w)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(z,x){z=u.trim(z).split(/\s+/);for(var w=0,y;y=z[w++];){u.removeItem(n(this,y)||[],x)}},fireEvent:function(){var C=arguments[0];C=u.trim(C).split(" ");for(var w=0,B;B=C[w++];){var y=n(this,B),z,A,x;if(y){x=y.length;while(x--){if(!y[x]){continue}A=y[x].apply(this,arguments);if(A===true){return A}if(A!==undefined){z=A}}}if(A=this["on"+B.toLowerCase()]){z=A.apply(this,arguments)}}return z}};function n(y,z,x){var w;z=z.toLowerCase();return((w=(y.__allListeners||x&&(y.__allListeners={})))&&(w[z]||x&&(w[z]=[])))}var f=d.dtd=(function(){function w(B){for(var A in B){B[A.toUpperCase()]=B[A]}return B}var at=u.extend2;var x=w({isindex:1,fieldset:1}),y=w({input:1,button:1,select:1,textarea:1,label:1}),W=at(w({a:1}),y),Y=at({iframe:1},W),Z=w({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),ab=w({ins:1,del:1,script:1,style:1}),ac=at(w({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),ab),ad=at(w({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),ac),ae=at(w({p:1}),ad),af=at(w({iframe:1}),ad,y),ag=w({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),ah=at(w({a:0}),af),ai=w({tr:1}),aj=w({"#":1}),ak=at(w({param:1}),ag),al=at(w({form:1}),x,Y,Z,ae),am=w({li:1,ol:1,ul:1}),an=w({style:1,script:1}),ao=w({base:1,link:1,meta:1,title:1}),ap=at(ao,an),aq=w({head:1,body:1}),ar=w({html:1});var z=w({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),aa=w({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return w({$nonBodyContent:at(ar,aq,ao),$block:z,$inline:ah,$inlineWithA:at(w({a:1}),ah),$body:at(w({script:1,style:1}),z),$cdata:w({script:1,style:1}),$empty:aa,$nonChild:w({iframe:1,textarea:1}),$listItem:w({dd:1,dt:1,li:1}),$list:w({ul:1,ol:1,dl:1}),$isNotEmpty:w({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:w({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:w({"p":1,"div":1}),$tableContent:w({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:w({pre:1,script:1,style:1,textarea:1}),html:aq,head:ap,style:aj,script:aj,body:al,base:{},link:{},meta:{},title:aj,col:{},tr:w({td:1,th:1}),img:{},embed:{},colgroup:w({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:al,td:al,br:{},th:al,center:al,kbd:ah,button:at(ae,Z),basefont:{},h5:ah,h4:ah,samp:ah,h6:ah,ol:am,h1:ah,h3:ah,option:aj,h2:ah,form:at(x,Y,Z,ae),select:w({optgroup:1,option:1}),font:ah,ins:ah,menu:am,abbr:ah,label:ah,table:w({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:ah,tfoot:ai,cite:ah,li:al,input:{},iframe:al,strong:ah,textarea:aj,noframes:al,big:ah,small:ah,span:w({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:ah,dt:ah,sub:ah,optgroup:w({option:1}),param:{},bdo:ah,"var":ah,div:al,object:ak,sup:ah,dd:al,strike:ah,area:{},dir:am,map:at(w({area:1,form:1,p:1}),x,ab,Z),applet:ak,dl:w({dt:1,dd:1}),del:ah,isindex:{},fieldset:at(w({legend:1}),ag),thead:ai,ul:am,acronym:ah,b:ah,a:at(w({a:1}),af),blockquote:at(w({td:1,tr:1,tbody:1,li:1}),al),caption:ah,i:ah,u:ah,tbody:ai,s:ah,address:at(Y,ae),tt:ah,legend:ah,q:ah,pre:at(ac,W),p:at(w({"a":1}),ah),em:ah,dfn:ah})})();function m(z,B,y,C,w,x){var D=C&&z[B],A;!D&&(D=z[y]);while(!D&&(A=(A||z).parentNode)){if(A.tagName=="BODY"||x&&!x(A)){return null}D=A[y]}if(D&&w&&!w(D)){return m(D,B,y,false,w)}return D}var a=p&&c.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},t=u.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var e=d.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:p&&c.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(y,z){if(y===z){return 0}var x,A=[y],B=[z];x=y;while(x=x.parentNode){if(x===z){return 10}A.push(x)}x=z;while(x=x.parentNode){if(x===y){return 20}B.push(x)}A.reverse();B.reverse();if(A[0]!==B[0]){return 1}var w=-1;while(w++,A[w]===B[w]){}y=A[w];z=B[w];while(y=y.nextSibling){if(y===z){return 4}}return 2},getNodeIndex:function(y,x){var z=y,w=0;while(z=z.previousSibling){if(x&&z.nodeType==3){if(z.nodeType!=z.nextSibling.nodeType){w++}continue}w++}return w},inDoc:function(x,w){return e.getPosition(x,w)==10},findParent:function(y,w,x){if(y&&!e.isBody(y)){y=x?y:y.parentNode;while(y){if(!w||w(y)||e.isBody(y)){return w&&!w(y)&&e.isBody(y)?null:y}y=y.parentNode}}return null},findParentByTagName:function(y,z,x,w){z=u.listToMap(u.isArray(z)?z:[z]);return e.findParent(y,function(A){return z[A.tagName]&&!(w&&w(A))},x)},findParents:function(z,y,x,w){var A=y&&(x&&x(z)||!x)?[z]:[];while(z=e.findParent(z,x)){A.push(z)}return w?A:A.reverse()},insertAfter:function(x,w){return x.nextSibling?x.parentNode.insertBefore(w,x.nextSibling):x.parentNode.appendChild(w)},remove:function(y,x){var z=y.parentNode,w;if(z){if(x&&y.hasChildNodes()){while(w=y.firstChild){z.insertBefore(w,y)}}z.removeChild(y)}return y},getNextDomNode:function(y,z,w,x){return m(y,"firstChild","nextSibling",z,w,x)},getPreDomNode:function(y,z,w,x){return m(y,"lastChild","previousSibling",z,w,x)},isBookmarkNode:function(w){return w.nodeType==1&&w.id&&/^_baidu_bookmark_/i.test(w.id)},getWindow:function(x){var w=x.ownerDocument||x;return w.defaultView||w.parentWindow},getCommonAncestor:function(x,y){if(x===y){return x}var A=[x],B=[y],z=x,w=-1;while(z=z.parentNode){if(z===y){return z}A.push(z)}z=y;while(z=z.parentNode){if(z===x){return z}B.push(z)}A.reverse();B.reverse();while(w++,A[w]===B[w]){}return w==0?null:A[w-1]},clearEmptySibling:function(z,x,y){function w(B,A){var C;while(B&&!e.isBookmarkNode(B)&&(e.isEmptyInlineElement(B)||!new RegExp("[^\t\n\r"+e.fillChar+"]").test(B.nodeValue))){C=B[A];e.remove(B);B=C}}!x&&w(z.nextSibling,"nextSibling");!y&&w(z.previousSibling,"previousSibling")},split:function(y,z){var w=y.ownerDocument;if(c.ie&&z==y.nodeValue.length){var x=w.createTextNode("");return e.insertAfter(y,x)}var A=y.splitText(z);if(c.ie8){var B=w.createTextNode("");e.insertAfter(A,B);e.remove(B)}return A},isWhitespace:function(w){return !new RegExp("[^ \t\n\r"+e.fillChar+"]").test(w.nodeValue)},getXY:function(w){var z=0,A=0;while(w.offsetParent){A+=w.offsetTop;z+=w.offsetLeft;w=w.offsetParent}return{"x":z,"y":A}},on:function(w,B,x){var C=u.isArray(B)?B:u.trim(B).split(/\s+/),z=C.length;if(z){while(z--){B=C[z];if(w.addEventListener){w.addEventListener(B,x,false)}else{if(!x._d){x._d={els:[]}}var A=B+x.toString(),y=u.indexOf(x._d.els,w);if(!x._d[A]||y==-1){if(y==-1){x._d.els.push(w)}if(!x._d[A]){x._d[A]=function(D){return x.call(D.srcElement,D||window.event)}}w.attachEvent("on"+B,x._d[A])}}}}w=null},un:function(x,C,y){var D=u.isArray(C)?C:u.trim(C).split(/\s+/),A=D.length;if(A){while(A--){C=D[A];if(x.removeEventListener){x.removeEventListener(C,y,false)}else{var B=C+y.toString();try{x.detachEvent("on"+C,y._d?y._d[B]:y)}catch(w){}if(y._d&&y._d[B]){var z=u.indexOf(y._d.els,x);if(z!=-1){y._d.els.splice(z,1)}y._d.els.length==0&&delete y._d[B]}}}}},isSameElement:function(B,C){if(B.tagName!=C.tagName){return false}var E=B.attributes,D=C.attributes;if(!p&&E.length!=D.length){return false}var x,y,w=0,z=0;for(var A=0;x=E[A++];){if(x.nodeName=="style"){if(x.specified){w++}if(e.isSameStyle(B,C)){continue}else{return false}}if(p){if(x.specified){w++;y=D.getNamedItem(x.nodeName)}else{continue}}else{y=C.attributes[x.nodeName]}if(!y.specified||x.nodeValue!=y.nodeValue){return false}}if(p){for(A=0;y=D[A++];){if(y.specified){z++}}if(w!=z){return false}}return true},isSameStyle:function(y,z){var B=y.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),C=z.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(c.opera){B=y.style;C=z.style;if(B.length!=C.length){return false}for(var A in B){if(/^(\d+|csstext)$/i.test(A)){continue}if(B[A]!=C[A]){return false}}return true}if(!B||!C){return B==C}B=B.split(";");C=C.split(";");if(B.length!=C.length){return false}for(var x=0,w;w=B[x++];){if(u.indexOf(C,w)==-1){return false}}return true},isBlockElm:function(w){return w.nodeType==1&&(f.$block[w.tagName]||t[e.getComputedStyle(w,"display")])&&!f.$nonChild[w.tagName]},isBody:function(w){return w&&w.nodeType==1&&w.tagName.toLowerCase()=="body"},breakParent:function(y,z){var C,A=y,w=y,x,B;do{A=A.parentNode;if(x){C=A.cloneNode(false);C.appendChild(x);x=C;C=A.cloneNode(false);C.appendChild(B);B=C}else{x=A.cloneNode(false);B=x.cloneNode(false)}while(C=w.previousSibling){x.insertBefore(C,x.firstChild)}while(C=w.nextSibling){B.appendChild(C)}w=A}while(z!==A);C=z.parentNode;C.insertBefore(x,z);C.insertBefore(B,z);C.insertBefore(y,B);e.remove(z);return y},isEmptyInlineElement:function(w){if(w.nodeType!=1||!f.$removeEmpty[w.tagName]){return 0}w=w.firstChild;while(w){if(e.isBookmarkNode(w)){return 0}if(w.nodeType==1&&!e.isEmptyInlineElement(w)||w.nodeType==3&&!e.isWhitespace(w)){return 0}w=w.nextSibling}return 1},trimWhiteTextNode:function(w){function x(z){var y;while((y=w[z])&&y.nodeType==3&&e.isWhitespace(y)){w.removeChild(y)}}x("firstChild");x("lastChild")},mergeChild:function(B,E,w){var A=e.getElementsByTagName(B,B.tagName.toLowerCase());for(var y=0,x;x=A[y++];){if(!x.parentNode||e.isBookmarkNode(x)){continue}if(x.tagName.toLowerCase()=="span"){if(B===x.parentNode){e.trimWhiteTextNode(B);if(B.childNodes.length==1){B.style.cssText=x.style.cssText+";"+B.style.cssText;e.remove(x,true);continue}}x.style.cssText=B.style.cssText+";"+x.style.cssText;if(w){var D=w.style;if(D){D=D.split(";");for(var z=0,C;C=D[z++];){x.style[u.cssStyleToDomStyle(C.split(":")[0])]=C.split(":")[1]}}}if(e.isSameStyle(x,B)){e.remove(x,true)}continue}if(e.isSameElement(B,x)){e.remove(x,true)}}},getElementsByTagName:function(F,D,z){if(z&&u.isString(z)){var y=z;z=function(G){return e.hasClass(G,y)}}D=u.trim(D).replace(/[ ]{2,}/g," ").split(" ");var w=[];for(var C=0,E;E=D[C++];){var B=F.getElementsByTagName(E);for(var A=0,x;x=B[A++];){if(!z||z(x)){w.push(x)}}}return w},mergeToParent:function(w){var x=w.parentNode;while(x&&f.$removeEmpty[x.tagName]){if(x.tagName==w.tagName||x.tagName=="A"){e.trimWhiteTextNode(x);if(x.tagName=="SPAN"&&!e.isSameStyle(x,w)||(x.tagName=="A"&&w.tagName=="SPAN")){if(x.childNodes.length>1||x!==w.parentNode){w.style.cssText=x.style.cssText+";"+w.style.cssText;x=x.parentNode;continue}else{x.style.cssText+=";"+w.style.cssText;if(x.tagName=="A"){x.style.textDecoration="underline"}}}if(x.tagName!="A"){x===w.parentNode&&e.remove(w,true);break}}x=x.parentNode}},mergeSibling:function(z,x,w){function y(C,D,B){var A;if((A=B[C])&&!e.isBookmarkNode(A)&&A.nodeType==1&&e.isSameElement(B,A)){while(A.firstChild){if(D=="firstChild"){B.insertBefore(A.lastChild,B.firstChild)}else{B.appendChild(A.firstChild)}}e.remove(A)}}!x&&y("previousSibling","firstChild",z);!w&&y("nextSibling","lastChild",z)},unSelectable:p&&c.ie9below||c.opera?function(y){y.onselectstart=function(){return false};y.onclick=y.onkeyup=y.onkeydown=function(){return false};y.unselectable="on";y.setAttribute("unselectable","on");for(var x=0,w;w=y.all[x++];){switch(w.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:w.unselectable="on";y.setAttribute("unselectable","on")}}}:function(w){w.style.MozUserSelect=w.style.webkitUserSelect=w.style.msUserSelect=w.style.KhtmlUserSelect="none"},removeAttributes:function(z,w){w=u.isArray(w)?w:u.trim(w).replace(/[ ]{2,}/g," ").split(" ");for(var y=0,x;x=w[y++];){x=a[x]||x;switch(x){case"className":z[x]="";break;case"style":z.style.cssText="";var A=z.getAttributeNode("style");!c.ie&&A&&z.removeAttributeNode(A)}z.removeAttribute(x)}},createElement:function(x,y,w){return e.setAttributes(x.createElement(y),w)},setAttributes:function(y,x){for(var w in x){if(x.hasOwnProperty(w)){var z=x[w];switch(w){case"class":y.className=z;break;case"style":y.style.cssText=y.style.cssText+";"+z;break;case"innerHTML":y[w]=z;break;case"value":y.value=z;break;default:y.setAttribute(a[w]||w,z)}}}return y},getComputedStyle:function(x,B){var y="width height top left";if(y.indexOf(B)>-1){return x["offset"+B.replace(/^\w/,function(D){return D.toUpperCase()})]+"px"}if(x.nodeType==3){x=x.parentNode}if(c.ie&&c.version<9&&B=="font-size"&&!x.style.fontSize&&!f.$empty[x.tagName]&&!f.$nonChild[x.tagName]){var A=x.ownerDocument.createElement("span");A.style.cssText="padding:0;border:0;font-family:simsun;";A.innerHTML=".";x.appendChild(A);var z=A.offsetHeight;x.removeChild(A);A=null;return z+"px"}try{var C=e.getStyle(x,B)||(window.getComputedStyle?e.getWindow(x).getComputedStyle(x,"").getPropertyValue(B):(x.currentStyle||x.style)[u.cssStyleToDomStyle(B)])}catch(w){return""}return u.transUnitToPx(u.fixColor(B,C))},removeClasses:function(z,x){x=u.isArray(x)?x:u.trim(x).replace(/[ ]{2,}/g," ").split(" ");for(var A=0,w,y=z.className;w=x[A++];){y=y.replace(new RegExp("\\b"+w+"\\b"),"")}y=u.trim(y).replace(/[ ]{2,}/g," ");if(y){z.className=y}else{e.removeAttributes(z,["class"])}},addClass:function(z,x){if(!z){return}x=u.trim(x).replace(/[ ]{2,}/g," ").split(" ");for(var A=0,w,y=z.className;w=x[A++];){if(!new RegExp("\\b"+w+"\\b").test(y)){y+=" "+w}}z.className=u.trim(y)},hasClass:function(z,x){if(u.isRegExp(x)){return x.test(z.className)}x=u.trim(x).replace(/[ ]{2,}/g," ").split(" ");for(var A=0,w,y=z.className;w=x[A++];){if(!new RegExp("\\b"+w+"\\b","i").test(y)){return false}}return A-1==x.length},preventDefault:function(w){w.preventDefault?w.preventDefault():(w.returnValue=false)},removeStyle:function(w,x){if(c.ie){if(x=="color"){x="(^|;)"+x}w.style.cssText=w.style.cssText.replace(new RegExp(x+"[^:]*:[^;]+;?","ig"),"")}else{if(w.style.removeProperty){w.style.removeProperty(x)}else{w.style.removeAttribute(u.cssStyleToDomStyle(x))}}if(!w.style.cssText){e.removeAttributes(w,["style"])}},getStyle:function(w,x){var y=w.style[u.cssStyleToDomStyle(x)];return u.fixColor(x,y)},setStyle:function(w,x,y){w.style[u.cssStyleToDomStyle(x)]=y;if(!u.trim(w.style.cssText)){this.removeAttributes(w,"style")}},setStyles:function(w,y){for(var x in y){if(y.hasOwnProperty(x)){e.setStyle(w,x,y[x])}}},removeDirtyAttr:function(y){for(var x=0,w,z=y.getElementsByTagName("*");w=z[x++];){w.removeAttribute("_moz_dirty")}y.removeAttribute("_moz_dirty")},getChildCount:function(z,y){var w=0,x=z.firstChild;y=y||function(){return 1};while(x){if(y(x)){w++}x=x.nextSibling}return w},isEmptyNode:function(w){return !w.firstChild||e.getChildCount(w,function(x){return !e.isBr(x)&&!e.isBookmarkNode(x)&&!e.isWhitespace(x)})==0},clearSelectedArr:function(x){var w;while(w=x.pop()){e.removeAttributes(w,["class"])}},scrollToView:function(A,D,C){var z=function(){var F=D.document,G=F.compatMode=="CSS1Compat";return{width:(G?F.documentElement.clientWidth:F.body.clientWidth)||0,height:(G?F.documentElement.clientHeight:F.body.clientHeight)||0}},y=function(G){if("pageXOffset" in G){return{x:G.pageXOffset||0,y:G.pageYOffset||0}}else{var F=G.document;return{x:F.documentElement.scrollLeft||F.body.scrollLeft||0,y:F.documentElement.scrollTop||F.body.scrollTop||0}}};var E=z().height,B=E*-1+C;B+=(A.offsetHeight||0);var x=e.getXY(A);B+=x.y;var w=y(D).y;if(B>w||B<w-E){D.scrollTo(0,B+(B<0?-20:20))}},isBr:function(w){return w.nodeType==1&&w.tagName=="BR"},isFillChar:function(x,w){if(x.nodeType!=3){return false}var y=x.nodeValue;if(w){return new RegExp("^"+e.fillChar).test(y)}return !y.replace(new RegExp(e.fillChar,"g"),"").length},isStartInblock:function(y){var C=y.cloneRange(),w=0,z=C.startContainer,A;if(z.nodeType==1&&z.childNodes[C.startOffset]){z=z.childNodes[C.startOffset];var x=z.previousSibling;while(x&&e.isFillChar(x)){z=x;x=x.previousSibling}}if(this.isFillChar(z,true)&&C.startOffset==1){C.setStartBefore(z);z=C.startContainer}while(z&&e.isFillChar(z)){A=z;z=z.previousSibling}if(A){C.setStartBefore(A);z=C.startContainer}if(z.nodeType==1&&e.isEmptyNode(z)&&C.startOffset==1){C.setStart(z,0).collapse(true)}while(!C.startOffset){z=C.startContainer;if(e.isBlockElm(z)||e.isBody(z)){w=1;break}var x=C.startContainer.previousSibling,B;if(!x){C.setStartBefore(C.startContainer)}else{while(x&&e.isFillChar(x)){B=x;x=x.previousSibling}if(B){C.setStartBefore(B)}else{C.setStartBefore(C.startContainer)}}}return w&&!e.isBody(C.startContainer)?1:0},isEmptyBlock:function(x,y){if(x.nodeType!=1){return 0}y=y||new RegExp("[ \xa0\t\r\n"+e.fillChar+"]","g");if(x[c.ie?"innerText":"textContent"].replace(y,"").length>0){return 0}for(var w in f.$isNotEmpty){if(x.getElementsByTagName(w).length){return 0}}return 1},setViewportOffset:function(w,y){var x=parseInt(w.style.left)|0;var C=parseInt(w.style.top)|0;var B=w.getBoundingClientRect();var z=y.left-B.left;var A=y.top-B.top;if(z){w.style.left=x+z+"px"}if(A){w.style.top=C+A+"px"}},fillNode:function(w,x){var y=c.ie?w.createTextNode(e.fillChar):w.createElement("br");x.innerHTML="";x.appendChild(y)},moveChild:function(x,y,w){while(x.firstChild){if(w&&y.firstChild){y.insertBefore(x.lastChild,y.firstChild)}else{y.appendChild(x.firstChild)}}},hasNoAttributes:function(w){return c.ie?/^<\w+\s*?>/.test(w.outerHTML):w.attributes.length==0},isCustomeNode:function(w){return w.nodeType==1&&w.getAttribute("_ue_custom_node_")},isTagNode:function(w,x){return w.nodeType==1&&new RegExp("\\b"+w.tagName+"\\b","i").test(x)},filterNodeList:function(y,w,x){var z=[];if(!u.isFunction(w)){var A=w;w=function(B){return u.indexOf(u.isArray(A)?A:A.split(" "),B.tagName.toLowerCase())!=-1}}u.each(y,function(B){w(B)&&z.push(B)});return z.length==0?null:z.length==1||!x?z[0]:z},isInNodeEndBoundary:function(x,w){var y=x.startContainer;if(y.nodeType==3&&x.startOffset!=y.nodeValue.length){return 0}if(y.nodeType==1&&x.startOffset!=y.childNodes.length){return 0}while(y!==w){if(y.nextSibling){return 0}y=y.parentNode}return 1},isBoundaryNode:function(x,w){var y;while(!e.isBody(x)){y=x;x=x.parentNode;if(y!==x[w]){return false}}return true},fillHtml:c.ie11below?"&nbsp;":"<br/>"};var h=new RegExp(e.fillChar,"g");(function(){var z=0,x=e.fillChar,y;function F(G){G.collapsed=G.startContainer&&G.endContainer&&G.startContainer===G.endContainer&&G.startOffset==G.endOffset}function D(G){return !G.collapsed&&G.startContainer.nodeType==1&&G.startContainer===G.endContainer&&G.endOffset-G.startOffset==1}function E(J,G,H,I){if(G.nodeType==1&&(f.$empty[G.tagName]||f.$nonChild[G.tagName])){H=e.getNodeIndex(G)+(J?0:1);G=G.parentNode}if(J){I.startContainer=G;I.startOffset=H;if(!I.endContainer){I.collapse(true)}}else{I.endContainer=G;I.endOffset=H;if(!I.startContainer){I.collapse(false)}}F(I);return I}function w(S,G){var U=S.startContainer,M=S.endContainer,V=S.startOffset,N=S.endOffset,K=S.document,P=K.createDocumentFragment(),Y,X;if(U.nodeType==1){U=U.childNodes[V]||(Y=U.appendChild(K.createTextNode("")))}if(M.nodeType==1){M=M.childNodes[N]||(X=M.appendChild(K.createTextNode("")))}if(U===M&&U.nodeType==3){P.appendChild(K.createTextNode(U.substringData(V,N-V)));if(G){U.deleteData(V,N-V);S.collapse(true)}return P}var I,J,H=P,W=e.findParents(U,true),O=e.findParents(M,true);for(var Q=0;W[Q]==O[Q];){Q++}for(var R=Q,T;T=W[R];R++){I=T.nextSibling;if(T==U){if(!Y){if(S.startContainer.nodeType==3){H.appendChild(K.createTextNode(U.nodeValue.slice(V)));if(G){U.deleteData(V,U.nodeValue.length-V)}}else{H.appendChild(!G?U.cloneNode(true):U)}}}else{J=T.cloneNode(false);H.appendChild(J)}while(I){if(I===M||I===O[R]){break}T=I.nextSibling;H.appendChild(!G?I.cloneNode(true):I);I=T}H=J}H=P;if(!W[Q]){H.appendChild(W[Q-1].cloneNode(false));H=H.firstChild}for(var R=Q,L;L=O[R];R++){I=L.previousSibling;if(L==M){if(!X&&S.endContainer.nodeType==3){H.appendChild(K.createTextNode(M.substringData(0,N)));if(G){M.deleteData(0,N)}}}else{J=L.cloneNode(false);H.appendChild(J)}if(R!=Q||!W[Q]){while(I){if(I===U){break}L=I.previousSibling;H.insertBefore(!G?I.cloneNode(true):I,H.firstChild);I=L}}H=J}if(G){S.setStartBefore(!O[Q]?O[Q-1]:!W[Q]?W[Q-1]:O[Q]).collapse(true)}Y&&e.remove(Y);X&&e.remove(X);return P}var B=d.Range=function(G){var H=this;H.startContainer=H.startOffset=H.endContainer=H.endOffset=null;H.document=G;H.collapsed=true};function C(G,I){try{if(y&&e.inDoc(y,G)){if(!y.nodeValue.replace(h,"").length){var J=y.parentNode;e.remove(y);while(J&&e.isEmptyInlineElement(J)&&(c.safari?!(e.getPosition(J,I)&e.POSITION_CONTAINS):!J.contains(I))){y=J.parentNode;e.remove(J);J=y}}else{y.nodeValue=y.nodeValue.replace(h,"")}}}catch(H){}}function A(H,G){var I;H=H[G];while(H&&e.isFillChar(H)){I=H[G];e.remove(H);H=I}}B.prototype={cloneContents:function(){return this.collapsed?null:w(this,0)},deleteContents:function(){var G;if(!this.collapsed){w(this,1)}if(c.webkit){G=this.startContainer;if(G.nodeType==3&&!G.nodeValue.length){this.setStartBefore(G).collapse(true);e.remove(G)}}return this},extractContents:function(){return this.collapsed?null:w(this,2)},setStart:function(G,H){return E(true,G,H,this)},setEnd:function(G,H){return E(false,G,H,this)},setStartAfter:function(G){return this.setStart(G.parentNode,e.getNodeIndex(G)+1)},setStartBefore:function(G){return this.setStart(G.parentNode,e.getNodeIndex(G))},setEndAfter:function(G){return this.setEnd(G.parentNode,e.getNodeIndex(G)+1)},setEndBefore:function(G){return this.setEnd(G.parentNode,e.getNodeIndex(G))},setStartAtFirst:function(G){return this.setStart(G,0)},setStartAtLast:function(G){return this.setStart(G,G.nodeType==3?G.nodeValue.length:G.childNodes.length)},setEndAtFirst:function(G){return this.setEnd(G,0)},setEndAtLast:function(G){return this.setEnd(G,G.nodeType==3?G.nodeValue.length:G.childNodes.length)},selectNode:function(G){return this.setStartBefore(G).setEndAfter(G)},selectNodeContents:function(G){return this.setStart(G,0).setEndAtLast(G)},cloneRange:function(){var G=this;return new B(G.document).setStart(G.startContainer,G.startOffset).setEnd(G.endContainer,G.endOffset)},collapse:function(H){var G=this;if(H){G.endContainer=G.startContainer;G.endOffset=G.startOffset}else{G.startContainer=G.endContainer;G.startOffset=G.endOffset}G.collapsed=true;return G},shrinkBoundary:function(J){var K=this,H,I=K.collapsed;function G(L){return L.nodeType==1&&!e.isBookmarkNode(L)&&!f.$empty[L.tagName]&&!f.$nonChild[L.tagName]}while(K.startContainer.nodeType==1&&(H=K.startContainer.childNodes[K.startOffset])&&G(H)){K.setStart(H,0)}if(I){return K.collapse(true)}if(!J){while(K.endContainer.nodeType==1&&K.endOffset>0&&(H=K.endContainer.childNodes[K.endOffset-1])&&G(H)){K.setEnd(H,H.childNodes.length)}}return K},getCommonAncestor:function(I,H){var J=this,K=J.startContainer,G=J.endContainer;if(K===G){if(I&&D(this)){K=K.childNodes[J.startOffset];if(K.nodeType==1){return K}}return H&&K.nodeType==3?K.parentNode:K}return e.getCommonAncestor(K,G)},trimBoundary:function(I){this.txtToElmBoundary();var K=this.startContainer,J=this.startOffset,G=this.collapsed,H=this.endContainer;if(K.nodeType==3){if(J==0){this.setStartBefore(K)}else{if(J>=K.nodeValue.length){this.setStartAfter(K)}else{var L=e.split(K,J);if(K===H){this.setEnd(L,this.endOffset-J)}else{if(K.parentNode===H){this.endOffset+=1}}this.setStartBefore(L)}}if(G){return this.collapse(true)}}if(!I){J=this.endOffset;H=this.endContainer;if(H.nodeType==3){if(J==0){this.setEndBefore(H)}else{J<H.nodeValue.length&&e.split(H,J);this.setEndAfter(H)}}}return this},txtToElmBoundary:function(H){function G(L,I){var J=L[I+"Container"],K=L[I+"Offset"];if(J.nodeType==3){if(!K){L["set"+I.replace(/(\w)/,function(M){return M.toUpperCase()})+"Before"](J)}else{if(K>=J.nodeValue.length){L["set"+I.replace(/(\w)/,function(M){return M.toUpperCase()})+"After"](J)}}}}if(H||!this.collapsed){G(this,"start");G(this,"end")}return this},insertNode:function(J){var G=J,H=1;if(J.nodeType==11){G=J.firstChild;H=J.childNodes.length}this.trimBoundary(true);var L=this.startContainer,K=this.startOffset;var I=L.childNodes[K];if(I){L.insertBefore(J,I)}else{L.appendChild(J)}if(G.parentNode===this.endContainer){this.endOffset=this.endOffset+H}return this.setStartBefore(G)},setCursor:function(H,G){return this.collapse(!H).select(G)},createBookmark:function(I,H){var G,J=this.document.createElement("span");J.style.cssText="display:none;line-height:0px;";J.appendChild(this.document.createTextNode("\u200D"));J.id="_baidu_bookmark_start_"+(H?"":z++);if(!this.collapsed){G=J.cloneNode(true);G.id="_baidu_bookmark_end_"+(H?"":z++)}this.insertNode(J);if(G){this.collapse().insertNode(G).setEndBefore(G)}this.setStartAfter(J);return{start:I?J.id:J,end:G?I?G.id:G:null,id:I}},moveToBookmark:function(G){var I=G.id?this.document.getElementById(G.start):G.start,H=G.end&&G.id?this.document.getElementById(G.end):G.end;this.setStartBefore(I);e.remove(I);if(H){this.setEndBefore(H);e.remove(H)}else{this.collapse(true)}return this},enlarge:function(L,J){var G=e.isBody,I,H,K=this.document.createTextNode("");if(L){H=this.startContainer;if(H.nodeType==1){if(H.childNodes[this.startOffset]){I=H=H.childNodes[this.startOffset]}else{H.appendChild(K);I=H=K}}else{I=H}while(1){if(e.isBlockElm(H)){H=I;while((I=H.previousSibling)&&!e.isBlockElm(I)){H=I}this.setStartBefore(H);break}I=H;H=H.parentNode}H=this.endContainer;if(H.nodeType==1){if(I=H.childNodes[this.endOffset]){H.insertBefore(K,I)}else{H.appendChild(K)}I=H=K}else{I=H}while(1){if(e.isBlockElm(H)){H=I;while((I=H.nextSibling)&&!e.isBlockElm(I)){H=I}this.setEndAfter(H);break}I=H;H=H.parentNode}if(K.parentNode===this.endContainer){this.endOffset--}e.remove(K)}if(!this.collapsed){while(this.startOffset==0){if(J&&J(this.startContainer)){break}if(G(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(J&&J(this.endContainer)){break}if(G(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},enlargeToBlockElm:function(G){while(!e.isBlockElm(this.startContainer)){this.setStartBefore(this.startContainer)}if(!G){while(!e.isBlockElm(this.endContainer)){this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!e.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length&&this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!e.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[this.endContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(V,H,R){if(this.collapsed){return this}this.trimBoundary().enlarge(false,function(X){return X.nodeType==1&&e.isBlockElm(X)}).adjustmentBoundary();var I=this.createBookmark(),M=I.end,N=function(X){return X.nodeType==1?X.tagName.toLowerCase()!="br":!e.isWhitespace(X)},K=e.getNextDomNode(I.start,false,N),S,T,U=this.cloneRange();while(K&&(e.getPosition(K,M)&e.POSITION_PRECEDING)){if(K.nodeType==3||f[V][K.tagName]){U.setStartBefore(K);S=K;while(S&&(S.nodeType==3||f[V][S.tagName])&&S!==M){T=S;S=e.getNextDomNode(S,S.nodeType==1,null,function(X){return f[V][X.tagName]})}var O=U.setEndAfter(T).extractContents(),L;if(R&&R.length>0){var Q,W;W=Q=R[0].cloneNode(false);for(var P=1,J;J=R[P++];){Q.appendChild(J.cloneNode(false));Q=Q.firstChild}L=Q}else{L=U.document.createElement(V)}if(H){e.setAttributes(L,H)}L.appendChild(O);U.insertNode(R?W:L);var G;if(V=="span"&&H.style&&/text\-decoration/.test(H.style)&&(G=e.findParentByTagName(L,"a",true))){e.setAttributes(G,H);e.remove(L,true);L=G}else{e.mergeSibling(L);e.clearEmptySibling(L)}e.mergeChild(L,H);K=e.getNextDomNode(L,false,N);e.mergeToParent(L);if(S===M){break}}else{K=e.getNextDomNode(K,true,N)}}return this.moveToBookmark(I)},removeInlineStyle:function(M){if(this.collapsed){return this}M=u.isArray(M)?M:[M];this.shrinkBoundary().adjustmentBoundary();var L=this.startContainer,I=this.endContainer;while(1){if(L.nodeType==1){if(u.indexOf(M,L.tagName.toLowerCase())>-1){break}if(L.tagName.toLowerCase()=="body"){L=null;break}}L=L.parentNode}while(1){if(I.nodeType==1){if(u.indexOf(M,I.tagName.toLowerCase())>-1){break}if(I.tagName.toLowerCase()=="body"){I=null;break}}I=I.parentNode}var G=this.createBookmark(),J,N;if(L){N=this.cloneRange().setEndBefore(G.start).setStartBefore(L);J=N.extractContents();N.insertNode(J);e.clearEmptySibling(L,true);L.parentNode.insertBefore(G.start,L)}if(I){N=this.cloneRange().setStartAfter(G.end).setEndAfter(I);J=N.extractContents();N.insertNode(J);e.clearEmptySibling(I,false,true);I.parentNode.insertBefore(G.end,I.nextSibling)}var H=e.getNextDomNode(G.start,false,function(O){return O.nodeType==1}),K;while(H&&H!==G.end){K=e.getNextDomNode(H,true,function(O){return O.nodeType==1});if(u.indexOf(M,H.tagName.toLowerCase())>-1){e.remove(H,true)}H=K}return this.moveToBookmark(G)},getClosedNode:function(){var H;if(!this.collapsed){var I=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(D(I)){var G=I.startContainer.childNodes[I.startOffset];if(G&&G.nodeType==1&&(f.$empty[G.tagName]||f.$nonChild[G.tagName])){H=G}}}return H},select:c.ie?function(M,O){var J;if(!this.collapsed){this.shrinkBoundary()}var L=this.getClosedNode();if(L&&!O){try{J=this.document.body.createControlRange();J.addElement(L);J.select()}catch(H){}return this}var G=this.createBookmark(),N=G.start,I;J=this.document.body.createTextRange();J.moveToElementText(N);J.moveStart("character",1);if(!this.collapsed){var K=this.document.body.createTextRange();I=G.end;K.moveToElementText(I);J.setEndPoint("EndToEnd",K)}else{if(!M&&this.startContainer.nodeType!=3){var Q=this.document.createTextNode(x),P=this.document.createElement("span");P.appendChild(this.document.createTextNode(x));N.parentNode.insertBefore(P,N);N.parentNode.insertBefore(Q,N);C(this.document,Q);y=Q;A(P,"previousSibling");A(N,"nextSibling");J.moveStart("character",-1);J.collapse(true)}}this.moveToBookmark(G);P&&e.remove(P);try{J.select()}catch(H){}return this}:function(J){function G(P){function O(R,S,Q){if(R.nodeType==3&&R.nodeValue.length<S){P[Q+"Offset"]=R.nodeValue.length}}O(P.startContainer,P.startOffset,"start");O(P.endContainer,P.endOffset,"end")}var N=e.getWindow(this.document),K=N.getSelection(),M;c.gecko?this.document.body.focus():N.focus();if(K){K.removeAllRanges();if(this.collapsed&&!J){var L=this.startContainer,H=L;if(L.nodeType==1){H=L.childNodes[this.startOffset]}if(!(L.nodeType==3&&this.startOffset)&&(H?(!H.previousSibling||H.previousSibling.nodeType!=3):(!L.lastChild||L.lastChild.nodeType!=3))){M=this.document.createTextNode(x);this.insertNode(M);C(this.document,M);A(M,"previousSibling");A(M,"nextSibling");y=M;this.setStart(M,c.webkit?1:0).collapse(true)}}var I=this.document.createRange();if(this.collapsed&&c.opera&&this.startContainer.nodeType==1){var H=this.startContainer.childNodes[this.startOffset];if(!H){H=this.startContainer.lastChild;if(H&&e.isBr(H)){this.setStartBefore(H).collapse(true)}}else{while(H&&e.isBlockElm(H)){if(H.nodeType==1&&H.childNodes[0]){H=H.childNodes[0]}else{break}}H&&this.setStartBefore(H).collapse(true)}}G(this);I.setStart(this.startContainer,this.startOffset);I.setEnd(this.endContainer,this.endOffset);K.addRange(I)}return this},scrollToView:function(J,H){J=J?window:e.getWindow(this.document);var G=this,I=G.document.createElement("span");I.innerHTML="&nbsp;";G.cloneRange().insertNode(I);e.scrollToView(I,J,H);e.remove(I);return G},inFillChar:function(){var G=this.startContainer;if(this.collapsed&&G.nodeType==3&&G.nodeValue.replace(new RegExp("^"+e.fillChar),"").length+1==G.nodeValue.length){return true}return false},createAddress:function(I,J){var G={},K=this;function H(Q){var R=Q?K.startContainer:K.endContainer;var S=e.findParents(R,true,function(U){return !e.isBody(U)}),L=[];for(var P=0,M;M=S[P++];){L.push(e.getNodeIndex(M,J))}var O=0;if(J){if(R.nodeType==3){var T=R.previousSibling;while(T&&T.nodeType==3){O+=T.nodeValue.replace(h,"").length;T=T.previousSibling}O+=(Q?K.startOffset:K.endOffset)}else{R=R.childNodes[Q?K.startOffset:K.endOffset];if(R){O=e.getNodeIndex(R,J)}else{R=Q?K.startContainer:K.endContainer;var N=R.firstChild;while(N){if(e.isFillChar(N)){N=N.nextSibling;continue}O++;if(N.nodeType==3){while(N&&N.nodeType==3){N=N.nextSibling}}else{N=N.nextSibling}}}}}else{O=Q?e.isFillChar(R)?0:K.startOffset:K.endOffset}if(O<0){O=0}L.push(O);return L}G.startAddress=H(true);if(!I){G.endAddress=K.collapsed?[].concat(G.startAddress):H()}return G},moveToAddress:function(G,I){var J=this;function H(K,N){var R=J.document.body,Q,P;for(var M=0,L,O=K.length;M<O;M++){L=K[M];Q=R;R=R.childNodes[L];if(!R){P=L;break}}if(N){if(R){J.setStartBefore(R)}else{J.setStart(Q,P)}}else{if(R){J.setEndBefore(R)}else{J.setEnd(Q,P)}}}H(G.startAddress,true);!I&&G.endAddress&&H(G.endAddress);return J},equals:function(H){for(var G in this){if(this.hasOwnProperty(G)){if(this[G]!==H[G]){return false}}}return true},traversal:function(I,K){if(this.collapsed){return this}var G=this.createBookmark(),J=G.end,H=e.getNextDomNode(G.start,false,K);while(H&&H!==J&&(e.getPosition(H,J)&e.POSITION_PRECEDING)){var L=e.getNextDomNode(H,false,K);I(H);H=L}return this.moveToBookmark(G)}}})();(function(){function x(K,M){var E=e.getNodeIndex;K=K.duplicate();K.collapse(M);var H=K.parentElement();if(!H.hasChildNodes()){return{container:H,offset:0}}var L=H.children,A,O=K.duplicate(),N=0,D=L.length-1,G=-1,B;while(N<=D){G=Math.floor((N+D)/2);A=L[G];O.moveToElementText(A);var I=O.compareEndPoints("StartToStart",K);if(I>0){D=G-1}else{if(I<0){N=G+1}else{return{container:H,offset:E(A)}}}}if(G==-1){O.moveToElementText(H);O.setEndPoint("StartToStart",K);B=O.text.replace(/(\r\n|\r)/g,"\n").length;L=H.childNodes;if(!B){A=L[L.length-1];return{container:A,offset:A.nodeValue.length}}var F=L.length;while(B>0){B-=L[--F].nodeValue.length}return{container:L[F],offset:-B}}O.collapse(I>0);O.setEndPoint(I>0?"StartToStart":"EndToStart",K);B=O.text.replace(/(\r\n|\r)/g,"\n").length;if(!B){return f.$empty[A.tagName]||f.$nonChild[A.tagName]?{container:H,offset:E(A)+(I>0?0:1)}:{container:A,offset:I>0?0:A.childNodes.length}}while(B>0){try{var J=A;A=A[I>0?"previousSibling":"nextSibling"];B-=A.nodeValue.length}catch(C){return{container:H,offset:E(J)}}}return{container:A,offset:I>0?-B:A.nodeValue.length+B}}function z(B,C){if(B.item){C.selectNode(B.item(0))}else{var A=x(B,true);C.setStart(A.container,A.offset);if(B.compareEndPoints("StartToEnd",B)!=0){A=x(B,false);C.setEnd(A.container,A.offset)}}return C}function w(D){var C;try{C=D.getNative().createRange()}catch(A){return null}var B=C.item?C.item(0):C.parentElement();if((B.ownerDocument||B)===D.document){return C}return null}var y=d.Selection=function(A){var C=this,B;C.document=A;if(c.ie9below){B=e.getWindow(A).frameElement;e.on(B,"beforedeactivate",function(){C._bakIERange=C.getIERange()});e.on(B,"activate",function(){try{if(!w(C)&&C._bakIERange){C._bakIERange.select()}}catch(D){}C._bakIERange=null})}B=A=null};y.prototype={rangeInBody:function(B,C){var A=c.ie9below||C?B.item?B.item():B.parentElement():B.startContainer;return A===this.document.body||e.inDoc(A,this.document)},getNative:function(){var A=this.document;try{return !A?null:c.ie9below?A.selection:e.getWindow(A).getSelection()}catch(B){return null}},getIERange:function(){var A=w(this);if(!A){if(this._bakIERange){return this._bakIERange}}return A},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var A=this.getStart();if(A){return e.findParents(A,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(c.ie9below){var B=w(this);return !!(B&&this.rangeInBody(B))}else{return !!this.getNative().rangeCount}}catch(A){return false}},getRange:function(){var D=this;function F(K){var I=D.document.body.firstChild,J=K.collapsed;while(I&&I.firstChild){K.setStart(I,0);I=I.firstChild}if(!K.startContainer){K.setStart(D.document.body,0)}if(J){K.collapse(true)}}if(D._cachedRange!=null){return this._cachedRange}var G=new b.editor.dom.Range(D.document);if(c.ie9below){var E=D.getIERange();if(E){try{z(E,G)}catch(A){F(G)}}else{F(G)}}else{var H=D.getNative();if(H&&H.rangeCount){var B=H.getRangeAt(0);var C=H.getRangeAt(H.rangeCount-1);G.setStart(B.startContainer,B.startOffset).setEnd(C.endContainer,C.endOffset);if(G.collapsed&&e.isBody(G.startContainer)&&!G.startOffset){F(G)}}else{if(this._bakRange&&e.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}F(G)}}return this._bakRange=G},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var B=c.ie9below?this.getIERange():this.getRange(),E,C,D,A;if(c.ie9below){if(!B){return this.document.body.firstChild}if(B.item){return B.item(0)}E=B.duplicate();E.text.length>0&&E.moveStart("character",1);E.collapse(1);C=E.parentElement();A=D=B.parentElement();while(D=D.parentNode){if(D==C){C=A;break}}}else{B.shrinkBoundary();C=B.startContainer;if(C.nodeType==1&&C.hasChildNodes()){C=C.childNodes[Math.min(C.childNodes.length-1,B.startOffset)]}if(C.nodeType==3){return C.parentNode}}return C},getText:function(){var B,A;if(this.isFocus()&&(B=this.getNative())){A=c.ie9below?B.createRange():B.getRangeAt(0);return c.ie9below?A.text:A.toString()}return""},clearRange:function(){this.getNative()[c.ie9below?"empty":"removeAllRanges"]()}}})();(function(){var C=0,w;function B(E,D){var G;if(D.textarea){if(u.isString(D.textarea)){for(var F=0,H,I=e.getElementsByTagName(E,"textarea");H=I[F++];){if(H.id=="ueditor_textarea_"+D.options.textarea){G=H;break}}}else{G=D.textarea}}if(!G){E.appendChild(G=e.createElement(document,"textarea",{"name":D.options.textarea,"id":"ueditor_textarea_"+D.options.textarea,"style":"display:none"}));D.textarea=G}!G.getAttribute("name")&&G.setAttribute("name",D.options.textarea);G.value=D.hasContents()?(D.options.allHtmlEnabled?D.getAllHtml():D.getContent(null,null,true)):""}function A(D){for(var E in UE.plugins){UE.plugins[E].call(D)}}function x(D){for(var E in D){return E}}function z(D){D.langIsReady=true;D.fireEvent("langReady")}var y=UE.Editor=function(E){var D=this;D.uid=C++;g.call(D);D.commands={};D.options=u.extend(u.clone(E||{}),UEDITOR_CONFIG,true);D.shortcutkeys={};D.inputRules=[];D.outputRules=[];D.setOpt(y.defaultOptions(D));D.loadServerConfig();if(!u.isEmptyObject(UE.I18N)){D.options.lang=x(UE.I18N);UE.plugin.load(D);z(D)}else{u.loadFile(document,{src:D.options.langPath+D.options.lang+"/"+D.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(D);z(D)})}UE.instants["ueditorInstant"+D.uid]=D};y.prototype={registerCommand:function(D,E){this.commands[D]=E},ready:function(D){var E=this;if(D){E.isReady?D.apply(E):E.addListener("ready",D)}},setOpt:function(D,F){var E={};if(u.isString(D)){E[D]=F}else{E=D}u.extend(this.options,E,true)},getOpt:function(D){return this.options[D]},destroy:function(){var F=this;F.fireEvent("destroy");var D=F.container.parentNode;var H=F.textarea;if(!H){H=document.createElement("textarea");D.parentNode.insertBefore(H,D)}else{H.style.display=""}H.style.width=F.iframe.offsetWidth+"px";H.style.height=F.iframe.offsetHeight+"px";H.value=F.getContent();H.id=F.key;D.innerHTML="";e.remove(D);var E=F.key;for(var G in F){if(F.hasOwnProperty(G)){delete this[G]}}UE.delEditor(E)},render:function(D){var G=this,H=G.options,E=function(I){return parseInt(e.getComputedStyle(D,I))};if(u.isString(D)){D=document.getElementById(D)}if(D){if(H.initialFrameWidth){H.minFrameWidth=H.initialFrameWidth}else{H.minFrameWidth=H.initialFrameWidth=D.offsetWidth}if(H.initialFrameHeight){H.minFrameHeight=H.initialFrameHeight}else{H.initialFrameHeight=H.minFrameHeight=D.offsetHeight}D.style.width=/%$/.test(H.initialFrameWidth)?"100%":H.initialFrameWidth-E("padding-left")-E("padding-right")+"px";D.style.height=/%$/.test(H.initialFrameHeight)?"100%":H.initialFrameHeight-E("padding-top")-E("padding-bottom")+"px";D.style.zIndex=H.zIndex;var F=(p&&c.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head>"+"<style type='text/css'>"+".view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\n"+"body{margin:8px;font-family:sans-serif;font-size:16px;}"+"p{margin:5px 0;}</style>"+(H.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+u.unhtml(H.iframeCssUrl)+"'/>":"")+(H.initialStyle?"<style>"+H.initialStyle+"</style>":"")+"</head><body class='view' ></body>"+"<script type='text/javascript' "+(p?"defer='defer'":"")+" id='_initialScript'>"+"setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+G.uid+"'];editor._setup(document);},0);"+"var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>";D.appendChild(e.createElement(document,"iframe",{id:"ueditor_"+G.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(H.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+F+'");document.close();}())'}));D.style.overflow="hidden";setTimeout(function(){if(/%$/.test(H.initialFrameWidth)){H.minFrameWidth=H.initialFrameWidth=D.offsetWidth}if(/%$/.test(H.initialFrameHeight)){H.minFrameHeight=H.initialFrameHeight=D.offsetHeight;D.style.height=H.initialFrameHeight+"px"}})}},_setup:function(D){var H=this,J=H.options;if(p){D.body.disabled=true;D.body.contentEditable=true;D.body.disabled=false}else{D.body.contentEditable=true}D.body.spellcheck=false;H.document=D;H.window=D.defaultView||D.parentWindow;H.iframe=H.window.frameElement;H.body=D.body;H.selection=new d.Selection(D);var G;if(c.gecko&&(G=this.selection.getNative())){G.removeAllRanges()}this._initEvents();for(var F=this.iframe.parentNode;!e.isBody(F);F=F.parentNode){if(F.tagName=="FORM"){H.form=F;if(H.options.autoSyncData){e.on(H.window,"blur",function(){B(F,H)})}else{e.on(F,"submit",function(){B(this,H)})}break}}if(J.initialContent){if(J.autoClearinitialContent){var I=H.execCommand;H.execCommand=function(){H.fireEvent("firstBeforeExecCommand");return I.apply(H,arguments)};this._setDefaultContent(J.initialContent)}else{this.setContent(J.initialContent,false,true)}}if(e.isEmptyNode(H.body)){H.body.innerHTML="<p>"+(c.ie?"":"<br/>")+"</p>"}if(J.focus){setTimeout(function(){H.focus(H.options.focusInEnd);!H.options.autoClearinitialContent&&H._selectionChange()},0)}if(!H.container){H.container=this.iframe.parentNode}if(J.fullscreen&&H.ui){H.ui.setFullScreen(true)}try{H.document.execCommand("2D-position",false,false)}catch(E){}try{H.document.execCommand("enableInlineTableEditing",false,false)}catch(E){}try{H.document.execCommand("enableObjectResizing",false,false)}catch(E){}H._bindshortcutKeys();H.isReady=1;H.fireEvent("ready");J.onready&&J.onready.call(H);if(!c.ie9below){e.on(H.window,["blur","focus"],function(K){if(K.type=="blur"){H._bakRange=H.selection.getRange();try{H._bakNativeRange=H.selection.getNative().getRangeAt(0);H.selection.getNative().removeAllRanges()}catch(K){H._bakNativeRange=null}}else{try{H._bakRange&&H._bakRange.select()}catch(K){}}})}if(c.gecko&&c.version<=10902){H.body.contentEditable=false;setTimeout(function(){H.body.contentEditable=true},100);setInterval(function(){H.body.style.height=H.iframe.offsetHeight-20+"px"},100)}!J.isShow&&H.setHide();J.readonly&&H.setDisabled()},sync:function(E){var F=this,D=E?document.getElementById(E):e.findParent(F.iframe.parentNode,function(G){return G.tagName=="FORM"},true);D&&B(D,F)},setHeight:function(D,E){if(D!==parseInt(this.iframe.parentNode.style.height)){this.iframe.parentNode.style.height=D+"px"}!E&&(this.options.minFrameHeight=this.options.initialFrameHeight=D);this.body.style.height=D+"px";!E&&this.trigger("setHeight")},addshortcutkey:function(D,E){var F={};if(E){F[D]=E}else{F=D}u.extend(this.shortcutkeys,F)},_bindshortcutKeys:function(){var D=this,E=this.shortcutkeys;D.addListener("keydown",function(N,F){var I=F.keyCode||F.which;for(var G in E){var M=E[G].split(",");for(var K=0,L;L=M[K++];){L=L.split(":");var H=L[0],J=L[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(H.toLowerCase())||/^(\d+)$/.test(H)){if(((RegExp.$1=="ctrl"?(F.ctrlKey||F.metaKey):0)&&(RegExp.$2!=""?F[RegExp.$2.slice(1)+"Key"]:1)&&I==RegExp.$3)||I==RegExp.$1){if(D.queryCommandState(G,J)!=-1){D.execCommand(G,J)}e.preventDefault(F)}}}}})},getContent:function(D,E,I,G,F){var H=this;if(D&&u.isFunction(D)){E=D;D=""}if(E?!E():!this.hasContents()){return""}H.fireEvent("beforegetcontent");var J=UE.htmlparser(H.body.innerHTML,G);H.filterOutputRule(J);H.fireEvent("aftergetcontent",D,J);return J.toHtml(F)},getAllHtml:function(){var G=this,D=[],F="";G.fireEvent("getAllHtml",D);if(c.ie&&c.version>8){var E="";u.each(G.document.styleSheets,function(H){E+=(H.href?'<link rel="stylesheet" type="text/css" href="'+H.href+'" />':"<style>"+H.cssText+"</style>")});u.each(G.document.getElementsByTagName("script"),function(H){E+=H.outerHTML})}return"<html><head>"+(G.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+G.options.charset+'"/>':"")+(E||G.document.getElementsByTagName("head")[0].innerHTML)+D.join("\n")+"</head>"+"<body "+(p&&c.version<9?'class="view"':"")+">"+G.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var E=new RegExp(e.fillChar,"g"),D=this.body.innerHTML.replace(/[\n\r]/g,"");D=D.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(F,G,H){return f.$block[H]?"\n":G?G:""});return D.replace(E,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var D=new RegExp(e.fillChar,"g");return this.body[c.ie?"innerText":"textContent"].replace(D,"").replace(/\u00a0/g," ")},setContent:function(F,G,J){var I=this;I.fireEvent("beforesetcontent",F);var L=UE.htmlparser(F);I.filterInputRule(L);F=L.toHtml();I.body.innerHTML=(G?I.body.innerHTML:"")+F;function H(N){return N.tagName=="DIV"&&N.getAttribute("cdata_tag")}if(I.options.enterTag=="p"){var D=this.body.firstChild,M;if(!D||D.nodeType==1&&(f.$cdata[D.tagName]||H(D)||e.isCustomeNode(D))&&D===this.body.lastChild){this.body.innerHTML="<p>"+(c.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var K=I.document.createElement("p");while(D){while(D&&(D.nodeType==3||D.nodeType==1&&f.p[D.tagName]&&!f.$cdata[D.tagName])){M=D.nextSibling;K.appendChild(D);D=M}if(K.firstChild){if(!D){I.body.appendChild(K);break}else{D.parentNode.insertBefore(K,D);K=I.document.createElement("p")}}D=D.nextSibling}}}I.fireEvent("aftersetcontent");I.fireEvent("contentchange");!J&&I._selectionChange();I._bakRange=I._bakIERange=I._bakNativeRange=null;var E;if(c.gecko&&(E=this.selection.getNative())){E.removeAllRanges()}if(I.options.autoSyncData){I.form&&B(I.form,I)}},focus:function(H){try{var E=this,G=E.selection.getRange();if(H){var F=E.body.lastChild;if(F&&F.nodeType==1&&!f.$empty[F.tagName]){if(e.isEmptyBlock(F)){G.setStartAtFirst(F)}else{G.setStartAtLast(F)}G.collapse(true)}G.setCursor(true)}else{if(!G.collapsed&&e.isBody(G.startContainer)&&G.startOffset==0){var F=E.body.firstChild;if(F&&F.nodeType==1&&!f.$empty[F.tagName]){G.setStartAtFirst(F).collapse(true)}}G.select(true)}this.fireEvent("focus selectionchange")}catch(D){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var E=this.selection.getNative();if(E.empty&&c.ie){var D=document.body.createTextRange();D.moveToElementText(document.body);D.collapse(true);D.select();E.empty()}else{E.removeAllRanges()}},_initEvents:function(){var E=this,D=E.document,F=E.window;E._proxyDomEvent=u.bind(E._proxyDomEvent,E);e.on(D,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],E._proxyDomEvent);e.on(F,["focus","blur"],E._proxyDomEvent);e.on(E.body,"drop",function(G){if(c.gecko&&G.stopPropagation){G.stopPropagation()}E.fireEvent("contentchange")});e.on(D,["mouseup","keydown"],function(G){if(G.type=="keydown"&&(G.ctrlKey||G.metaKey||G.shiftKey||G.altKey)){return}if(G.button==2){return}E._selectionChange(250,G)})},_proxyDomEvent:function(D){if(this.fireEvent("before"+D.type.replace(/^on/,"").toLowerCase())===false){return false}if(this.fireEvent(D.type.replace(/^on/,""),D)===false){return false}return this.fireEvent("after"+D.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(D,E){var G=this;var F=false;var H,I;if(c.ie&&c.version<9&&E&&E.type=="mouseup"){var J=this.selection.getRange();if(!J.collapsed){F=true;H=E.clientX;I=E.clientY}}clearTimeout(w);w=setTimeout(function(){if(!G.selection||!G.selection.getNative()){return}var M;if(F&&G.selection.getNative().type=="None"){M=G.document.body.createTextRange();try{M.moveToPoint(H,I)}catch(L){M=null}}var K;if(M){K=G.selection.getIERange;G.selection.getIERange=function(){return M}}G.selection.cache();if(K){G.selection.getIERange=K}if(G.selection._cachedRange&&G.selection._cachedStartElement){G.fireEvent("beforeselectionchange");G.fireEvent("selectionchange",!!E);G.fireEvent("afterselectionchange");G.selection.clear()}},D||50)},_callCmdFn:function(H,D){var G=D[0].toLowerCase(),E,F;E=this.commands[G]||UE.commands[G];F=E&&E[H];if((!E||!F)&&H=="queryCommandState"){return 0}else{if(F){return F.apply(this,D)}}},execCommand:function(E){E=E.toLowerCase();var F=this,G,D=F.commands[E]||UE.commands[E];if(!D||!D.execCommand){return null}if(!D.notNeedUndo&&!F.__hasEnterExecCommand){F.__hasEnterExecCommand=true;if(F.queryCommandState.apply(F,arguments)!=-1){F.fireEvent("saveScene");F.fireEvent.apply(F,["beforeexeccommand",E].concat(arguments));G=this._callCmdFn("execCommand",arguments);F.fireEvent.apply(F,["afterexeccommand",E].concat(arguments));F.fireEvent("saveScene")}F.__hasEnterExecCommand=false}else{G=this._callCmdFn("execCommand",arguments);(!F.__hasEnterExecCommand&&!D.ignoreContentChange&&!F._ignoreContentChange)&&F.fireEvent("contentchange")}(!F.__hasEnterExecCommand&&!D.ignoreContentChange&&!F._ignoreContentChange)&&F._selectionChange();return G},queryCommandState:function(D){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(D){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(I){if(I){for(var F=0,D;D=I[F++];){if(this.document.getElementsByTagName(D).length>0){return true}}}if(!e.isEmptyBlock(this.body)){return true}I=["div"];for(F=0;D=I[F++];){var H=e.getElementsByTagName(this.document,D);for(var G=0,E;E=H[G++];){if(e.isCustomeNode(E)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var E=this,F;if(E.body.contentEditable=="false"){E.body.contentEditable=true;F=E.selection.getRange();try{F.moveToBookmark(E.lastBk);delete E.lastBk}catch(D){F.setStartAtFirst(E.body).collapse(true)}F.select(true);if(E.bkqueryCommandState){E.queryCommandState=E.bkqueryCommandState;delete E.bkqueryCommandState}if(E.bkqueryCommandValue){E.queryCommandValue=E.bkqueryCommandValue;delete E.bkqueryCommandValue}E.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(D){var E=this;D=D?u.isArray(D)?D:[D]:[];if(E.body.contentEditable=="true"){if(!E.lastBk){E.lastBk=E.selection.getRange().createBookmark(true)}E.body.contentEditable=false;E.bkqueryCommandState=E.queryCommandState;E.bkqueryCommandValue=E.queryCommandValue;E.queryCommandState=function(F){if(u.indexOf(D,F)!=-1){return E.bkqueryCommandState.apply(E,arguments)}return -1};E.queryCommandValue=function(F){if(u.indexOf(D,F)!=-1){return E.bkqueryCommandValue.apply(E,arguments)}return null};E.fireEvent("selectionchange")}},disable:function(D){return this.setDisabled(D)},_setDefaultContent:function(){function D(){var E=this;if(E.document.getElementById("initContent")){E.body.innerHTML="<p>"+(p?"":"<br/>")+"</p>";E.removeListener("firstBeforeExecCommand focus",D);setTimeout(function(){E.focus();E._selectionChange()},0)}}return function(E){var F=this;F.body.innerHTML='<p id="initContent">'+E+"</p>";F.addListener("firstBeforeExecCommand focus",D)}}(),setShow:function(){var E=this,F=E.selection.getRange();if(E.container.style.display=="none"){try{F.moveToBookmark(E.lastBk);delete E.lastBk}catch(D){F.setStartAtFirst(E.body).collapse(true)}setTimeout(function(){F.select(true)},100);E.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){var D=this;if(!D.lastBk){D.lastBk=D.selection.getRange().createBookmark(true)}D.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(G){var F=UE.I18N[this.options.lang];if(!F){throw Error("not import language file")}G=(G||"").split(".");for(var E=0,D;D=G[E++];){F=F[D];if(!F){break}}return F},getContentLength:function(G,H){var E=this.getContent(false,false,true).length;if(G){H=(H||[]).concat(["hr","img","iframe"]);E=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var F=0,D;D=H[F++];){E+=this.document.getElementsByTagName(D).length}}return E},addInputRule:function(D){this.inputRules.push(D)},filterInputRule:function(F){for(var E=0,D;D=this.inputRules[E++];){D.call(this,F)}},addOutputRule:function(D){this.outputRules.push(D)},filterOutputRule:function(F){for(var E=0,D;D=this.outputRules[E++];){D.call(this,F)}},getActionUrl:function(D){var E=this.getOpt(D)||D,F=this.getOpt("imageUrl"),G=this.getOpt("serverUrl");if(!G&&F){G=F.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")}if(G){G=G+(G.indexOf("?")==-1?"?":"&")+"action="+(E||"");return u.formatUrl(G)}else{return""}}};u.inherits(y,g)})();UE.Editor.defaultOptions=function(x){var w=x.options.UEDITOR_HOME_URL;return{isShow:true,initialContent:"",initialStyle:"",autoClearinitialContent:false,iframeCssUrl:w+"themes/iframe.css",textarea:"editorValue",focus:false,focusInEnd:true,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",customDomain:false,lang:"zh-cn",langPath:w+"lang/",theme:"default",themePath:w+"themes/",allHtmlEnabled:false,scaleEnabled:false,tableNativeEditInFF:false,autoSyncData:true,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){var w=this;setTimeout(function(){try{w.options.imageUrl&&w.setOpt("serverUrl",w.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var y=w.getActionUrl("config"),A=u.isCrossDomainUrl(y);w._serverConfigLoaded=false;y&&UE.ajax.request(y,{"method":"GET","dataType":A?"jsonp":"","onsuccess":function(D){try{var B=A?D:eval("("+D.responseText+")");u.extend(w.options,B);w.fireEvent("serverConfigLoaded");w._serverConfigLoaded=true}catch(C){x(w.getLang("loadconfigFormatError"))}},"onerror":function(){x(w.getLang("loadconfigHttpError"))}})}catch(z){x(w.getLang("loadconfigError"))}});function x(y){console&&console.error(y)}};UE.Editor.prototype.isServerConfigLoaded=function(){var w=this;return w._serverConfigLoaded||false};UE.Editor.prototype.afterConfigReady=function(w){if(!w||!u.isFunction(w)){return}var x=this;var y=function(){w.apply(x,arguments);x.removeListener("serverConfigLoaded",y)};if(x.isServerConfigLoaded()){w.call(x,"serverConfigLoaded")}else{x.addListener("serverConfigLoaded",y)}}})();UE.ajax=function(){var A="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP");A="ActiveXObject('Msxml2.XMLHTTP')"}catch(z){try{new ActiveXObject("Microsoft.XMLHTTP");A="ActiveXObject('Microsoft.XMLHTTP')"}catch(z){}}var w=new Function("return new "+A);function B(E){var F=[];for(var C in E){if(C=="method"||C=="timeout"||C=="async"||C=="dataType"||C=="callback"){continue}if(E[C]==undefined||E[C]==null){continue}if(!((typeof E[C]).toLowerCase()=="function"||(typeof E[C]).toLowerCase()=="object")){F.push(encodeURIComponent(C)+"="+encodeURIComponent(E[C]))}else{if(u.isArray(E[C])){for(var D=0;D<E[C].length;D++){F.push(encodeURIComponent(C)+"[]="+encodeURIComponent(E[C][D]))}}}}return F.join("&")}function x(K,C){var L=w(),I=false,E={method:"POST",timeout:5000,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof K==="object"){C=K;K=C.url}if(!L||!K){return}var D=C?u.extend(E,C):E;var H=B(D);if(!u.isEmptyObject(D.data)){H+=(H?"&":"")+B(D.data)}var J=setTimeout(function(){if(L.readyState!=4){I=true;L.abort();clearTimeout(J)}},D.timeout);var F=D.method.toUpperCase();var G=K+(K.indexOf("?")==-1?"?":"&")+(F=="POST"?"":H+"&noCache="+ +new Date);L.open(F,G,D.async);L.onreadystatechange=function(){if(L.readyState==4){if(!I&&L.status==200){D.onsuccess(L)}else{D.onerror(L)}}};if(F=="POST"){L.setRequestHeader("Content-Type","application/x-www-form-urlencoded");L.send(H)}else{L.send(null)}}function y(Q,J){var N=J.onsuccess||function(){},M=document.createElement("SCRIPT"),I=J||{},E=I["charset"],C=I["jsonp"]||"callback",D,O=I["timeOut"]||0,P,L=new RegExp("(\\?|&)"+C+"=([^&]*)"),H;if(u.isFunction(N)){D="bd__editor__"+Math.floor(Math.random()*2147483648).toString(36);window[D]=G(0)}else{if(u.isString(N)){D=N}else{if(H=L.exec(Q)){D=H[2]}}}Q=Q.replace(L,"\x241"+C+"="+D);if(Q.search(L)<0){Q+=(Q.indexOf("?")<0?"?":"&")+C+"="+D}var K=B(J);if(!u.isEmptyObject(J.data)){K+=(K?"&":"")+B(J.data)}if(K){Q=Q.replace(/\?/,"?"+K+"&")}M.onerror=G(1);if(O){P=setTimeout(G(1),O)}F(M,Q,E);function F(S,T,R){S.setAttribute("type","text/javascript");S.setAttribute("defer","defer");R&&S.setAttribute("charset",R);S.setAttribute("src",T);document.getElementsByTagName("head")[0].appendChild(S)}function G(R){return function(){try{if(R){I.onerror&&I.onerror()}else{try{clearTimeout(P);N.apply(window,arguments)}catch(S){}}}catch(T){I.onerror&&I.onerror.call(window,T)}finally{I.oncomplete&&I.oncomplete.apply(window,arguments);M.parentNode&&M.parentNode.removeChild(M);window[D]=null;try{delete window[D]}catch(S){}}}}}return{request:function(D,C){if(C&&C.dataType=="jsonp"){y(D,C)}else{x(D,C)}},getJSONP:function(F,C,D){var E={"data":C,"oncomplete":D};y(F,E)}}}();var k=UE.filterWord=function(){function x(z){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(z)}function y(z){z=z.replace(/[\d.]+\w+/g,function(A){return u.transUnitToPx(A)});return z}function w(z){return z.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(D){if(c.opera){return""}try{if(/Bitmap/i.test(D)){return""}var E=D.match(/width:([ \d.]*p[tx])/i)[1],B=D.match(/height:([ \d.]*p[tx])/i)[1],C=D.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+y(E)+'" height="'+y(B)+'" src="'+C+'" />'}catch(A){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(C,B,A,D){return B=="class"&&D=="MsoListParagraph"?C:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(A,B,C){return C.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(F,H,I,G){var B=[],E=G.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(L){return u.transUnitToPx(L)}).split(/;\s*/g);for(var A=0,J;J=E[A];A++){var C,K,D=J.split(":");if(D.length==2){C=D[0].toLowerCase();K=D[1].toLowerCase();if(/^(background)\w*/.test(C)&&K.replace(/(initial|\s)/g,"").length==0||/^(margin)\w*/.test(C)&&/^0\w+$/.test(K)){continue}switch(C){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(H)){B[A]=C.replace(/^mso-|-alt$/g,"")+":"+y(K)}continue;case"horiz-align":B[A]="text-align:"+K;continue;case"vert-align":B[A]="vertical-align:"+K;continue;case"font-color":case"mso-foreground":B[A]="color:"+K;continue;case"mso-background":case"mso-highlight":B[A]="background:"+K;continue;case"mso-default-height":B[A]="min-height:"+y(K);continue;case"mso-default-width":B[A]="min-width:"+y(K);continue;case"mso-padding-between-alt":B[A]="border-collapse:separate;border-spacing:"+y(K);continue;case"text-line-through":if((K=="single")||(K=="double")){B[A]="text-decoration:line-through"}continue;case"mso-zero-height":if(K=="yes"){B[A]="display:none"}continue;case"margin":if(!/[1-9]/.test(K)){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(C)||/text\-indent|padding|margin/.test(C)&&/\-[\d.]+/.test(K)){continue}B[A]=C+":"+D[1]}}return H+(B.length?' style="'+B.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(z){return(x(z)?w(z):z)}}();(function(){var J=UE.uNode=function(K){this.type=K.type;this.data=K.data;this.tagName=K.tagName;this.parentNode=K.parentNode;this.attrs=K.attrs||{};this.children=K.children};var H={"href":1,"src":1,"_src":1,"_href":1,"cdata_data":1};var I={style:1,script:1};var z="    ",w="\n";function B(K,M,L){K.push(w);return M+(L?1:-1)}function A(K,L){for(var M=0;M<L;M++){K.push(z)}}J.createElement=function(K){if(/[<>]/.test(K)){return UE.htmlparser(K).children[0]}else{return new J({type:"element",children:[],tagName:K})}};J.createText=function(K,L){return new UE.uNode({type:"text","data":L?K:u.unhtml(K||"")})};function F(P,K,N,M){switch(P.type){case"root":for(var O=0,L;L=P.children[O++];){if(N&&L.type=="element"&&!f.$inlineWithA[L.tagName]&&O>1){B(K,M,true);A(K,M)}F(L,K,N,M)}break;case"text":E(P,K);break;case"element":D(P,K,N,M);break;case"comment":C(P,K,N)}return K}function E(L,K){if(L.parentNode.tagName=="pre"){K.push(L.data)}else{K.push(I[L.parentNode.tagName]?u.html(L.data):L.data.replace(/[ ]{2}/g," &nbsp;"))}}function D(S,L,Q,P){var M="";if(S.attrs){M=[];var N=S.attrs;for(var K in N){M.push(K+(N[K]!==undefined?'="'+(H[K]?u.html(N[K]).replace(/["]/g,function(T){return"&quot;"}):u.unhtml(N[K]))+'"':""))}M=M.join(" ")}L.push("<"+S.tagName+(M?" "+M:"")+(f.$empty[S.tagName]?"/":"")+">");if(Q&&!f.$inlineWithA[S.tagName]&&S.tagName!="pre"){if(S.children&&S.children.length){P=B(L,P,true);A(L,P)}}if(S.children&&S.children.length){for(var R=0,O;O=S.children[R++];){if(Q&&O.type=="element"&&!f.$inlineWithA[O.tagName]&&R>1){B(L,P);A(L,P)}F(O,L,Q,P)}}if(!f.$empty[S.tagName]){if(Q&&!f.$inlineWithA[S.tagName]&&S.tagName!="pre"){if(S.children&&S.children.length){P=B(L,P);A(L,P)}}L.push("</"+S.tagName+">")}}function C(L,K){K.push("<!--"+L.data+"-->")}function x(O,M){var N;if(O.type=="element"&&O.getAttr("id")==M){return O}if(O.children&&O.children.length){for(var L=0,K;K=O.children[L++];){if(N=x(K,M)){return N}}}}function y(N,O,K){if(N.type=="element"&&N.tagName==O){K.push(N)}if(N.children&&N.children.length){for(var M=0,L;L=N.children[M++];){y(L,O,K)}}}function G(N,L){if(N.children&&N.children.length){for(var M=0,K;K=N.children[M];){G(K,L);if(K.parentNode){if(K.children&&K.children.length){L(K)}if(K.parentNode){M++}}}}else{L(N)}}J.prototype={toHtml:function(L){var K=[];F(this,K,L,0);return K.join("")},innerHTML:function(L){if(this.type!="element"||f.$empty[this.tagName]){return this}if(u.isString(L)){if(this.children){for(var M=0,K;K=this.children[M++];){K.parentNode=null}}this.children=[];var N=UE.htmlparser(L);for(var M=0,K;K=N.children[M++];){this.children.push(K);K.parentNode=this}return this}else{var N=new UE.uNode({type:"root",children:this.children});return N.toHtml()}},innerText:function(N,M){if(this.type!="element"||f.$empty[this.tagName]){return this}if(N){if(this.children){for(var L=0,K;K=this.children[L++];){K.parentNode=null}}this.children=[];this.appendChild(J.createText(N,M));return this}else{return this.toHtml().replace(/<[^>]+>/g,"")}},getData:function(){if(this.type=="element"){return""}return this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){var M=this.parentNode;for(var L=0,K;K=M.children[L];L++){if(K===this){return L==0?null:M.children[L-1]}}},nextSibling:function(){var M=this.parentNode;for(var L=0,K;K=M.children[L++];){if(K===this){return M.children[L]}}},replaceChild:function(N,M){if(this.children){if(N.parentNode){N.parentNode.removeChild(N)}for(var L=0,K;K=this.children[L];L++){if(K===M){this.children.splice(L,1,N);M.parentNode=null;N.parentNode=this;return N}}}},appendChild:function(M){if(this.type=="root"||(this.type=="element"&&!f.$empty[this.tagName])){if(!this.children){this.children=[]}if(M.parentNode){M.parentNode.removeChild(M)}for(var L=0,K;K=this.children[L];L++){if(K===M){this.children.splice(L,1);break}}this.children.push(M);M.parentNode=this;return M}},insertBefore:function(N,M){if(this.children){if(N.parentNode){N.parentNode.removeChild(N)}for(var L=0,K;K=this.children[L];L++){if(K===M){this.children.splice(L,0,N);N.parentNode=this;return N}}}},insertAfter:function(N,M){if(this.children){if(N.parentNode){N.parentNode.removeChild(N)}for(var L=0,K;K=this.children[L];L++){if(K===M){this.children.splice(L+1,0,N);N.parentNode=this;return N}}}},removeChild:function(P,O){if(this.children){for(var M=0,K;K=this.children[M];M++){if(K===P){this.children.splice(M,1);K.parentNode=null;if(O&&K.children&&K.children.length){for(var N=0,L;L=K.children[N];N++){this.children.splice(M+N,0,L);L.parentNode=this}}return K}}}},getAttr:function(K){return this.attrs&&this.attrs[K.toLowerCase()]},setAttr:function(L,M){if(!L){delete this.attrs;return}if(!this.attrs){this.attrs={}}if(u.isObject(L)){for(var K in L){if(!L[K]){delete this.attrs[K]}else{this.attrs[K.toLowerCase()]=L[K]}}}else{if(!M){delete this.attrs[L]}else{this.attrs[L.toLowerCase()]=M}}},getIndex:function(){var M=this.parentNode;for(var L=0,K;K=M.children[L];L++){if(K===this){return L}}return -1},getNodeById:function(M){var N;if(this.children&&this.children.length){for(var L=0,K;K=this.children[L++];){if(N=x(K,M)){return N}}}},getNodesByTagName:function(M){M=u.trim(M).replace(/[ ]{2,}/g," ").split(" ");var K=[],L=this;u.each(M,function(P){if(L.children&&L.children.length){for(var O=0,N;N=L.children[O++];){y(N,P,K)}}});return K},getStyle:function(M){var K=this.getAttr("style");if(!K){return""}var N=new RegExp("(^|;)\\s*"+M+":([^;]+)","i");var L=K.match(N);if(L&&L[0]){return L[2]}return""},setStyle:function(N,O){function M(P,R){var Q=new RegExp("(^|;)\\s*"+P+":([^;]+;?)","gi");L=L.replace(Q,"$1");if(R){L=P+":"+u.unhtml(R)+";"+L}}var L=this.getAttr("style");if(!L){L=""}if(u.isObject(N)){for(var K in N){M(K,N[K])}}else{M(N,O)}this.setAttr("style",u.trim(L))},traversal:function(K){if(this.children&&this.children.length){G(this,K)}return this}}})();var o=UE.htmlparser=function(C,D){var K=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,J=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g;var w={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};C=C.replace(new RegExp(e.fillChar,"g"),"");if(!D){C=C.replace(new RegExp("[\\r\\t\\n"+(D?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(D?"":" ")+"]*","g"),function(P,Q){if(Q&&w[Q.toLowerCase()]){return P.replace(/(^[\n\r]+)|([\n\r]+$)/g,"")}return P.replace(new RegExp("^[\\r\\n"+(D?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(D?"":" ")+"]+$"),"")})}var I={"href":1,"src":1};var O=UE.uNode,G={"td":"tr","tr":["tbody","thead","tfoot"],"tbody":"table","th":"tr","thead":"table","tfoot":"table","caption":"table","li":["ul","ol"],"dt":"dl","dd":"dl","option":"select"},F={"ol":"li","ul":"li"};function M(Q,P){if(F[Q.tagName]){var R=O.createElement(F[Q.tagName]);Q.appendChild(R);R.appendChild(O.createText(P));Q=R}else{Q.appendChild(O.createText(P))}}function B(V,W,S){var U;if(U=G[W]){var X=V,R;while(X.type!="root"){if(u.isArray(U)?u.indexOf(U,X.tagName)!=-1:U==X.tagName){V=X;R=true;break}X=X.parentNode}if(!R){V=B(V,u.isArray(U)?U[0]:U)}}var Q=new O({parentNode:V,type:"element",tagName:W.toLowerCase(),children:f.$empty[W]?null:[]});if(S){var P={},T;while(T=J.exec(S)){P[T[1].toLowerCase()]=I[T[1].toLowerCase()]?(T[2]||T[3]||T[4]):u.unhtml(T[2]||T[3]||T[4])}Q.attrs=P}V.children.push(Q);return f.$empty[W]?V:Q}function x(Q,P){Q.children.push(new O({type:"comment",data:P,parentNode:Q}))}var E,y=0,H=0;var L=new O({type:"root",children:[]});var z=L;while(E=K.exec(C)){y=E.index;try{if(y>H){M(z,C.slice(H,y))}if(E[3]){if(f.$cdata[z.tagName]){M(z,E[0])}else{z=B(z,E[3].toLowerCase(),E[4])}}else{if(E[1]){if(z.type!="root"){if(f.$cdata[z.tagName]&&!f.$cdata[E[1]]){M(z,E[0])}else{var N=z;while(z.type=="element"&&z.tagName!=E[1].toLowerCase()){z=z.parentNode;if(z.type=="root"){z=N;throw"break"}}z=z.parentNode}}}else{if(E[2]){x(z,E[2])}}}}catch(A){}H=K.lastIndex}if(H<C.length){M(z,C.slice(H))}return L};var j=UE.filterNode=function(){function w(C,E){switch(C.type){case"text":break;case"element":var I;if(I=E[C.tagName]){if(I==="-"){C.parentNode.removeChild(C)}else{if(u.isFunction(I)){var D=C.parentNode,B=C.getIndex();I(C);if(C.parentNode){if(C.children){for(var A=0,z;z=C.children[A];){w(z,E);if(z.parentNode){A++}}}}else{for(var A=B,z;z=D.children[A];){w(z,E);if(z.parentNode){A++}}}}else{var y=I["$"];if(y&&C.attrs){var F={},H;for(var x in y){H=C.getAttr(x);if(x=="style"&&u.isArray(y[x])){var G=[];u.each(y[x],function(K){var J;if(J=C.getStyle(K)){G.push(K+":"+J)}});H=G.join(";")}if(H){F[x]=H}}C.attrs=F}if(C.children){for(var A=0,z;z=C.children[A];){w(z,E);if(z.parentNode){A++}}}}}}else{if(f.$cdata[C.tagName]){C.parentNode.removeChild(C)}else{var D=C.parentNode,B=C.getIndex();C.parentNode.removeChild(C,true);for(var A=B,z;z=D.children[A];){w(z,E);if(z.parentNode){A++}}}}break;case"comment":C.parentNode.removeChild(C)}}return function(z,A){if(u.isEmptyObject(A)){return z}var B;if(B=A["-"]){u.each(B.split(" "),function(C){A[C]="-"})}for(var y=0,x;x=z.children[y];){w(x,A);if(x.parentNode){y++}}return z}}();UE.plugin=function(){var w={};return{register:function(A,y,z,x){if(z&&u.isFunction(z)){x=z;z=null}w[A]={optionName:z||A,execFn:y,afterDisabled:x}},load:function(x){u.each(w,function(z){var y=z.execFn.call(x);if(x.options[z.optionName]!==false){if(y){u.each(y,function(B,A){switch(A.toLowerCase()){case"shortcutkey":x.addshortcutkey(B);break;case"bindevents":u.each(B,function(D,C){x.addListener(C,D)});break;case"bindmultievents":u.each(u.isArray(B)?B:[B],function(C){var D=u.trim(C.type).split(/\s+/);u.each(D,function(E){x.addListener(E,C.handler)})});break;case"commands":u.each(B,function(C,D){x.commands[D]=C});break;case"outputrule":x.addOutputRule(B);break;case"inputrule":x.addInputRule(B);break;case"defaultoptions":x.setOpt(B)}})}}else{if(z.afterDisabled){z.afterDisabled.call(x)}}});u.each(UE.plugins,function(y){y.call(x)})},run:function(z,x){var y=w[z];if(y){y.exeFn.call(x)}}}}();var q=UE.keymap={"Backspace":8,"Tab":9,"Enter":13,"Shift":16,"Control":17,"Alt":18,"CapsLock":20,"Esc":27,"Spacebar":32,"PageUp":33,"PageDown":34,"End":35,"Home":36,"Left":37,"Up":38,"Right":39,"Down":40,"Insert":45,"Del":46,"NumLock":144,"Cmd":91,"=":187,"-":189,"b":66,"i":73,"z":90,"y":89,"v":86,"x":88,"s":83,"n":78};var r=UE.LocalStorage=(function(){var y=window.localStorage||w()||null,x="localStorage";return{saveLocalData:function(A,z){if(y&&z){y.setItem(A,z);return true}return false},getLocalData:function(z){if(y){return y.getItem(z)}return null},removeItem:function(z){y&&y.removeItem(z)}};function w(){var z=document.createElement("div");z.style.display="none";if(!z.addBehavior){return null}z.addBehavior("#default#userdata");return{getItem:function(B){var C=null;try{document.body.appendChild(z);z.load(x);C=z.getAttribute(B);document.body.removeChild(z)}catch(A){}return C},setItem:function(A,B){document.body.appendChild(z);z.setAttribute(A,B);z.save(x);document.body.removeChild(z)},removeItem:function(A){document.body.appendChild(z);z.removeAttribute(A);z.save(x);document.body.removeChild(z)}}}})();(function(){var w="ueditor_preference";UE.Editor.prototype.setPreferences=function(y,A){var z={};if(u.isString(y)){z[y]=A}else{z=y}var x=r.getLocalData(w);if(x&&(x=u.str2json(x))){u.extend(x,z)}else{x=z}x&&r.saveLocalData(w,u.json2str(x))};UE.Editor.prototype.getPreferences=function(y){var x=r.getLocalData(w);if(x&&(x=u.str2json(x))){return y?x[y]:x}return null};UE.Editor.prototype.removePreferences=function(y){var x=r.getLocalData(w);if(x&&(x=u.str2json(x))){x[y]=undefined;delete x[y]}x&&r.saveLocalData(w,u.json2str(x))}})();UE.plugins["defaultfilter"]=function(){var w=this;w.setOpt({"allowDivTransToP":true,"disabledTableInTable":true});w.addInputRule(function(y){var x=this.options.allowDivTransToP;var A;function z(B){while(B&&B.type=="element"){if(B.tagName=="td"){return true}B=B.parentNode}return false}y.traversal(function(C){if(C.type=="element"){if(!f.$cdata[C.tagName]&&w.options.autoClearEmptyNode&&f.$inline[C.tagName]&&!f.$empty[C.tagName]&&(!C.attrs||u.isEmptyObject(C.attrs))){if(!C.firstChild()){C.parentNode.removeChild(C)}else{if(C.tagName=="span"&&(!C.attrs||u.isEmptyObject(C.attrs))){C.parentNode.removeChild(C,true)}}return}switch(C.tagName){case"style":case"script":C.setAttr({cdata_tag:C.tagName,cdata_data:(C.innerHTML()||""),"_ue_custom_node_":"true"});C.tagName="div";C.innerHTML("");break;case"a":if(A=C.getAttr("href")){C.setAttr("_href",A)}break;case"img":if(A=C.getAttr("src")){if(/^data:/.test(A)){C.parentNode.removeChild(C);break}}C.setAttr("_src",C.getAttr("src"));break;case"span":if(c.webkit&&(A=C.getStyle("white-space"))){if(/nowrap|normal/.test(A)){C.setStyle("white-space","");if(w.options.autoClearEmptyNode&&u.isEmptyObject(C.attrs)){C.parentNode.removeChild(C,true)}}}A=C.getAttr("id");if(A&&/^_baidu_bookmark_/i.test(A)){C.parentNode.removeChild(C)}break;case"p":if(A=C.getAttr("align")){C.setAttr("align");C.setStyle("text-align",A)}u.each(C.children,function(H){if(H.type=="element"&&H.tagName=="p"){var I=H.nextSibling();C.parentNode.insertAfter(H,C);var G=H;while(I){var J=I.nextSibling();C.parentNode.insertAfter(I,G);G=I;I=J}return false}});if(!C.firstChild()){C.innerHTML(c.ie?"&nbsp;":"<br/>")}break;case"div":if(C.getAttr("cdata_tag")){break}A=C.getAttr("class");if(A&&/^line number\d+/.test(A)){break}if(!x){break}var E,D=UE.uNode.createElement("p");while(E=C.firstChild()){if(E.type=="text"||!UE.dom.dtd.$block[E.tagName]){D.appendChild(E)}else{if(D.firstChild()){C.parentNode.insertBefore(D,C);D=UE.uNode.createElement("p")}else{C.parentNode.insertBefore(E,C)}}}if(D.firstChild()){C.parentNode.insertBefore(D,C)}C.parentNode.removeChild(C);break;case"dl":C.tagName="ul";break;case"dt":case"dd":C.tagName="li";break;case"li":var B=C.getAttr("class");if(!B||!/list\-/.test(B)){C.setAttr()}var F=C.getNodesByTagName("ol ul");UE.utils.each(F,function(G){C.parentNode.insertAfter(G,C)});break;case"td":case"th":case"caption":if(!C.children||!C.children.length){C.appendChild(c.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"))}break;case"table":if(w.options.disabledTableInTable&&z(C)){C.parentNode.insertBefore(UE.uNode.createText(C.innerText()),C);C.parentNode.removeChild(C)}}}})});w.addOutputRule(function(x){var y;x.traversal(function(z){if(z.type=="element"){if(w.options.autoClearEmptyNode&&f.$inline[z.tagName]&&!f.$empty[z.tagName]&&(!z.attrs||u.isEmptyObject(z.attrs))){if(!z.firstChild()){z.parentNode.removeChild(z)}else{if(z.tagName=="span"&&(!z.attrs||u.isEmptyObject(z.attrs))){z.parentNode.removeChild(z,true)}}return}switch(z.tagName){case"div":if(y=z.getAttr("cdata_tag")){z.tagName=y;z.appendChild(UE.uNode.createText(z.getAttr("cdata_data")));z.setAttr({cdata_tag:"",cdata_data:"","_ue_custom_node_":""})}break;case"a":if(y=z.getAttr("_href")){z.setAttr({"href":u.html(y),"_href":""})}break;break;case"span":y=z.getAttr("id");if(y&&/^_baidu_bookmark_/i.test(y)){z.parentNode.removeChild(z)}break;case"img":if(y=z.getAttr("_src")){z.setAttr({"src":z.getAttr("_src"),"_src":""})}}}})})};UE.commands["inserthtml"]={execCommand:function(x,B,H){var E=this,L,y;if(!B){return}if(E.fireEvent("beforeinserthtml",B)===true){return}L=E.selection.getRange();y=L.document.createElement("div");y.style.display="inline";if(!H){var M=UE.htmlparser(B);if(E.options.filterRules){UE.filterNode(M,E.options.filterRules)}E.filterInputRule(M);B=M.toHtml()}y.innerHTML=u.trim(B);if(!L.collapsed){var P=L.startContainer;if(e.isFillChar(P)){L.setStartBefore(P)}P=L.endContainer;if(e.isFillChar(P)){L.setEndAfter(P)}L.txtToElmBoundary();if(L.endContainer&&L.endContainer.nodeType==1){P=L.endContainer.childNodes[L.endOffset];if(P&&e.isBr(P)){L.setEndAfter(P)}}if(L.startOffset==0){P=L.startContainer;if(e.isBoundaryNode(P,"firstChild")){P=L.endContainer;if(L.endOffset==(P.nodeType==3?P.nodeValue.length:P.childNodes.length)&&e.isBoundaryNode(P,"lastChild")){E.body.innerHTML="<p>"+(c.ie?"":"<br/>")+"</p>";L.setStart(E.body.firstChild,0).collapse(true)}}}!L.collapsed&&L.deleteContents();if(L.startContainer.nodeType==1){var w=L.startContainer.childNodes[L.startOffset],K;if(w&&e.isBlockElm(w)&&(K=w.previousSibling)&&e.isBlockElm(K)){L.setEnd(K,K.childNodes.length).collapse();while(w.firstChild){K.appendChild(w.firstChild)}e.remove(w)}}}var w,J,K,N,A=0,G;if(L.inFillChar()){w=L.startContainer;if(e.isFillChar(w)){L.setStartBefore(w).collapse(true);e.remove(w)}else{if(e.isFillChar(w,true)){w.nodeValue=w.nodeValue.replace(h,"");L.startOffset--;L.collapsed&&L.collapse(true)}}}var D=e.findParentByTagName(L.startContainer,"li",true);if(D){var F,C;while(w=y.firstChild){while(w&&(w.nodeType==3||!e.isBlockElm(w)||w.tagName=="HR")){F=w.nextSibling;L.insertNode(w).collapse();C=w;w=F}if(w){if(/^(ol|ul)$/i.test(w.tagName)){while(w.firstChild){C=w.firstChild;e.insertAfter(D,w.firstChild);D=D.nextSibling}e.remove(w)}else{var O;F=w.nextSibling;O=E.document.createElement("li");e.insertAfter(D,O);O.appendChild(w);C=w;w=F;D=O}}}D=e.findParentByTagName(L.startContainer,"li",true);if(e.isEmptyBlock(D)){e.remove(D)}if(C){L.setStartAfter(C).collapse(true).select(true)}}else{while(w=y.firstChild){if(A){var I=E.document.createElement("p");while(w&&(w.nodeType==3||!f.$block[w.tagName])){G=w.nextSibling;I.appendChild(w);w=G}if(I.firstChild){w=I}}L.insertNode(w);G=w.nextSibling;if(!A&&w.nodeType==e.NODE_ELEMENT&&e.isBlockElm(w)){J=e.findParent(w,function(Q){return e.isBlockElm(Q)});if(J&&J.tagName.toLowerCase()!="body"&&!(f[J.tagName][w.nodeName]&&w.parentNode===J)){if(!f[J.tagName][w.nodeName]){K=J}else{N=w.parentNode;while(N!==J){K=N;N=N.parentNode}}e.breakParent(w,K||N);var K=w.previousSibling;e.trimWhiteTextNode(K);if(!K.childNodes.length){e.remove(K)}if(!c.ie&&(F=w.nextSibling)&&e.isBlockElm(F)&&F.lastChild&&!e.isBr(F.lastChild)){F.appendChild(E.document.createElement("br"))}A=1}}var F=w.nextSibling;if(!y.firstChild&&F&&e.isBlockElm(F)){L.setStart(F,0).collapse(true);break}L.setEndAfter(w).collapse()}w=L.startContainer;if(G&&e.isBr(G)){e.remove(G)}if(e.isBlockElm(w)&&e.isEmptyNode(w)){if(G=w.nextSibling){e.remove(w);if(G.nodeType==1&&f.$block[G.tagName]){L.setStart(G,0).collapse(true).shrinkBoundary()}}else{try{w.innerHTML=c.ie?e.fillChar:"<br/>"}catch(z){L.setStartBefore(w);e.remove(w)}}}try{L.select(true)}catch(z){}}setTimeout(function(){L=E.selection.getRange();L.scrollToView(E.autoHeightEnabled,E.autoHeightEnabled?e.getXY(E.iframe).y:0);E.fireEvent("afterinserthtml",B)},200)}};UE.plugins["autotypeset"]=function(){this.setOpt({"autotypeset":{mergeEmptyline:true,removeClass:true,removeEmptyline:false,textAlign:"left",imageBlockLine:"center",pasteFilter:false,clearFontSize:false,clearFontFamily:false,removeEmptyNode:false,removeTagNames:u.extend({div:1},f.$removeEmpty),indent:false,indentValue:"2em",bdc2sb:false,tobdc:false}});var A=this,B=A.options.autotypeset,D={"selectTdClass":1,"pagebreak":1,"anchorclass":1},E={"li":1},G={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},y;if(!B){return}C();function z(I,J){if(!I||I.nodeType==3){return 0}if(e.isBr(I)){return 1}if(I&&I.parentNode&&G[I.tagName.toLowerCase()]){if(y&&y.contains(I)||I.getAttribute("pagebreak")){return 0}return J?!e.isEmptyBlock(I):e.isEmptyBlock(I,new RegExp("[\\s"+e.fillChar+"]","g"))}}function F(I){if(!I.style.cssText){e.removeAttributes(I,["style"]);if(I.tagName.toLowerCase()=="span"&&e.hasNoAttributes(I)){e.remove(I,true)}}}function w(X,K){var O=this,J;if(K){if(!B.pasteFilter){return}J=O.document.createElement("div");J.innerHTML=K.html}else{J=O.document.body}var Q=e.getElementsByTagName(J,"*");for(var L=0,I;I=Q[L++];){if(O.fireEvent("excludeNodeinautotype",I)===true){continue}if(B.clearFontSize&&I.style.fontSize){e.removeStyle(I,"font-size");F(I)}if(B.clearFontFamily&&I.style.fontFamily){e.removeStyle(I,"font-family");F(I)}if(z(I)){if(B.mergeEmptyline){var P=I.nextSibling,W,N=e.isBr(I);while(z(P)){W=P;P=W.nextSibling;if(N&&(!P||P&&!e.isBr(P))){break}e.remove(W)}}if(B.removeEmptyline&&e.inDoc(I,J)&&!E[I.parentNode.tagName.toLowerCase()]){if(e.isBr(I)){P=I.nextSibling;if(P&&!e.isBr(P)){continue}}e.remove(I);continue}}if(z(I,true)&&I.tagName!="SPAN"){if(B.indent){I.style.textIndent=B.indentValue}if(B.textAlign){I.style.textAlign=B.textAlign}}if(B.removeClass&&I.className&&!D[I.className.toLowerCase()]){if(y&&y.contains(I)){continue}e.removeAttributes(I,["class"])}if(B.imageBlockLine&&I.tagName.toLowerCase()=="img"&&!I.getAttribute("emotion")){if(K){var M=I;switch(B.imageBlockLine){case"left":case"right":case"none":var R=M.parentNode,W,T,P;while(f.$inline[R.tagName]||R.tagName=="A"){R=R.parentNode}W=R;if(W.tagName=="P"&&e.getStyle(W,"text-align")=="center"){if(!e.isBody(W)&&e.getChildCount(W,function(Y){return !e.isBr(Y)&&!e.isWhitespace(Y)})==1){T=W.previousSibling;P=W.nextSibling;if(T&&P&&T.nodeType==1&&P.nodeType==1&&T.tagName==P.tagName&&e.isBlockElm(T)){T.appendChild(W.firstChild);while(P.firstChild){T.appendChild(P.firstChild)}e.remove(W);e.remove(P)}else{e.setStyle(W,"text-align","")}}}e.setStyle(M,"float",B.imageBlockLine);break;case"center":if(O.queryCommandValue("imagefloat")!="center"){R=M.parentNode;e.setStyle(M,"float","none");W=M;while(R&&e.getChildCount(R,function(Y){return !e.isBr(Y)&&!e.isWhitespace(Y)})==1&&(f.$inline[R.tagName]||R.tagName=="A")){W=R;R=R.parentNode}var S=O.document.createElement("p");e.setAttributes(S,{style:"text-align:center"});W.parentNode.insertBefore(S,W);S.appendChild(W);e.setStyle(W,"float","")}}}else{var U=O.selection.getRange();U.selectNode(I).select();O.execCommand("imagefloat",B.imageBlockLine)}}if(B.removeEmptyNode){if(B.removeTagNames[I.tagName.toLowerCase()]&&e.hasNoAttributes(I)&&e.isEmptyBlock(I)){e.remove(I)}}}if(B.tobdc){var V=UE.htmlparser(J.innerHTML);V.traversal(function(Y){if(Y.type=="text"){Y.data=H(Y.data)}});J.innerHTML=V.toHtml()}if(B.bdc2sb){var V=UE.htmlparser(J.innerHTML);V.traversal(function(Y){if(Y.type=="text"){Y.data=x(Y.data)}});J.innerHTML=V.toHtml()}if(K){K.html=J.innerHTML}}if(B.pasteFilter){A.addListener("beforepaste",w)}function x(L){var K="";for(var J=0;J<L.length;J++){var I=L.charCodeAt(J);if(I>=65281&&I<=65373){K+=String.fromCharCode(L.charCodeAt(J)-65248)}else{if(I==12288){K+=String.fromCharCode(L.charCodeAt(J)-12288+32)}else{K+=L.charAt(J)}}}return K}function H(L){L=u.html(L);var K="";var J="";for(var I=0;I<L.length;I++){if(L.charCodeAt(I)==32){K=K+String.fromCharCode(12288)}else{if(L.charCodeAt(I)<127){K=K+String.fromCharCode(L.charCodeAt(I)+65248)}else{K+=L.charAt(I)}}}return K}function C(){var I=A.getPreferences("autotypeset");u.extend(A.options.autotypeset,I)}A.commands["autotypeset"]={execCommand:function(){A.removeListener("beforepaste",w);if(B.pasteFilter){A.addListener("beforepaste",w)}w.call(A)}}};UE.plugin.register("autosubmit",function(){return{shortcutkey:{"autosubmit":"ctrl+13"},commands:{"autosubmit":{execCommand:function(){var x=this,w=e.findParentByTagName(x.iframe,"form",false);if(w){if(x.fireEvent("beforesubmit")===false){return}x.sync();w.submit()}}}}}});UE.plugin.register("background",function(){var y=this,w="editor_background",x,A=new RegExp("body[\\s]*\\{(.+)\\}","i");function C(E){var D={},F=E.split(";");u.each(F,function(I){var G=I.indexOf(":"),H=u.trim(I.substr(0,G)).toLowerCase();H&&(D[H]=u.trim(I.substr(G+1)||""))});return D}function B(E){if(E){var F=[];for(var D in E){if(E.hasOwnProperty(D)){F.push(D+":"+E[D]+"; ")}}u.cssRule(w,F.length?("body{"+F.join("")+"}"):"",y.document)}else{u.cssRule(w,"",y.document)}}var z=y.hasContents;y.hasContents=function(){if(y.queryCommandValue("background")){return true}return z.apply(y,arguments)};return{bindEvents:{"getAllHtml":function(J,F){var E=this.body,I=e.getComputedStyle(E,"background-image"),K="";if(I.indexOf(y.options.imagePath)>0){K=I.substring(I.indexOf(y.options.imagePath),I.length-1).replace(/"|\(|\)/ig,"")}else{K=I!="none"?I.replace(/url\("?|"?\)/ig,""):""}var G='<style type="text/css">body{';var D={"background-color":e.getComputedStyle(E,"background-color")||"#ffffff","background-image":K?"url("+K+")":"","background-repeat":e.getComputedStyle(E,"background-repeat")||"","background-position":c.ie?(e.getComputedStyle(E,"background-position-x")+" "+e.getComputedStyle(E,"background-position-y")):e.getComputedStyle(E,"background-position"),"height":e.getComputedStyle(E,"height")};for(var H in D){if(D.hasOwnProperty(H)){G+=H+":"+D[H]+"; "}}G+="}</style> ";F.push(G)},"aftersetcontent":function(){if(x==false){B()}}},inputRule:function(D){x=false;u.each(D.getNodesByTagName("p"),function(E){var F=E.getAttr("data-background");if(F){x=true;B(C(F));E.parentNode.removeChild(E)}})},outputRule:function(E){var D=this,F=(u.cssRule(w,D.document)||"").replace(/[\n\r]+/g,"").match(A);if(F){E.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+u.trim(F[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))}},commands:{"background":{execCommand:function(D,E){B(E)},queryCommandValue:function(){var D=this,E=(u.cssRule(w,D.document)||"").replace(/[\n\r]+/g,"").match(A);return E?C(E[1]):null},notNeedUndo:true}}}});UE.commands["imagefloat"]={execCommand:function(x,w){var z=this,D=z.selection.getRange();if(!D.collapsed){var y=D.getClosedNode();if(y&&y.tagName=="IMG"){switch(w){case"left":case"right":case"none":var B=y.parentNode,E,C,A;while(f.$inline[B.tagName]||B.tagName=="A"){B=B.parentNode}E=B;if(E.tagName=="P"&&e.getStyle(E,"text-align")=="center"){if(!e.isBody(E)&&e.getChildCount(E,function(F){return !e.isBr(F)&&!e.isWhitespace(F)})==1){C=E.previousSibling;A=E.nextSibling;if(C&&A&&C.nodeType==1&&A.nodeType==1&&C.tagName==A.tagName&&e.isBlockElm(C)){C.appendChild(E.firstChild);while(A.firstChild){C.appendChild(A.firstChild)}e.remove(E);e.remove(A)}else{e.setStyle(E,"text-align","")}}D.selectNode(y).select()}e.setStyle(y,"float",w=="none"?"":w);if(w=="none"){e.removeAttributes(y,"align")}break;case"center":if(z.queryCommandValue("imagefloat")!="center"){B=y.parentNode;e.setStyle(y,"float","");e.removeAttributes(y,"align");E=y;while(B&&e.getChildCount(B,function(F){return !e.isBr(F)&&!e.isWhitespace(F)})==1&&(f.$inline[B.tagName]||B.tagName=="A")){E=B;B=B.parentNode}D.setStartBefore(E).setCursor(false);B=z.document.createElement("div");B.appendChild(E);e.setStyle(E,"float","");z.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+B.innerHTML+"</p>");E=z.document.getElementById("_img_parent_tmp");E.removeAttribute("id");E=E.firstChild;D.selectNode(E).select();A=E.parentNode.nextSibling;if(A&&e.isEmptyNode(A)){e.remove(A)}}break}}}},queryCommandValue:function(){var x=this.selection.getRange(),y,w;if(x.collapsed){return"none"}y=x.getClosedNode();if(y&&y.nodeType==1&&y.tagName=="IMG"){w=e.getComputedStyle(y,"float")||y.getAttribute("align");if(w=="none"){w=e.getComputedStyle(y.parentNode,"text-align")=="center"?"center":w}return{left:1,right:1,center:1}[w]?w:"none"}return"none"},queryCommandState:function(){var w=this.selection.getRange(),x;if(w.collapsed){return -1}x=w.getClosedNode();if(x&&x.nodeType==1&&x.tagName=="IMG"){return 0}return -1}};UE.commands["insertimage"]={execCommand:function(x,E){E=u.isArray(E)?E:[E];if(!E.length){return}var D=this,F=D.selection.getRange(),C=F.getClosedNode();if(D.fireEvent("beforeinsertimage",E)===true){return}function H(I){u.each("width,height,border,hspace,vspace".split(","),function(J){if(I[J]){I[J]=parseInt(I[J],10)||0}});u.each("src,_src".split(","),function(J){if(I[J]){I[J]=u.unhtmlForUrl(I[J])}});u.each("title,alt".split(","),function(J){if(I[J]){I[J]=u.unhtml(I[J])}})}if(C&&/img/i.test(C.tagName)&&(C.className!="edui-faked-video"||C.className.indexOf("edui-upload-video")!=-1)&&!C.getAttribute("word_img")){var y=E.shift();var z=y["floatStyle"];delete y["floatStyle"];e.setAttributes(C,y);D.execCommand("imagefloat",z);if(E.length>0){F.setStartAfter(C).setCursor(false,true);D.execCommand("insertimage",E)}}else{var A=[],G="",w;w=E[0];if(E.length==1){H(w);G='<img src="'+w.src+'" '+(w._src?' _src="'+w._src+'" ':"")+(w.width?'width="'+w.width+'" ':"")+(w.height?' height="'+w.height+'" ':"")+(w["floatStyle"]=="left"||w["floatStyle"]=="right"?' style="float:'+w["floatStyle"]+';"':"")+(w.title&&w.title!=""?' title="'+w.title+'"':"")+(w.border&&w.border!="0"?' border="'+w.border+'"':"")+(w.alt&&w.alt!=""?' alt="'+w.alt+'"':"")+(w.hspace&&w.hspace!="0"?' hspace = "'+w.hspace+'"':"")+(w.vspace&&w.vspace!="0"?' vspace = "'+w.vspace+'"':"")+"/>";if(w["floatStyle"]=="center"){G='<p style="text-align: center">'+G+"</p>"}A.push(G)}else{for(var B=0;w=E[B++];){H(w);G="<p "+(w["floatStyle"]=="center"?'style="text-align: center" ':"")+'><img src="'+w.src+'" '+(w.width?'width="'+w.width+'" ':"")+(w._src?' _src="'+w._src+'" ':"")+(w.height?' height="'+w.height+'" ':"")+' style="'+(w["floatStyle"]&&w["floatStyle"]!="center"?"float:"+w["floatStyle"]+";":"")+(w.border||"")+'" '+(w.title?' title="'+w.title+'"':"")+" /></p>";A.push(G)}}D.execCommand("insertHtml",A.join(""))}D.fireEvent("afterinsertimage",E)}};UE.plugins["justify"]=function(){var z=this,w=e.isBlockElm,x={left:1,right:1,center:1,justify:1},y=function(H,I){var A=H.createBookmark(),E=function(L){return L.nodeType==1?L.tagName.toLowerCase()!="br"&&!e.isBookmarkNode(L):!e.isWhitespace(L)};H.enlarge(true);var B=H.createBookmark(),D=e.getNextDomNode(B.start,false,E),K=H.cloneRange(),J;while(D&&!(e.getPosition(D,B.end)&e.POSITION_FOLLOWING)){if(D.nodeType==3||!w(D)){K.setStartBefore(D);while(D&&D!==B.end&&!w(D)){J=D;D=e.getNextDomNode(D,false,null,function(L){return !w(L)})}K.setEndAfter(J);var C=K.getCommonAncestor();if(!e.isBody(C)&&w(C)){e.setStyles(C,u.isString(I)?{"text-align":I}:I);D=C}else{var G=H.document.createElement("p");e.setStyles(G,u.isString(I)?{"text-align":I}:I);var F=K.extractContents();G.appendChild(F);K.insertNode(G);D=G}D=e.getNextDomNode(D,false,E)}else{D=e.getNextDomNode(D,true,E)}}return H.moveToBookmark(B).moveToBookmark(A)};UE.commands["justify"]={execCommand:function(B,A){var C=this.selection.getRange(),D;if(C.collapsed){D=this.document.createTextNode("p");C.insertNode(D)}y(C,A);if(D){C.setStartBefore(D).collapse(true);e.remove(D)}C.select();return true},queryCommandValue:function(){var A=this.selection.getStart(),B=e.getComputedStyle(A,"text-align");return x[B]?B:"left"},queryCommandState:function(){var B=this.selection.getStart(),A=B&&e.findParentByTagName(B,["td","th","caption"],true);return A?-1:0}}};UE.plugins["font"]=function(){var x=this,w={"forecolor":"color","backcolor":"background-color","fontsize":"font-size","fontfamily":"font-family","underline":"text-decoration","strikethrough":"text-decoration","fontborder":"border"},B={"underline":1,"strikethrough":1,"fontborder":1},C={"forecolor":"color","backcolor":"background-color","fontsize":"font-size","fontfamily":"font-family"};x.setOpt({"fontfamily":[{name:"songti",val:",SimSun"},{name:"yahei",val:",Microsoft YaHei"},{name:"kaiti",val:",_GB2312, SimKai"},{name:"heiti",val:", SimHei"},{name:"lishu",val:", SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],"fontsize":[10,11,12,14,16,18,20,24,36]});function A(E){var F;while(F=E.parentNode){if(F.tagName=="SPAN"&&e.getChildCount(F,function(G){return !e.isBookmarkNode(G)&&!e.isBr(G)})==1){F.style.cssText+=E.style.cssText;e.remove(E,true);E=F}else{break}}}function y(G,F,I){if(C[F]){G.adjustmentBoundary();if(!G.collapsed&&G.startContainer.nodeType==1){var H=G.startContainer.childNodes[G.startOffset];if(H&&e.isTagNode(H,"span")){var E=G.createBookmark();u.each(e.getElementsByTagName(H,"span"),function(J){if(!J.parentNode||e.isBookmarkNode(J)){return}if(F=="backcolor"&&e.getComputedStyle(J,"background-color").toLowerCase()===I){return}e.removeStyle(J,C[F]);if(J.style.cssText.replace(/^\s+$/,"").length==0){e.remove(J,true)}});G.moveToBookmark(E)}}}}function z(I,F,J){var G=I.collapsed,E=I.createBookmark(),H;if(G){H=E.start.parentNode;while(f.$inline[H.tagName]){H=H.parentNode}}else{H=e.getCommonAncestor(E.start,E.end)}u.each(e.getElementsByTagName(H,"span"),function(M){if(!M.parentNode||e.isBookmarkNode(M)){return}if(/\s*border\s*:\s*none;?\s*/i.test(M.style.cssText)){if(/^\s*border\s*:\s*none;?\s*$/.test(M.style.cssText)){e.remove(M,true)}else{e.removeStyle(M,"border")}return}if(/border/i.test(M.style.cssText)&&M.parentNode.tagName=="SPAN"&&/border/i.test(M.parentNode.style.cssText)){M.style.cssText=M.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")}if(!(F=="fontborder"&&J=="none")){var K=M.nextSibling;while(K&&K.nodeType==1&&K.tagName=="SPAN"){if(e.isBookmarkNode(K)&&F=="fontborder"){M.appendChild(K);K=M.nextSibling;continue}if(K.style.cssText==M.style.cssText){e.moveChild(K,M);e.remove(K)}if(M.nextSibling===K){break}K=M.nextSibling}}A(M);if(c.ie&&c.version>8){var L=e.findParent(M,function(N){return N.tagName=="SPAN"&&/background-color/.test(N.style.cssText)});if(L&&!/background-color/.test(M.style.cssText)){M.style.backgroundColor=L.style.backgroundColor}}});I.moveToBookmark(E);y(I,F,J)}x.addInputRule(function(E){u.each(E.getNodesByTagName("u s del font strike"),function(G){if(G.tagName=="font"){var F=[];for(var H in G.attrs){switch(H){case"size":F.push("font-size:"+({"1":"10","2":"12","3":"16","4":"18","5":"24","6":"32","7":"48"}[G.attrs[H]]||G.attrs[H])+"px");break;case"color":F.push("color:"+G.attrs[H]);break;case"face":F.push("font-family:"+G.attrs[H]);break;case"style":F.push(G.attrs[H])}}G.attrs={"style":F.join(";")}}else{var I=G.tagName=="u"?"underline":"line-through";G.attrs={"style":(G.getAttr("style")||"")+"text-decoration:"+I+";"}}G.tagName="span"})});for(var D in w){(function(E,F){UE.commands[E]={execCommand:function(G,M){M=M||(this.queryCommandState(G)?"none":G=="underline"?"underline":G=="fontborder"?"1px solid #000":"line-through");var H=this,I=this.selection.getRange(),L;if(M=="default"){if(I.collapsed){L=H.document.createTextNode("font");I.insertNode(L).select()}H.execCommand("removeFormat","span,a",F);if(L){I.setStartBefore(L).collapse(true);e.remove(L)}z(I,G,M);I.select()}else{if(!I.collapsed){if(B[E]&&H.queryCommandValue(E)){H.execCommand("removeFormat","span,a",F)}I=H.selection.getRange();I.applyInlineStyle("span",{"style":F+":"+M});z(I,G,M);I.select()}else{var J=e.findParentByTagName(I.startContainer,"span",true);L=H.document.createTextNode("font");if(J&&!J.children.length&&!J[c.ie?"innerText":"textContent"].replace(h,"").length){I.insertNode(L);if(B[E]){I.selectNode(L).select();H.execCommand("removeFormat","span,a",F,null);J=e.findParentByTagName(L,"span",true);I.setStartBefore(L)}J&&(J.style.cssText+=";"+F+":"+M);I.collapse(true).select()}else{I.insertNode(L);I.selectNode(L).select();J=I.document.createElement("span");if(B[E]){if(e.findParentByTagName(L,"a",true)){I.setStartBefore(L).setCursor();e.remove(L);return}H.execCommand("removeFormat","span,a",F)}J.style.cssText=F+":"+M;L.parentNode.insertBefore(J,L);if(!c.ie||c.ie&&c.version==9){var K=J.parentNode;while(!e.isBlockElm(K)){if(K.tagName=="SPAN"){J.style.cssText=K.style.cssText+";"+J.style.cssText}K=K.parentNode}}if(s){setTimeout(function(){I.setStart(J,0).collapse(true);z(I,G,M);I.select()})}else{I.setStart(J,0).collapse(true);z(I,G,M);I.select()}}e.remove(L)}}return true},queryCommandValue:function(G){var H=this.selection.getStart();if(G=="underline"||G=="strikethrough"){var K=H,M;while(K&&!e.isBlockElm(K)&&!e.isBody(K)){if(K.nodeType==1){M=e.getComputedStyle(K,F);if(M!="none"){return M}}K=K.parentNode}return"none"}if(G=="fontborder"){var J=H,L;while(J&&f.$inline[J.tagName]){if(L=e.getComputedStyle(J,"border")){if(/1px/.test(L)&&/solid/.test(L)){return L}}J=J.parentNode}return""}if(G=="FontSize"){var I=e.getComputedStyle(H,F),J=/^([\d\.]+)(\w+)$/.exec(I);if(J){return Math.floor(J[1])+J[2]}return I}return e.getComputedStyle(H,F)},queryCommandState:function(G){if(!B[G]){return 0}var H=this.queryCommandValue(G);if(G=="fontborder"){return/1px/.test(H)&&/solid/.test(H)}else{return G=="underline"?/underline/.test(H):/line\-through/.test(H)}}}})(D,w[D])}};UE.plugins["link"]=function(){function x(z){var A=z.startContainer,y=z.endContainer;if(A=e.findParentByTagName(A,"a",true)){z.setStartBefore(A)}if(y=e.findParentByTagName(y,"a",true)){z.setEndAfter(y)}}UE.commands["unlink"]={execCommand:function(){var z=this.selection.getRange(),y;if(z.collapsed&&!e.findParentByTagName(z.startContainer,"a",true)){return}y=z.createBookmark();x(z);z.removeInlineStyle("a").moveToBookmark(y).select()},queryCommandState:function(){return !this.highlight&&this.queryCommandValue("link")?0:-1}};function w(C,B,A){var D=C.cloneRange(),z=A.queryCommandValue("link");x(C=C.adjustmentBoundary());var E=C.startContainer;if(E.nodeType==1&&z){E=E.childNodes[C.startOffset];if(E&&E.nodeType==1&&E.tagName=="A"&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(E[c.ie?"innerText":"textContent"])){E[c.ie?"innerText":"textContent"]=u.html(B.textValue||B.href)}}if(!D.collapsed||z){C.removeInlineStyle("a");D=C.cloneRange()}if(D.collapsed){var y=C.document.createElement("a"),F="";if(B.textValue){F=u.html(B.textValue);delete B.textValue}else{F=u.html(B.href)}e.setAttributes(y,B);E=e.findParentByTagName(D.startContainer,"a",true);if(E&&e.isInNodeEndBoundary(D,E)){C.setStartAfter(E).collapse(true)}y[c.ie?"innerText":"textContent"]=F;C.insertNode(y).selectNode(y)}else{C.applyInlineStyle("a",B)}}UE.commands["link"]={execCommand:function(y,z){var A;z._href&&(z._href=u.unhtml(z._href,/[<">]/g));z.href&&(z.href=u.unhtml(z.href,/[<">]/g));z.textValue&&(z.textValue=u.unhtml(z.textValue,/[<">]/g));w(A=this.selection.getRange(),z,this);A.collapse().select(true)},queryCommandValue:function(){var G=this.selection.getRange(),D;if(G.collapsed){D=G.startContainer;D=D.nodeType==1?D:D.parentNode;if(D&&(D=e.findParentByTagName(D,"a",true))&&!e.isInNodeEndBoundary(G,D)){return D}}else{G.shrinkBoundary();var H=G.startContainer.nodeType==3||!G.startContainer.childNodes[G.startOffset]?G.startContainer:G.startContainer.childNodes[G.startOffset],B=G.endContainer.nodeType==3||G.endOffset==0?G.endContainer:G.endContainer.childNodes[G.endOffset-1],A=G.getCommonAncestor();D=e.findParentByTagName(A,"a",true);if(!D&&A.nodeType==1){var y=A.getElementsByTagName("a"),F,E;for(var C=0,z;z=y[C++];){F=e.getPosition(z,H),E=e.getPosition(z,B);if((F&e.POSITION_FOLLOWING||F&e.POSITION_CONTAINS)&&(E&e.POSITION_PRECEDING||E&e.POSITION_CONTAINS)){D=z;break}}}return D}},queryCommandState:function(){var z=this.selection.getRange().getClosedNode(),y=z&&(z.className=="edui-faked-video"||z.className.indexOf("edui-upload-video")!=-1);return y?-1:0}}};UE.plugins["insertframe"]=function(){var x=this;function w(){x._iframe&&delete x._iframe}x.addListener("selectionchange",function(){w()})};UE.commands["scrawl"]={queryCommandState:function(){return(c.ie&&c.version<=8)?-1:0}};UE.plugins["removeformat"]=function(){var w=this;w.setOpt({"removeFormatTags":"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var","removeFormatAttributes":"class,style,lang,width,height,align,hspace,valign"});w.commands["removeformat"]={execCommand:function(z,K,I,x,E){var J=new RegExp("^(?:"+(K||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),H=I?[]:(x||this.options.removeFormatAttributes).split(","),G=new d.Range(this.document),y,D,F,B=function(L){return L.nodeType==1};function C(O){if(O.nodeType==3||O.tagName.toLowerCase()!="span"){return 0}if(c.ie){var L=O.attributes;if(L.length){for(var M=0,N=L.length;M<N;M++){if(L[M].specified){return 0}}return 1}}return !O.attributes.length}function A(S){var M=S.createBookmark();if(S.collapsed){S.enlarge(true)}if(!E){var L=e.findParentByTagName(S.startContainer,"a",true);if(L){S.setStartBefore(L)}L=e.findParentByTagName(S.endContainer,"a",true);if(L){S.setEndAfter(L)}}y=S.createBookmark();Q=y.start;while((F=Q.parentNode)&&!e.isBlockElm(F)){e.breakParent(Q,F);e.clearEmptySibling(Q)}if(y.end){Q=y.end;while((F=Q.parentNode)&&!e.isBlockElm(F)){e.breakParent(Q,F);e.clearEmptySibling(Q)}var O=e.getNextDomNode(y.start,false,B),P;while(O){if(O==y.end){break}P=e.getNextDomNode(O,true,B);if(!f.$empty[O.tagName.toLowerCase()]&&!e.isBookmarkNode(O)){if(J.test(O.tagName)){if(I){e.removeStyle(O,I);if(C(O)&&I!="text-decoration"){e.remove(O,true)}}else{e.remove(O,true)}}else{if(!f.$tableContent[O.tagName]&&!f.$list[O.tagName]){e.removeAttributes(O,H);if(C(O)){e.remove(O,true)}}}}O=P}}var R=y.start.parentNode;if(e.isBlockElm(R)&&!f.$tableContent[R.tagName]&&!f.$list[R.tagName]){e.removeAttributes(R,H)}R=y.end.parentNode;if(y.end&&e.isBlockElm(R)&&!f.$tableContent[R.tagName]&&!f.$list[R.tagName]){e.removeAttributes(R,H)}S.moveToBookmark(y).moveToBookmark(M);var Q=S.startContainer,T,N=S.collapsed;while(Q.nodeType==1&&e.isEmptyNode(Q)&&f.$removeEmpty[Q.tagName]){T=Q.parentNode;S.setStartBefore(Q);if(S.startContainer===S.endContainer){S.endOffset--}e.remove(Q);Q=T}if(!N){Q=S.endContainer;while(Q.nodeType==1&&e.isEmptyNode(Q)&&f.$removeEmpty[Q.tagName]){T=Q.parentNode;S.setEndBefore(Q);e.remove(Q);Q=T}}}G=this.selection.getRange();A(G);G.select()}}};UE.plugins["blockquote"]=function(){var x=this;function w(y){return e.filterNodeList(y.selection.getStartElementPath(),"blockquote")}x.commands["blockquote"]={execCommand:function(F,y){var N=this.selection.getRange(),L=w(this),A=f.blockquote,C=N.createBookmark();if(L){var O=N.startContainer,P=e.isBlockElm(O)?O:e.findParent(O,function(R){return e.isBlockElm(R)}),H=N.endContainer,I=e.isBlockElm(H)?H:e.findParent(H,function(R){return e.isBlockElm(R)});P=e.findParentByTagName(P,"li",true)||P;I=e.findParentByTagName(I,"li",true)||I;if(P.tagName=="LI"||P.tagName=="TD"||P===L||e.isBody(P)){e.remove(L,true)}else{e.breakParent(P,L)}if(P!==I){L=e.findParentByTagName(I,"blockquote");if(L){if(I.tagName=="LI"||I.tagName=="TD"||e.isBody(I)){L.parentNode&&e.remove(L,true)}else{e.breakParent(I,L)}}}var B=e.getElementsByTagName(this.document,"blockquote");for(var J=0,z;z=B[J++];){if(!z.childNodes.length){e.remove(z)}else{if(e.getPosition(z,P)&e.POSITION_FOLLOWING&&e.getPosition(z,I)&e.POSITION_PRECEDING){e.remove(z,true)}}}}else{var Q=N.cloneRange(),K=Q.startContainer.nodeType==1?Q.startContainer:Q.startContainer.parentNode,M=K,G=1;while(1){if(e.isBody(K)){if(M!==K){if(N.collapsed){Q.selectNode(M);G=0}else{Q.setStartBefore(M)}}else{Q.setStart(K,0)}break}if(!A[K.tagName]){if(N.collapsed){Q.selectNode(M)}else{Q.setStartBefore(M)}break}M=K;K=K.parentNode}if(G){M=K=K=Q.endContainer.nodeType==1?Q.endContainer:Q.endContainer.parentNode;while(1){if(e.isBody(K)){if(M!==K){Q.setEndAfter(M)}else{Q.setEnd(K,K.childNodes.length)}break}if(!A[K.tagName]){Q.setEndAfter(M);break}M=K;K=K.parentNode}}K=N.document.createElement("blockquote");e.setAttributes(K,y);K.appendChild(Q.extractContents());Q.insertNode(K);var D=e.getElementsByTagName(K,"blockquote");for(var J=0,E;E=D[J++];){if(E.parentNode){e.remove(E,true)}}}N.moveToBookmark(C).select()},queryCommandState:function(){return w(this)?1:0}}};UE.commands["touppercase"]=UE.commands["tolowercase"]={execCommand:function(y){var B=this;var C=B.selection.getRange();if(C.collapsed){return C}var w=C.createBookmark(),x=w.end,A=function(D){return !e.isBr(D)&&!e.isWhitespace(D)},z=e.getNextDomNode(w.start,false,A);while(z&&(e.getPosition(z,x)&e.POSITION_PRECEDING)){if(z.nodeType==3){z.nodeValue=z.nodeValue[y=="touppercase"?"toUpperCase":"toLowerCase"]()}z=e.getNextDomNode(z,true,A);if(z===x){break}}C.moveToBookmark(w).select()}};UE.commands["indent"]={execCommand:function(){var w=this,x=w.queryCommandState("indent")?"0em":(w.options.indentValue||"2em");w.execCommand("Paragraph","p",{style:"text-indent:"+x})},queryCommandState:function(){var w=e.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return w&&w.style.textIndent&&parseInt(w.style.textIndent)?1:0}};UE.commands["print"]={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands["preview"]={execCommand:function(){var y=window.open("","_blank",""),x=y.document;x.open();x.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+'ueditor.parse.js"></script><script>'+"setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)"+"</script></head><body><div>"+this.getContent(null,null,true)+"</div></body></html>");x.close()},notNeedUndo:1};UE.plugins["selectall"]=function(){var w=this;w.commands["selectall"]={execCommand:function(){var y=this,x=y.body,z=y.selection.getRange();z.selectNodeContents(x);if(e.isEmptyBlock(x)){if(c.opera&&x.firstChild&&x.firstChild.nodeType==1){z.setStartAtFirst(x.firstChild)}z.collapse(true)}z.select(true)},notNeedUndo:1};w.addshortcutkey({"selectAll":"ctrl+65"})};UE.plugins["paragraph"]=function(){var y=this,w=e.isBlockElm,z=["TD","LI","PRE"],x=function(H,J,A,I){var B=H.createBookmark(),E=function(M){return M.nodeType==1?M.tagName.toLowerCase()!="br"&&!e.isBookmarkNode(M):!e.isWhitespace(M)},F;H.enlarge(true);var C=H.createBookmark(),D=e.getNextDomNode(C.start,false,E),L=H.cloneRange(),K;while(D&&!(e.getPosition(D,C.end)&e.POSITION_FOLLOWING)){if(D.nodeType==3||!w(D)){L.setStartBefore(D);while(D&&D!==C.end&&!w(D)){K=D;D=e.getNextDomNode(D,false,null,function(M){return !w(M)})}L.setEndAfter(K);F=H.document.createElement(J);if(A){e.setAttributes(F,A);if(I&&I=="customstyle"&&A.style){F.style.cssText=A.style}}F.appendChild(L.extractContents());if(e.isEmptyNode(F)){e.fillChar(H.document,F)}L.insertNode(F);var G=F.parentNode;if(w(G)&&!e.isBody(F.parentNode)&&u.indexOf(z,G.tagName)==-1){if(!(I&&I=="customstyle")){G.getAttribute("dir")&&F.setAttribute("dir",G.getAttribute("dir"));G.style.cssText&&(F.style.cssText=G.style.cssText+";"+F.style.cssText);G.style.textAlign&&!F.style.textAlign&&(F.style.textAlign=G.style.textAlign);G.style.textIndent&&!F.style.textIndent&&(F.style.textIndent=G.style.textIndent);G.style.padding&&!F.style.padding&&(F.style.padding=G.style.padding)}if(A&&/h\d/i.test(G.tagName)&&!/h\d/i.test(F.tagName)){e.setAttributes(G,A);if(I&&I=="customstyle"&&A.style){G.style.cssText=A.style}e.remove(F,true);F=G}else{e.remove(F.parentNode,true)}}if(u.indexOf(z,G.tagName)!=-1){D=G}else{D=F}D=e.getNextDomNode(D,false,E)}else{D=e.getNextDomNode(D,true,E)}}return H.moveToBookmark(C).moveToBookmark(B)};y.setOpt("paragraph",{"p":"","h1":"","h2":"","h3":"","h4":"","h5":"","h6":""});y.commands["paragraph"]={execCommand:function(C,G,A,F){var E=this.selection.getRange();if(E.collapsed){var H=this.document.createTextNode("p");E.insertNode(H);if(c.ie){var D=H.previousSibling;if(D&&e.isWhitespace(D)){e.remove(D)}D=H.nextSibling;if(D&&e.isWhitespace(D)){e.remove(D)}}}E=x(E,G,A,F);if(H){E.setStartBefore(H).collapse(true);pN=H.parentNode;e.remove(H);if(e.isBlockElm(pN)&&e.isEmptyNode(pN)){e.fillNode(this.document,pN)}}if(c.gecko&&E.collapsed&&E.startContainer.nodeType==1){var B=E.startContainer.childNodes[E.startOffset];if(B&&B.nodeType==1&&B.tagName.toLowerCase()==G){E.setStart(B,0).collapse(true)}}E.select();return true},queryCommandValue:function(){var A=e.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return A?A.tagName.toLowerCase():""}}};(function(){var w=e.isBlockElm,y=function(z){return e.filterNodeList(z.selection.getStartElementPath(),function(A){return A&&A.nodeType==1&&A.getAttribute("dir")})},x=function(J,D,F){var z,E=function(M){return M.nodeType==1?!e.isBookmarkNode(M):!e.isWhitespace(M)},H=y(D);if(H&&J.collapsed){H.setAttribute("dir",F);return J}z=J.createBookmark();J.enlarge(true);var A=J.createBookmark(),C=e.getNextDomNode(A.start,false,E),L=J.cloneRange(),K;while(C&&!(e.getPosition(C,A.end)&e.POSITION_FOLLOWING)){if(C.nodeType==3||!w(C)){L.setStartBefore(C);while(C&&C!==A.end&&!w(C)){K=C;C=e.getNextDomNode(C,false,null,function(M){return !w(M)})}L.setEndAfter(K);var B=L.getCommonAncestor();if(!e.isBody(B)&&w(B)){B.setAttribute("dir",F);C=B}else{var I=J.document.createElement("p");I.setAttribute("dir",F);var G=L.extractContents();I.appendChild(G);L.insertNode(I);C=I}C=e.getNextDomNode(C,false,E)}else{C=e.getNextDomNode(C,true,E)}}return J.moveToBookmark(A).moveToBookmark(z)};UE.commands["directionality"]={execCommand:function(z,A){var B=this.selection.getRange();if(B.collapsed){var C=this.document.createTextNode("d");B.insertNode(C)}x(B,this,A);if(C){B.setStartBefore(C).collapse(true);e.remove(C)}B.select();return true},queryCommandValue:function(){var z=y(this);return z?z.getAttribute("dir"):"ltr"}}})();UE.plugins["horizontal"]=function(){var w=this;w.commands["horizontal"]={execCommand:function(x){var y=this;if(y.queryCommandState(x)!==-1){y.execCommand("insertHtml","<hr>");var z=y.selection.getRange(),A=z.startContainer;if(A.nodeType==1&&!A.childNodes[z.startOffset]){var B;if(B=A.childNodes[z.startOffset-1]){if(B.nodeType==1&&B.tagName=="HR"){if(y.options.enterTag=="p"){B=y.document.createElement("p");z.insertNode(B);z.setStart(B,0).setCursor()}else{B=y.document.createElement("br");z.insertNode(B);z.setStartBefore(B).setCursor()}}}}return true}},queryCommandState:function(){return e.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};w.addListener("delkeydown",function(y,x){var A=this.selection.getRange();A.txtToElmBoundary(true);if(e.isStartInblock(A)){var B=A.startContainer;var z=B.previousSibling;if(z&&e.isTagNode(z,"hr")){e.remove(z);A.select();e.preventDefault(x);return true}}})};UE.commands["time"]=UE.commands["date"]={execCommand:function(w,y){var x=new Date;function A(B,C){var D=("0"+B.getHours()).slice(-2),E=("0"+B.getMinutes()).slice(-2),F=("0"+B.getSeconds()).slice(-2);C=C||"hh:ii:ss";return C.replace(/hh/ig,D).replace(/ii/ig,E).replace(/ss/ig,F)}function z(B,D){var G=("000"+B.getFullYear()).slice(-4),F=G.slice(-2),E=("0"+(B.getMonth()+1)).slice(-2),C=("0"+B.getDate()).slice(-2);D=D||"yyyy-mm-dd";return D.replace(/yyyy/ig,G).replace(/yy/ig,F).replace(/mm/ig,E).replace(/dd/ig,C)}this.execCommand("insertHtml",w=="time"?A(x,y):z(x,y))}};UE.plugins["rowspacing"]=function(){var w=this;w.setOpt({"rowspacingtop":["5","10","15","20","25"],"rowspacingbottom":["5","10","15","20","25"]});w.commands["rowspacing"]={execCommand:function(x,z,y){this.execCommand("paragraph","p",{style:"margin-"+y+":"+z+"px"});return true},queryCommandValue:function(x,y){var z=e.filterNodeList(this.selection.getStartElementPath(),function(B){return e.isBlockElm(B)}),A;if(z){A=e.getComputedStyle(z,"margin-"+y).replace(/[^\d]/g,"");return !A?0:A}return 0}}};UE.plugins["lineheight"]=function(){var w=this;w.setOpt({"lineheight":["1","1.5","1.75","2","3","4","5"]});w.commands["lineheight"]={execCommand:function(x,y){this.execCommand("paragraph","p",{style:"line-height:"+(y=="1"?"normal":y+"em")});return true},queryCommandValue:function(){var x=e.filterNodeList(this.selection.getStartElementPath(),function(z){return e.isBlockElm(z)});if(x){var y=e.getComputedStyle(x,"line-height");return y=="normal"?1:y.replace(/[^\d.]*/ig,"")}}}};UE.plugins["insertcode"]=function(){var w=this;w.ready(function(){u.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",w.document)});w.setOpt("insertcode",{"as3":"ActionScript3","bash":"Bash/Shell","cpp":"C/C++","css":"Css","cf":"CodeFunction","c#":"C#","delphi":"Delphi","diff":"Diff","erlang":"Erlang","groovy":"Groovy","html":"Html","java":"Java","jfx":"JavaFx","js":"Javascript","pl":"Perl","php":"Php","plain":"Plain Text","ps":"PowerShell","python":"Python","ruby":"Ruby","scala":"Scala","sql":"Sql","vb":"Vb","xml":"Xml"});w.commands["insertcode"]={execCommand:function(y,C){var D=this,F=D.selection.getRange(),E=e.findParentByTagName(F.startContainer,"pre",true);if(E){E.className="brush:"+C+";toolbar:false;"}else{var z="";if(F.collapsed){z=c.ie&&c.ie11below?(c.version<=8?"&nbsp;":""):"<br/>"}else{var B=F.extractContents();var A=D.document.createElement("div");A.appendChild(B);u.each(UE.filterNode(UE.htmlparser(A.innerHTML.replace(/[\r\t]/g,"")),D.options.filterTxtRules).children,function(H){if(c.ie&&c.ie11below&&c.version>8){if(H.type=="element"){if(H.tagName=="br"){z+="\n"}else{if(!f.$empty[H.tagName]){u.each(H.children,function(I){if(I.type=="element"){if(I.tagName=="br"){z+="\n"}else{if(!f.$empty[H.tagName]){z+=I.innerText()}}}else{z+=I.data}});if(!/\n$/.test(z)){z+="\n"}}}}else{z+=H.data+"\n"}if(!H.nextSibling()&&/\n$/.test(z)){z=z.replace(/\n$/,"")}}else{if(c.ie&&c.ie11below){if(H.type=="element"){if(H.tagName=="br"){z+="<br>"}else{if(!f.$empty[H.tagName]){u.each(H.children,function(I){if(I.type=="element"){if(I.tagName=="br"){z+="<br>"}else{if(!f.$empty[H.tagName]){z+=I.innerText()}}}else{z+=I.data}});if(!/br>$/.test(z)){z+="<br>"}}}}else{z+=H.data+"<br>"}if(!H.nextSibling()&&/<br>$/.test(z)){z=z.replace(/<br>$/,"")}}else{z+=(H.type=="element"?(f.$empty[H.tagName]?"":H.innerText()):H.data);if(!/br\/?\s*>$/.test(z)){if(!H.nextSibling()){return}z+="<br>"}}}})}D.execCommand("inserthtml",'<pre id="coder"class="brush:'+C+';toolbar:false">'+z+"</pre>",true);E=D.document.getElementById("coder");e.removeAttributes(E,"id");var G=E.previousSibling;if(G&&(G.nodeType==3&&G.nodeValue.length==1&&c.ie&&c.version==6||e.isEmptyBlock(G))){e.remove(G)}var F=D.selection.getRange();if(e.isEmptyBlock(E)){F.setStart(E,0).setCursor(false,true)}else{F.selectNodeContents(E).select()}}},queryCommandValue:function(){var z=this.selection.getStartElementPath();var y="";u.each(z,function(B){if(B.nodeName=="PRE"){var A=B.className.match(/brush:([^;]+)/);y=A&&A[1]?A[1]:"";return false}});return y}};w.addInputRule(function(y){u.each(y.getNodesByTagName("pre"),function(B){var z=B.getNodesByTagName("br");if(z.length){c.ie&&c.ie11below&&c.version>8&&u.each(z,function(C){var D=UE.uNode.createText("\n");C.parentNode.insertBefore(D,C);C.parentNode.removeChild(C)});return}if(c.ie&&c.ie11below&&c.version>8){return}var A=B.innerText().split(/\n/);B.innerHTML("");u.each(A,function(C){if(C.length){B.appendChild(UE.uNode.createText(C))}B.appendChild(UE.uNode.createElement("br"))})})});w.addOutputRule(function(y){u.each(y.getNodesByTagName("pre"),function(A){var z="";u.each(A.children,function(B){if(B.type=="text"){z+=B.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,"")}else{if(B.tagName=="br"){z+="\n"}else{z+=(!f.$empty[B.tagName]?"":B.innerText())}}});A.innerText(z.replace(/(&nbsp;|\n)+$/,""))})});w.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};var x=w.queryCommandState;w.queryCommandState=function(y){var z=this;if(!z.notNeedCodeQuery[y.toLowerCase()]&&z.selection&&z.queryCommandValue("insertcode")){return -1}return UE.Editor.prototype.queryCommandState.apply(this,arguments)};w.addListener("beforeenterkeydown",function(){var D=w.selection.getRange();var B=e.findParentByTagName(D.startContainer,"pre",true);if(B){w.fireEvent("saveScene");if(!D.collapsed){D.deleteContents()}if(!c.ie||c.ie9above){var H=w.document.createElement("br"),B;D.insertNode(H).setStartAfter(H).collapse(true);var A=H.nextSibling;if(!A&&(!c.ie||c.version>10)){D.insertNode(H.cloneNode(false))}else{D.setStartAfter(H)}B=H.previousSibling;var G;while(B){G=B;B=B.previousSibling;if(!B||B.nodeName=="BR"){B=G;break}}if(B){var F="";while(B&&B.nodeName!="BR"&&new RegExp("^[\\s"+e.fillChar+"]*$").test(B.nodeValue)){F+=B.nodeValue;B=B.nextSibling}if(B.nodeName!="BR"){var z=B.nodeValue.match(new RegExp("^([\\s"+e.fillChar+"]+)"));if(z&&z[1]){F+=z[1]}}if(F){F=w.document.createTextNode(F);D.insertNode(F).setStartAfter(F)}}D.collapse(true).select(true)}else{if(c.version>8){var I=w.document.createTextNode("\n");var E=D.startContainer;if(D.startOffset==0){var C=E.previousSibling;if(C){D.insertNode(I);var y=w.document.createTextNode(" ");D.setStartAfter(I).insertNode(y).setStart(y,0).collapse(true).select(true)}}else{D.insertNode(I).setStartAfter(I);var y=w.document.createTextNode(" ");E=D.startContainer.childNodes[D.startOffset];if(E&&!/^\n/.test(E.nodeValue)){D.setStartBefore(I)}D.insertNode(y).setStart(y,0).collapse(true).select(true)}}else{var H=w.document.createElement("br");D.insertNode(H);D.insertNode(w.document.createTextNode(e.fillChar));D.setStartAfter(H);B=H.previousSibling;var G;while(B){G=B;B=B.previousSibling;if(!B||B.nodeName=="BR"){B=G;break}}if(B){var F="";while(B&&B.nodeName!="BR"&&new RegExp("^[ "+e.fillChar+"]*$").test(B.nodeValue)){F+=B.nodeValue;B=B.nextSibling}if(B.nodeName!="BR"){var z=B.nodeValue.match(new RegExp("^([ "+e.fillChar+"]+)"));if(z&&z[1]){F+=z[1]}}F=w.document.createTextNode(F);D.insertNode(F).setStartAfter(F)}D.collapse(true).select()}}w.fireEvent("saveScene");return true}});w.addListener("tabkeydown",function(z,B){var D=w.selection.getRange();var C=e.findParentByTagName(D.startContainer,"pre",true);if(C){w.fireEvent("saveScene");if(B.shiftKey){}else{if(!D.collapsed){var y=D.createBookmark();var E=y.start.previousSibling;while(E){if(C.firstChild===E&&!e.isBr(E)){C.insertBefore(w.document.createTextNode("    "),E);break}if(e.isBr(E)){C.insertBefore(w.document.createTextNode("    "),E.nextSibling);break}E=E.previousSibling}var A=y.end;E=y.start.nextSibling;if(C.firstChild===y.start){C.insertBefore(w.document.createTextNode("    "),E.nextSibling)}while(E&&E!==A){if(e.isBr(E)&&E.nextSibling){if(E.nextSibling===A){break}C.insertBefore(w.document.createTextNode("    "),E.nextSibling)}E=E.nextSibling}D.moveToBookmark(y).select()}else{var F=w.document.createTextNode("    ");D.insertNode(F).setStartAfter(F).collapse(true).select(true)}}w.fireEvent("saveScene");return true}});w.addListener("beforeinserthtml",function(y,A){var C=this,E=C.selection.getRange(),D=e.findParentByTagName(E.startContainer,"pre",true);if(D){if(!E.collapsed){E.deleteContents()}var B="";if(c.ie&&c.version>8){u.each(UE.filterNode(UE.htmlparser(A),C.options.filterTxtRules).children,function(G){if(G.type=="element"){if(G.tagName=="br"){B+="\n"}else{if(!f.$empty[G.tagName]){u.each(G.children,function(H){if(H.type=="element"){if(H.tagName=="br"){B+="\n"}else{if(!f.$empty[G.tagName]){B+=H.innerText()}}}else{B+=H.data}});if(!/\n$/.test(B)){B+="\n"}}}}else{B+=G.data+"\n"}if(!G.nextSibling()&&/\n$/.test(B)){B=B.replace(/\n$/,"")}});var F=C.document.createTextNode(u.html(B.replace(/&nbsp;/g," ")));E.insertNode(F).selectNode(F).select()}else{var z=C.document.createDocumentFragment();u.each(UE.filterNode(UE.htmlparser(A),C.options.filterTxtRules).children,function(G){if(G.type=="element"){if(G.tagName=="br"){z.appendChild(C.document.createElement("br"))}else{if(!f.$empty[G.tagName]){u.each(G.children,function(H){if(H.type=="element"){if(H.tagName=="br"){z.appendChild(C.document.createElement("br"))}else{if(!f.$empty[G.tagName]){z.appendChild(C.document.createTextNode(u.html(H.innerText().replace(/&nbsp;/g," "))))}}}else{z.appendChild(C.document.createTextNode(u.html(H.data.replace(/&nbsp;/g," "))))}});if(z.lastChild.nodeName!="BR"){z.appendChild(C.document.createElement("br"))}}}}else{z.appendChild(C.document.createTextNode(u.html(G.data.replace(/&nbsp;/g," "))))}if(!G.nextSibling()&&z.lastChild.nodeName=="BR"){z.removeChild(z.lastChild)}});E.insertNode(z).select()}return true}});w.addListener("keydown",function(y,z){var C=this,A=z.keyCode||z.which;if(A==40){var E=C.selection.getRange(),D,F=E.startContainer;if(E.collapsed&&(D=e.findParentByTagName(E.startContainer,"pre",true))&&!D.nextSibling){var B=D.lastChild;while(B&&B.nodeName=="BR"){B=B.previousSibling}if(B===F||E.startContainer===D&&E.startOffset==D.childNodes.length){C.execCommand("insertparagraph");e.preventDefault(z)}}}});w.addListener("delkeydown",function(C,y){var A=this.selection.getRange();A.txtToElmBoundary(true);var B=A.startContainer;if(e.isTagNode(B,"pre")&&A.collapsed&&e.isStartInblock(A)){var z=w.document.createElement("p");e.fillNode(w.document,z);B.parentNode.insertBefore(z,B);e.remove(B);A.setStart(z,0).setCursor(false,true);e.preventDefault(y);return true}})};UE.commands["cleardoc"]={execCommand:function(w){var y=this,x=y.options.enterTag,z=y.selection.getRange();if(x=="br"){y.body.innerHTML="<br/>";z.setStart(y.body,0).setCursor()}else{y.body.innerHTML="<p>"+(p?"":"<br/>")+"</p>";z.setStart(y.body.firstChild,0).setCursor(false,true)}setTimeout(function(){y.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{"ready":function(){u.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(w){u.each(w.getNodesByTagName("img"),function(x){var y;if(y=x.getAttr("anchorname")){x.tagName="a";x.setAttr({anchorname:"",name:y,"class":""})}})},inputRule:function(w){u.each(w.getNodesByTagName("a"),function(x){var y;if((y=x.getAttr("name"))&&!x.getAttr("href")){x.tagName="img";x.setAttr({anchorname:x.getAttr("name"),"class":"anchorclass"});x.setAttr("name")}})},commands:{"anchor":{execCommand:function(x,z){var A=this.selection.getRange(),y=A.getClosedNode();if(y&&y.getAttribute("anchorname")){if(z){y.setAttribute("anchorname",z)}else{A.setStartBefore(y).setCursor();e.remove(y)}}else{if(z){var w=this.document.createElement("img");A.collapse(true);e.setAttributes(w,{"anchorname":z,"class":"anchorclass"});A.insertNode(w).setStartAfter(w).setCursor(false,true)}}}}}}});UE.plugins["wordcount"]=function(){var w=this;w.setOpt("wordCount",true);w.addListener("contentchange",function(){w.fireEvent("wordcount")});var x;w.addListener("ready",function(){var y=this;e.on(y.body,"keyup",function(A){var z=A.keyCode||A.which,B={"16":1,"18":1,"20":1,"37":1,"38":1,"39":1,"40":1};if(z in B){return}clearTimeout(x);x=setTimeout(function(){y.fireEvent("wordcount")},200)})})};UE.plugins["pagebreak"]=function(){var y=this,z=["td"];y.setOpt("pageBreakTag","_ueditor_page_break_tag_");function w(B){if(e.isEmptyBlock(B)){var A=B.firstChild,C;while(A&&A.nodeType==1&&e.isEmptyBlock(A)){C=A;A=A.firstChild}!C&&(C=B);e.fillNode(y.document,C)}}y.ready(function(){u.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",y.document)});function x(A){return A&&A.nodeType==1&&A.tagName=="HR"&&A.className=="pagebreak"}y.addInputRule(function(A){A.traversal(function(C){if(C.type=="text"&&C.data==y.options.pageBreakTag){var B=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');C.parentNode.insertBefore(B,C);C.parentNode.removeChild(C)}})});y.addOutputRule(function(A){u.each(A.getNodesByTagName("hr"),function(B){if(B.getAttr("class")=="pagebreak"){var C=UE.uNode.createText(y.options.pageBreakTag);B.parentNode.insertBefore(C,B);B.parentNode.removeChild(B)}})});y.commands["pagebreak"]={execCommand:function(){var H=y.selection.getRange(),A=y.document.createElement("hr");e.setAttributes(A,{"class":"pagebreak",noshade:"noshade",size:"5"});e.unSelectable(A);var C=e.findParentByTagName(H.startContainer,z,true),E=[],F;if(C){switch(C.tagName){case"TD":F=C.parentNode;if(!F.previousSibling){var J=e.findParentByTagName(F,"table");J.parentNode.insertBefore(A,J);E=e.findParents(A,true)}else{F.parentNode.insertBefore(A,F);E=e.findParents(A)}F=E[1];if(A!==F){e.breakParent(A,F)}y.fireEvent("afteradjusttable",y.document)}}else{if(!H.collapsed){H.deleteContents();var I=H.startContainer;while(!e.isBody(I)&&e.isBlockElm(I)&&e.isEmptyNode(I)){H.setStartBefore(I).collapse(true);e.remove(I);I=H.startContainer}}H.insertNode(A);var F=A.parentNode,B;while(!e.isBody(F)){e.breakParent(A,F);B=A.nextSibling;if(B&&e.isEmptyBlock(B)){e.remove(B)}F=A.parentNode}B=A.nextSibling;var G=A.previousSibling;if(x(G)){e.remove(G)}else{G&&w(G)}if(!B){var D=y.document.createElement("p");A.parentNode.appendChild(D);e.fillNode(y.document,D);H.setStart(D,0).collapse(true)}else{if(x(B)){e.remove(B)}else{w(B)}H.setEndAfter(A).collapse(false)}H.select(true)}}}};UE.plugin.register("wordimage",function(){var x=this,w=[];return{commands:{"wordimage":{execCommand:function(){var A=e.getElementsByTagName(x.body,"img");var C=[];for(var z=0,y;y=A[z++];){var B=y.getAttribute("word_img");B&&C.push(B)}return C},queryCommandState:function(){w=e.getElementsByTagName(x.body,"img");for(var z=0,y;y=w[z++];){if(y.getAttribute("word_img")){return 1}}return -1},notNeedUndo:true}},inputRule:function(y){u.each(y.getNodesByTagName("img"),function(B){var z=B.attrs,A=parseInt(z.width)<128||parseInt(z.height)<43,C=x.options,D=C.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";if(z["src"]&&/^(?:(file:\/+))/.test(z["src"])){B.setAttr({width:z.width,height:z.height,alt:z.alt,word_img:z.src,src:D,"style":"background:url("+(A?C.themePath+C.theme+"/images/word.gif":C.langPath+C.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})}})}}});UE.plugins["dragdrop"]=function(){var w=this;w.ready(function(){e.on(this.body,"dragend",function(){var A=w.selection.getRange();var y=A.getClosedNode()||w.selection.getStart();if(y&&y.tagName=="IMG"){var z=y.previousSibling,x;while(x=y.nextSibling){if(x.nodeType==1&&x.tagName=="SPAN"&&!x.firstChild){e.remove(x)}else{break}}if((z&&z.nodeType==1&&!e.isEmptyBlock(z)||!z)&&(!x||x&&!e.isEmptyBlock(x))){if(z&&z.tagName=="P"&&!e.isEmptyBlock(z)){z.appendChild(y);e.moveChild(x,z);e.remove(x)}else{if(x&&x.tagName=="P"&&!e.isEmptyBlock(x)){x.insertBefore(y,x.firstChild)}}if(z&&z.tagName=="P"&&e.isEmptyBlock(z)){e.remove(z)}if(x&&x.tagName=="P"&&e.isEmptyBlock(x)){e.remove(x)}A.selectNode(y).select();w.fireEvent("saveScene")}}})});w.addListener("keyup",function(B,x){var y=x.keyCode||x.which;if(y==13){var A=w.selection.getRange(),z;if(z=e.findParentByTagName(A.startContainer,"p",true)){if(e.getComputedStyle(z,"text-align")=="center"){e.removeStyle(z,"text-align")}}}})};UE.plugins["undo"]=function(){var K;var G=this,F=G.options.maxUndoCount||20,E=G.options.maxInputCount||20,y=new RegExp(e.fillChar+"|</hr>","gi");var H={ol:1,ul:1,table:1,tbody:1,tr:1,body:1};var I=G.options.autoClearEmptyNode;function w(N,O){if(N.length!=O.length){return 0}for(var M=0,P=N.length;M<P;M++){if(N[M]!=O[M]){return 0}}return 1}function x(M,N){if(M.collapsed!=N.collapsed){return 0}if(!w(M.startAddress,N.startAddress)||!w(M.endAddress,N.endAddress)){return 0}return 1}function L(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var N=this.editor;var Q=this.list[this.index];var P=UE.htmlparser(Q.content.replace(y,""));N.options.autoClearEmptyNode=false;N.filterInputRule(P);N.options.autoClearEmptyNode=I;N.document.body.innerHTML=P.toHtml();N.fireEvent("afterscencerestore");if(c.ie){u.each(e.getElementsByTagName(N.document,"td th caption p"),function(R){if(e.isEmptyNode(R)){e.fillNode(N.document,R)}})}try{var O=new d.Range(N.document).moveToAddress(Q.address);O.select(H[O.startContainer.nodeName.toLowerCase()])}catch(M){}this.update();this.clearKey();N.fireEvent("reset",true)};this.getScene=function(){var N=this.editor;var O=N.selection.getRange(),P=O.createAddress(false,true);N.fireEvent("beforegetscene");var Q=UE.htmlparser(N.body.innerHTML);N.options.autoClearEmptyNode=false;N.filterOutputRule(Q);N.options.autoClearEmptyNode=I;var M=Q.toHtml();N.fireEvent("aftergetscene");return{address:P,content:M}};this.save=function(O,P){clearTimeout(K);var M=this.getScene(P),N=this.list[this.index];if(N&&N.content!=M.content){G.trigger("contentchange")}if(N&&N.content==M.content&&(O?1:x(N.address,M.address))){return}this.list=this.list.slice(0,this.index+1);this.list.push(M);if(this.list.length>F){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=!!this.list[this.index+1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){B=0;D=null}}G.undoManger=new L();G.undoManger.editor=G;function J(){this.undoManger.save()}G.addListener("saveScene",function(){var M=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,M)});G.addListener("reset",function(N,M){if(!M){this.undoManger.reset()}});G.commands["redo"]=G.commands["undo"]={execCommand:function(M){this.undoManger[M]()},queryCommandState:function(M){return this.undoManger["has"+(M.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var C={16:1,17:1,18:1,37:1,38:1,39:1,40:1},B=0,D;var z=false;G.addListener("ready",function(){e.on(this.body,"compositionstart",function(){z=true});e.on(this.body,"compositionend",function(){z=false})});G.addshortcutkey({"Undo":"ctrl+90","Redo":"ctrl+89"});var A=true;G.addListener("keydown",function(Q,M){var O=this;var N=M.keyCode||M.which;if(!C[N]&&!M.ctrlKey&&!M.metaKey&&!M.shiftKey&&!M.altKey){if(z){return}if(!O.selection.getRange().collapsed){O.undoManger.save(false,true);A=false;return}if(O.undoManger.list.length==0){O.undoManger.save(true)}clearTimeout(K);function P(R){R.undoManger.save(false,true);R.fireEvent("selectionchange")}K=setTimeout(function(){if(z){var R=setInterval(function(){if(!z){P(O);clearInterval(R)}},300);return}P(O)},200);D=N;B++;if(B>=E){P(O)}}});G.addListener("keyup",function(O,M){var N=M.keyCode||M.which;if(!C[N]&&!M.ctrlKey&&!M.metaKey&&!M.shiftKey&&!M.altKey){if(z){return}if(!A){this.undoManger.save(false,true);A=true}}});G.stopCmdUndo=function(){G.__hasEnterExecCommand=true};G.startCmdUndo=function(){G.__hasEnterExecCommand=false}};UE.plugin.register("copy",function(){var x=this;function w(){ZeroClipboard.config({debug:false,swfPath:x.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var y=x.zeroclipboard=new ZeroClipboard();y.on("copy",function(B){var z=B.client,C=x.selection.getRange(),A=document.createElement("div");A.appendChild(C.cloneContents());z.setText(A.innerText||A.textContent);z.setHtml(A.innerHTML);C.select()});y.on("mouseover mouseout",function(z){var A=z.target;if(z.type=="mouseover"){e.addClass(A,"edui-state-hover")}else{if(z.type=="mouseout"){e.removeClasses(A,"edui-state-hover")}}});y.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}return{bindEvents:{"ready":function(){if(!c.ie){if(window.ZeroClipboard){w()}else{u.loadFile(document,{src:x.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){w()})}}}},commands:{"copy":{execCommand:function(y){if(!x.document.execCommand("copy")){alert(x.getLang("copymsg"))}}}}}});UE.plugins["paste"]=function(){function y(E){var F=this.document;if(F.getElementById("baidu_pastebin")){return}var H=this.selection.getRange(),D=H.createBookmark(),G=F.createElement("div");G.id="baidu_pastebin";c.webkit&&G.appendChild(F.createTextNode(e.fillChar+e.fillChar));F.body.appendChild(G);D.start.style.display="";G.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+e.getXY(D.start).y+"px";H.selectNodeContents(G).select(true);setTimeout(function(){if(c.webkit){for(var J=0,K=F.querySelectorAll("#baidu_pastebin"),L;L=K[J++];){if(e.isEmptyNode(L)){e.remove(L)}else{G=L;break}}}try{G.parentNode.removeChild(G)}catch(I){}H.moveToBookmark(D).select(true);E(G)},0)}var B=this;B.setOpt({retainOnlyLabelPasted:false});var C,A,w;function z(D){return D.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(E,G,H,F){H=H.toLowerCase();if({img:1}[H]){return E}F=F.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(J,I,K){if({"src":1,"href":1,"name":1}[I.toLowerCase()]){return I+"="+K+" "}return""});if({"span":1,"div":1}[H]){return""}else{return"<"+G+H+" "+u.trim(F)+">"}})}function x(J){var L;if(J.firstChild){var P=e.getElementsByTagName(J,"span");for(var M=0,O;O=P[M++];){if(O.id=="_baidu_cut_start"||O.id=="_baidu_cut_end"){e.remove(O)}}if(c.webkit){var F=J.querySelectorAll("div br");for(var M=0,D;D=F[M++];){var Q=D.parentNode;if(Q.tagName=="DIV"&&Q.childNodes.length==1){Q.innerHTML="<p><br/></p>";e.remove(Q)}}var K=J.querySelectorAll("#baidu_pastebin");for(var M=0,H;H=K[M++];){var T=B.document.createElement("p");H.parentNode.insertBefore(T,H);while(H.firstChild){T.appendChild(H.firstChild)}e.remove(H)}var N=J.querySelectorAll("meta");for(var M=0,G;G=N[M++];){e.remove(G)}var F=J.querySelectorAll("br");for(M=0;G=F[M++];){if(/^apple-/i.test(G.className)){e.remove(G)}}}if(c.gecko){var I=J.querySelectorAll("[_moz_dirty]");for(M=0;G=I[M++];){G.removeAttribute("_moz_dirty")}}if(!c.ie){var S=J.querySelectorAll("span.Apple-style-span");for(var M=0,G;G=S[M++];){e.remove(G,true)}}L=J.innerHTML;L=UE.filterWord(L);var R=UE.htmlparser(L);if(B.options.filterRules){UE.filterNode(R,B.options.filterRules)}B.filterInputRule(R);if(c.webkit){var E=R.lastChild();if(E&&E.type=="element"&&E.tagName=="br"){R.removeChild(E)}u.each(B.body.querySelectorAll("div"),function(U){if(e.isEmptyBlock(U)){e.remove(U,true)}})}L={"html":R.toHtml()};B.fireEvent("beforepaste",L,R);if(!L.html){return}R=UE.htmlparser(L.html,true);if(B.queryCommandState("pasteplain")===1){B.execCommand("insertHtml",UE.filterNode(R,B.options.filterTxtRules).toHtml(),true)}else{UE.filterNode(R,B.options.filterTxtRules);C=R.toHtml();A=L.html;w=B.selection.getRange().createAddress(true);B.execCommand("insertHtml",B.getOpt("retainOnlyLabelPasted")===true?z(A):A,true)}B.fireEvent("afterpaste",L)}}B.addListener("pasteTransfer",function(D,H){if(w&&C&&A&&C!=A){var J=B.selection.getRange();J.moveToAddress(w,true);if(!J.collapsed){while(!e.isBody(J.startContainer)){var L=J.startContainer;if(L.nodeType==1){L=L.childNodes[J.startOffset];if(!L){J.setStartBefore(J.startContainer);continue}var I=L.previousSibling;if(I&&I.nodeType==3&&new RegExp("^[\n\r\t "+e.fillChar+"]*$").test(I.nodeValue)){J.setStartBefore(I)}}if(J.startOffset==0){J.setStartBefore(J.startContainer)}else{break}}while(!e.isBody(J.endContainer)){var E=J.endContainer;if(E.nodeType==1){E=E.childNodes[J.endOffset];if(!E){J.setEndAfter(J.endContainer);continue}var G=E.nextSibling;if(G&&G.nodeType==3&&new RegExp("^[\n\r\t"+e.fillChar+"]*$").test(G.nodeValue)){J.setEndAfter(G)}}if(J.endOffset==J.endContainer[J.endContainer.nodeType==3?"nodeValue":"childNodes"].length){J.setEndAfter(J.endContainer)}else{break}}}J.deleteContents();J.select(true);B.__hasEnterExecCommand=true;var F=A;if(H===2){F=z(F)}else{if(H){F=C}}B.execCommand("inserthtml",F,true);B.__hasEnterExecCommand=false;var K=B.selection.getRange();while(!e.isBody(K.startContainer)&&!K.startOffset&&K.startContainer[K.startContainer.nodeType==3?"nodeValue":"childNodes"].length){K.setStartBefore(K.startContainer)}var M=K.createAddress(true);w.endAddress=M.startAddress}});B.addListener("ready",function(){e.on(B.body,"cut",function(){var D=B.selection.getRange();if(!D.collapsed&&B.undoManger){B.undoManger.save()}});e.on(B.body,c.ie||c.opera?"keydown":"paste",function(D){if((c.ie||c.opera)&&((!D.ctrlKey&&!D.metaKey)||D.keyCode!="86")){return}y.call(B,function(E){x(E)})})});B.commands["paste"]={execCommand:function(D){if(c.ie){y.call(B,function(E){x(E)});B.document.execCommand("paste")}else{alert(B.getLang("pastemsg"))}}}};UE.plugins["pasteplain"]=function(){var w=this;w.setOpt({"pasteplain":false,"filterTxtRules":function(){function z(A){A.tagName="p";A.setStyle()}function y(A){A.parentNode.removeChild(A,true)}return{"-":"script style object iframe embed input select","p":{$:{}},"br":{$:{}},div:function(A){var C,B=UE.uNode.createElement("p");while(C=A.firstChild()){if(C.type=="text"||!UE.dom.dtd.$block[C.tagName]){B.appendChild(C)}else{if(B.firstChild()){A.parentNode.insertBefore(B,A);B=UE.uNode.createElement("p")}else{A.parentNode.insertBefore(C,A)}}}if(B.firstChild()){A.parentNode.insertBefore(B,A)}A.parentNode.removeChild(A)},ol:y,ul:y,dl:y,dt:y,dd:y,"li":y,"caption":z,"th":z,"tr":z,"h1":z,"h2":z,"h3":z,"h4":z,"h5":z,"h6":z,"td":function(A){var B=!!A.innerText();if(B){A.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),A)}A.parentNode.removeChild(A,A.innerText())}}}()});var x=w.options.pasteplain;w.commands["pasteplain"]={queryCommandState:function(){return x?1:0},execCommand:function(){x=!x|0},notNeedUndo:1}};UE.plugins["list"]=function(){var F=this,G={"TD":1,"PRE":1,"BLOCKQUOTE":1};var z={"cn":"cn-1-","cn1":"cn-2-","cn2":"cn-3-","num":"num-1-","num1":"num-2-","num2":"num-3-","dash":"dash","dot":"dot"};F.setOpt({"autoTransWordToList":false,"insertorderedlist":{"num":"","num1":"","num2":"","cn":"","cn1":"","cn2":"","decimal":"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},"insertunorderedlist":{"circle":"","disc":"","square":"","dash":"","dot":""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:false});function E(K){var J=[];for(var L in K){J.push(L)}return J}var D={"OL":E(F.options.insertorderedlist),"UL":E(F.options.insertunorderedlist)};var C=F.options.listiconpath;for(var H in z){if(!F.options.insertorderedlist.hasOwnProperty(H)&&!F.options.insertunorderedlist.hasOwnProperty(H)){delete z[H]}}F.ready(function(){var J=[];for(var L in z){if(L=="dash"||L=="dot"){J.push("li.list-"+z[L]+"{background-image:url("+C+z[L]+".gif)}");J.push("ul.custom_"+L+"{list-style:none;}ul.custom_"+L+" li{background-position:0 3px;background-repeat:no-repeat}")}else{for(var K=0;K<99;K++){J.push("li.list-"+z[L]+K+"{background-image:url("+C+"list-"+z[L]+K+".gif)}")}J.push("ol.custom_"+L+"{list-style:none;}ol.custom_"+L+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(L){case"cn":J.push("li.list-"+L+"-paddingleft-1{padding-left:25px}");J.push("li.list-"+L+"-paddingleft-2{padding-left:40px}");J.push("li.list-"+L+"-paddingleft-3{padding-left:55px}");break;case"cn1":J.push("li.list-"+L+"-paddingleft-1{padding-left:30px}");J.push("li.list-"+L+"-paddingleft-2{padding-left:40px}");J.push("li.list-"+L+"-paddingleft-3{padding-left:55px}");break;case"cn2":J.push("li.list-"+L+"-paddingleft-1{padding-left:40px}");J.push("li.list-"+L+"-paddingleft-2{padding-left:55px}");J.push("li.list-"+L+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":J.push("li.list-"+L+"-paddingleft-1{padding-left:25px}");break;case"num2":J.push("li.list-"+L+"-paddingleft-1{padding-left:35px}");J.push("li.list-"+L+"-paddingleft-2{padding-left:40px}");break;case"dash":J.push("li.list-"+L+"-paddingleft{padding-left:35px}");break;case"dot":J.push("li.list-"+L+"-paddingleft{padding-left:20px}")}}J.push(".list-paddingleft-1{padding-left:0}");J.push(".list-paddingleft-2{padding-left:"+F.options.listDefaultPaddingLeft+"px}");J.push(".list-paddingleft-3{padding-left:"+F.options.listDefaultPaddingLeft*2+"px}");u.cssRule("list","ol,ul{margin:0;pading:0;"+(c.ie?"":"width:95%")+"}li{clear:both;}"+J.join("\n"),F.document)});F.ready(function(){e.on(F.body,"cut",function(){setTimeout(function(){var M=F.selection.getRange(),J;if(!M.collapsed){if(J=e.findParentByTagName(M.startContainer,"li",true)){if(!J.nextSibling&&e.isEmptyBlock(J)){var L=J.parentNode,K;if(K=L.previousSibling){e.remove(L);M.setStartAtLast(K).collapse(true);M.select(true)}else{if(K=L.nextSibling){e.remove(L);M.setStartAtFirst(K).collapse(true);M.select(true)}else{var N=F.document.createElement("p");e.fillNode(F.document,N);L.parentNode.insertBefore(N,L);e.remove(L);M.setStart(N,0).collapse(true);M.select(true)}}}}}})})});function B(K){var J=K.className;if(e.hasClass(K,/custom_/)){return J.match(/custom_(\w+)/)[1]}return e.getStyle(K,"list-style-type")}F.addListener("beforepaste",function(Q,J){var M=this,N=M.selection.getRange(),K;var O=UE.htmlparser(J.html,true);if(K=e.findParentByTagName(N.startContainer,"li",true)){var L=K.parentNode,P=L.tagName=="OL"?"ul":"ol";u.each(O.getNodesByTagName(P),function(U){U.tagName=L.tagName;U.setAttr();if(U.parentNode===O){Q=B(L)||(L.tagName=="OL"?"decimal":"disc")}else{var R=U.parentNode.getAttr("class");if(R&&/custom_/.test(R)){Q=R.match(/custom_(\w+)/)[1]}else{Q=U.parentNode.getStyle("list-style-type")}if(!Q){Q=L.tagName=="OL"?"decimal":"disc"}}var T=u.indexOf(D[L.tagName],Q);if(U.parentNode!==O){T=T+1==D[L.tagName].length?0:T+1}var S=D[L.tagName][T];if(z[S]){U.setAttr("class","custom_"+S)}else{U.setStyle("list-style-type",S)}})}J.html=O.toHtml()});F.getOpt("disablePInList")===true&&F.addOutputRule(function(J){u.each(J.getNodesByTagName("li"),function(L){var M=[],K=0;u.each(L.children,function(O){if(O.tagName=="p"){var P;while(P=O.children.pop()){M.splice(K,0,P);P.parentNode=L;lastNode=P}P=M[M.length-1];if(!P||P.type!="element"||P.tagName!="br"){var N=UE.uNode.createElement("br");N.parentNode=L;M.push(N)}K=M.length}});if(M.length){L.children=M}})});F.addInputRule(function(L){u.each(L.getNodesByTagName("li"),function(Q){var S=UE.uNode.createElement("p");for(var O=0,N;N=Q.children[O];){if(N.type=="text"||f.p[N.tagName]){S.appendChild(N)}else{if(S.firstChild()){Q.insertBefore(S,N);S=UE.uNode.createElement("p");O=O+2}else{O++}}}if(S.firstChild()&&!S.parentNode||!Q.firstChild()){Q.appendChild(S)}if(!S.firstChild()){S.innerHTML(c.ie?"&nbsp;":"<br/>")}var R=Q.firstChild();var P=R.lastChild();if(P&&P.type=="text"&&/^\s*$/.test(P.data)){R.removeChild(P)}});if(F.options.autoTransWordToList){var K={"num1":/^\d+\)/,"decimal":/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,"cn":/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,"cn2":/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},M={"square":"n"};function J(O,N){var Q=N.firstChild();if(Q&&Q.type=="element"&&Q.tagName=="span"&&/Wingdings|Symbol/.test(Q.getStyle("font-family"))){for(var P in M){if(M[P]==Q.data){return P}}return"disc"}for(var P in K){if(K[P].test(O)){return P}}}u.each(L.getNodesByTagName("p"),function(Q){if(Q.getAttr("class")!="MsoListParagraph"){return}Q.setStyle("margin","");Q.setStyle("margin-left","");Q.setAttr("class","");function N(W,X,Y){if(W.tagName=="ol"){if(c.ie){var U=X.firstChild();if(U.type=="element"&&U.tagName=="span"&&K[Y].test(U.innerText())){X.removeChild(U)}}else{X.innerHTML(X.innerHTML().replace(K[Y],""))}}else{X.removeChild(X.firstChild())}var V=UE.uNode.createElement("li");V.appendChild(X);W.appendChild(V)}var S=Q,T,O=Q;if(Q.parentNode.tagName!="li"&&(T=J(Q.innerText(),Q))){var P=UE.uNode.createElement(F.options.insertorderedlist.hasOwnProperty(T)?"ol":"ul");if(z[T]){P.setAttr("class","custom_"+T)}else{P.setStyle("list-style-type",T)}while(Q&&Q.parentNode.tagName!="li"&&J(Q.innerText(),Q)){S=Q.nextSibling();if(!S){Q.parentNode.insertBefore(P,Q)}N(P,Q,T);Q=S}if(!P.parentNode&&Q&&Q.parentNode){Q.parentNode.insertBefore(P,Q)}}var R=O.firstChild();if(R&&R.type=="element"&&R.tagName=="span"&&/^\s*(&nbsp;)+\s*$/.test(R.innerText())){R.parentNode.removeChild(R)}})}});F.addListener("contentchange",function(){x(F.document)});function x(J,K){u.each(e.getElementsByTagName(J,"ol ul"),function(M){if(!e.inDoc(M,J)){return}var O=M.parentNode;if(O.tagName==M.tagName){var N=B(M)||(M.tagName=="OL"?"decimal":"disc"),P=B(O)||(O.tagName=="OL"?"decimal":"disc");if(N==P){var R=u.indexOf(D[M.tagName],N);R=R+1==D[M.tagName].length?0:R+1;I(M,D[M.tagName][R])}}var L=0,S=2;if(e.hasClass(M,/custom_/)){if(!(/[ou]l/i.test(O.tagName)&&e.hasClass(O,/custom_/))){S=1}}else{if(/[ou]l/i.test(O.tagName)&&e.hasClass(O,/custom_/)){S=3}}var Q=e.getStyle(M,"list-style-type");Q&&(M.style.cssText="list-style-type:"+Q);M.className=u.trim(M.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+S;u.each(e.getElementsByTagName(M,"li"),function(V){V.style.cssText&&(V.style.cssText="");if(!V.firstChild){e.remove(V);return}if(V.parentNode!==M){return}L++;if(e.hasClass(M,/custom_/)){var W=1,U=B(M);if(M.tagName=="OL"){if(U){switch(U){case"cn":case"cn1":case"cn2":if(L>10&&(L%10==0||L>10&&L<20)){W=2}else{if(L>20){W=3}}break;case"num2":if(L>9){W=2}}}V.className="list-"+z[U]+L+" "+"list-"+U+"-paddingleft-"+W}else{V.className="list-"+z[U]+" "+"list-"+U+"-paddingleft"}}else{V.className=V.className.replace(/list-[\w\-]+/gi,"")}var T=V.getAttribute("class");if(T!==null&&!T.replace(/\s/g,"")){e.removeAttributes(V,"class")}});!K&&w(M,M.tagName.toLowerCase(),B(M)||e.getStyle(M,"list-style-type"),true)})}function w(K,O,N,J){var L=K.nextSibling;if(L&&L.nodeType==1&&L.tagName.toLowerCase()==O&&(B(L)||e.getStyle(L,"list-style-type")||(O=="ol"?"decimal":"disc"))==N){e.moveChild(L,K);if(L.childNodes.length==0){e.remove(L)}}if(L&&e.isFillChar(L)){e.remove(L)}var M=K.previousSibling;if(M&&M.nodeType==1&&M.tagName.toLowerCase()==O&&(B(M)||e.getStyle(M,"list-style-type")||(O=="ol"?"decimal":"disc"))==N){e.moveChild(K,M)}if(M&&e.isFillChar(M)){e.remove(M)}!J&&e.isEmptyBlock(K)&&e.remove(K);if(B(K)){x(K.ownerDocument,true)}}function I(K,L){if(z[L]){K.className="custom_"+L}try{e.setStyle(K,"list-style-type",L)}catch(J){}}function y(J){var K=J.previousSibling;if(K&&e.isEmptyBlock(K)){e.remove(K)}K=J.nextSibling;if(K&&e.isEmptyBlock(K)){e.remove(K)}}F.addListener("keydown",function(ac,L){function W(){L.preventDefault?L.preventDefault():(L.returnValue=false);F.fireEvent("contentchange");F.undoManger&&F.undoManger.save()}function M(ae,ad){while(ae&&!e.isBody(ae)){if(ad(ae)){return null}if(ae.nodeType==1&&/[ou]l/i.test(ae.tagName)){return ae}ae=ae.parentNode}return null}var P=L.keyCode||L.which;if(P==13&&!L.shiftKey){var Y=F.selection.getRange(),T=e.findParent(Y.startContainer,function(ad){return e.isBlockElm(ad)},true),Q=e.findParentByTagName(Y.startContainer,"li",true);if(T&&T.tagName!="PRE"&&!Q){var O=T.innerHTML.replace(new RegExp(e.fillChar,"g"),"");if(/^\s*1\s*\.[^\d]/.test(O)){T.innerHTML=O.replace(/^\s*1\s*\./,"");Y.setStartAtLast(T).collapse(true).select();F.__hasEnterExecCommand=true;F.execCommand("insertorderedlist");F.__hasEnterExecCommand=false}}var X=F.selection.getRange(),aa=M(X.startContainer,function(ad){return ad.tagName=="TABLE"}),K=X.collapsed?aa:M(X.endContainer,function(ad){return ad.tagName=="TABLE"});if(aa&&K&&aa===K){if(!X.collapsed){aa=e.findParentByTagName(X.startContainer,"li",true);K=e.findParentByTagName(X.endContainer,"li",true);if(aa&&K&&aa===K){X.deleteContents();Q=e.findParentByTagName(X.startContainer,"li",true);if(Q&&e.isEmptyBlock(Q)){V=Q.previousSibling;next=Q.nextSibling;S=F.document.createElement("p");e.fillNode(F.document,S);U=Q.parentNode;if(V&&next){X.setStart(next,0).collapse(true).select(true);e.remove(Q)}else{if(!V&&!next||!V){U.parentNode.insertBefore(S,U)}else{Q.parentNode.parentNode.insertBefore(S,U.nextSibling)}e.remove(Q);if(!U.firstChild){e.remove(U)}X.setStart(S,0).setCursor()}W();return}}else{var ab=X.cloneRange(),J=ab.collapse(false).createBookmark();X.deleteContents();ab.moveToBookmark(J);var Q=e.findParentByTagName(ab.startContainer,"li",true);y(Q);ab.select();W();return}}Q=e.findParentByTagName(X.startContainer,"li",true);if(Q){if(e.isEmptyBlock(Q)){J=X.createBookmark();var U=Q.parentNode;if(Q!==U.lastChild){e.breakParent(Q,U);y(Q)}else{U.parentNode.insertBefore(Q,U.nextSibling);if(e.isEmptyNode(U)){e.remove(U)}}if(!f.$list[Q.parentNode.tagName]){if(!e.isBlockElm(Q.firstChild)){S=F.document.createElement("p");Q.parentNode.insertBefore(S,Q);while(Q.firstChild){S.appendChild(Q.firstChild)}e.remove(Q)}else{e.remove(Q,true)}}X.moveToBookmark(J).select()}else{var N=Q.firstChild;if(!N||!e.isBlockElm(N)){var S=F.document.createElement("p");!Q.firstChild&&e.fillNode(F.document,S);while(Q.firstChild){S.appendChild(Q.firstChild)}Q.appendChild(S);N=S}var Z=F.document.createElement("span");X.insertNode(Z);e.breakParent(Z,Q);var R=Z.nextSibling;N=R.firstChild;if(!N){S=F.document.createElement("p");e.fillNode(F.document,S);R.appendChild(S);N=S}if(e.isEmptyNode(N)){N.innerHTML="";e.fillNode(F.document,N)}X.setStart(N,0).collapse(true).shrinkBoundary().select();e.remove(Z);var V=R.previousSibling;if(V&&e.isEmptyBlock(V)){V.innerHTML="<p></p>";e.fillNode(F.document,V.firstChild)}}W()}}}if(P==8){X=F.selection.getRange();if(X.collapsed&&e.isStartInblock(X)){ab=X.cloneRange().trimBoundary();Q=e.findParentByTagName(X.startContainer,"li",true);if(Q&&e.isStartInblock(ab)){aa=e.findParentByTagName(X.startContainer,"p",true);if(aa&&aa!==Q.firstChild){var U=e.findParentByTagName(aa,["ol","ul"]);e.breakParent(aa,U);y(aa);F.fireEvent("contentchange");X.setStart(aa,0).setCursor(false,true);F.fireEvent("saveScene");e.preventDefault(L);return}if(Q&&(V=Q.previousSibling)){if(P==46&&Q.childNodes.length){return}if(f.$list[V.tagName]){V=V.lastChild}F.undoManger&&F.undoManger.save();N=Q.firstChild;if(e.isBlockElm(N)){if(e.isEmptyNode(N)){V.appendChild(N);X.setStart(N,0).setCursor(false,true);while(Q.firstChild){V.appendChild(Q.firstChild)}}else{Z=F.document.createElement("span");X.insertNode(Z);if(e.isEmptyBlock(V)){V.innerHTML=""}e.moveChild(Q,V);X.setStartBefore(Z).collapse(true).select(true);e.remove(Z)}}else{if(e.isEmptyNode(Q)){var S=F.document.createElement("p");V.appendChild(S);X.setStart(S,0).setCursor()}else{X.setEnd(V,V.childNodes.length).collapse().select(true);while(Q.firstChild){V.appendChild(Q.firstChild)}}}e.remove(Q);F.fireEvent("contentchange");F.fireEvent("saveScene");e.preventDefault(L);return}if(Q&&!Q.previousSibling){var U=Q.parentNode;var J=X.createBookmark();if(e.isTagNode(U.parentNode,"ol ul")){U.parentNode.insertBefore(Q,U);if(e.isEmptyNode(U)){e.remove(U)}}else{while(Q.firstChild){U.parentNode.insertBefore(Q.firstChild,U)}e.remove(Q);if(e.isEmptyNode(U)){e.remove(U)}}X.moveToBookmark(J).setCursor(false,true);F.fireEvent("contentchange");F.fireEvent("saveScene");e.preventDefault(L);return}}}}});F.addListener("keyup",function(N,J){var K=J.keyCode||J.which;if(K==8){var M=F.selection.getRange(),L;if(L=e.findParentByTagName(M.startContainer,["ol","ul"],true)){w(L,L.tagName.toLowerCase(),B(L)||e.getComputedStyle(L,"list-style-type"),true)}}});F.addListener("tabkeydown",function(){var W=F.selection.getRange();function K(Z){if(F.options.maxListLevel!=-1){var X=Z.parentNode,Y=0;while(/[ou]l/i.test(X.tagName)){Y++;X=X.parentNode}if(Y>=F.options.maxListLevel){return true}}}var S=e.findParentByTagName(W.startContainer,"li",true);if(S){var J;if(W.collapsed){if(K(S)){return true}var U=S.parentNode,T=F.document.createElement(U.tagName),R=u.indexOf(D[T.tagName],B(U)||e.getComputedStyle(U,"list-style-type"));R=R+1==D[T.tagName].length?0:R+1;var P=D[T.tagName][R];I(T,P);if(e.isStartInblock(W)){F.fireEvent("saveScene");J=W.createBookmark();U.insertBefore(T,S);T.appendChild(S);w(T,T.tagName.toLowerCase(),P);F.fireEvent("contentchange");W.moveToBookmark(J).select(true);return true}}else{F.fireEvent("saveScene");J=W.createBookmark();for(var Q=0,M,V=e.findParents(S),L;L=V[Q++];){if(e.isTagNode(L,"ol ul")){M=L;break}}var N=S;if(J.end){while(N&&!(e.getPosition(N,J.end)&e.POSITION_FOLLOWING)){if(K(N)){N=e.getNextDomNode(N,false,null,function(X){return X!==M});continue}var U=N.parentNode,T=F.document.createElement(U.tagName),R=u.indexOf(D[T.tagName],B(U)||e.getComputedStyle(U,"list-style-type"));var O=R+1==D[T.tagName].length?0:R+1;var P=D[T.tagName][O];I(T,P);U.insertBefore(T,N);while(N&&!(e.getPosition(N,J.end)&e.POSITION_FOLLOWING)){S=N.nextSibling;T.appendChild(N);if(!S||e.isTagNode(S,"ol ul")){if(S){while(S=S.firstChild){if(S.tagName=="LI"){break}}}else{S=e.getNextDomNode(N,false,null,function(X){return X!==M})}break}N=S}w(T,T.tagName.toLowerCase(),P);N=S}}F.fireEvent("contentchange");W.moveToBookmark(J).select();return true}}});function A(J){while(J&&!e.isBody(J)){if(J.nodeName=="TABLE"){return null}if(J.nodeName=="LI"){return J}J=J.parentNode}}F.commands["insertorderedlist"]=F.commands["insertunorderedlist"]={execCommand:function(N,af){if(!af){af=N.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var X=this,ac=this.selection.getRange(),R=function(ap){return ap.nodeType==1?ap.tagName.toLowerCase()!="br":!e.isWhitespace(ap)},ag=N.toLowerCase()=="insertorderedlist"?"ol":"ul",S=X.document.createDocumentFragment();ac.adjustmentBoundary().shrinkBoundary();var K=ac.createBookmark(true),ad=A(X.document.getElementById(K.start)),Z=0,P=A(X.document.getElementById(K.end)),Y=0,ae,Q,W,ah;if(ad||P){ad&&(ae=ad.parentNode);if(!K.end){P=ad}P&&(Q=P.parentNode);if(ae===Q){while(ad!==P){ah=ad;ad=ad.nextSibling;if(!e.isBlockElm(ah.firstChild)){var ab=X.document.createElement("p");while(ah.firstChild){ab.appendChild(ah.firstChild)}ah.appendChild(ab)}S.appendChild(ah)}ah=X.document.createElement("span");ae.insertBefore(ah,P);if(!e.isBlockElm(P.firstChild)){ab=X.document.createElement("p");while(P.firstChild){ab.appendChild(P.firstChild)}P.appendChild(ab)}S.appendChild(P);e.breakParent(ah,ae);if(e.isEmptyNode(ah.previousSibling)){e.remove(ah.previousSibling)}if(e.isEmptyNode(ah.nextSibling)){e.remove(ah.nextSibling)}var aa=B(ae)||e.getComputedStyle(ae,"list-style-type")||(N.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(ae.tagName.toLowerCase()==ag&&aa==af){for(var U=0,M,al=X.document.createDocumentFragment();M=S.firstChild;){if(e.isTagNode(M,"ol ul")){al.appendChild(M)}else{while(M.firstChild){al.appendChild(M.firstChild);e.remove(M)}}}ah.parentNode.insertBefore(al,ah)}else{W=X.document.createElement(ag);I(W,af);W.appendChild(S);ah.parentNode.insertBefore(W,ah)}e.remove(ah);W&&w(W,ag,af);ac.moveToBookmark(K).select();return}if(ad){while(ad){ah=ad.nextSibling;if(e.isTagNode(ad,"ol ul")){S.appendChild(ad)}else{var ak=X.document.createDocumentFragment(),T=0;while(ad.firstChild){if(e.isBlockElm(ad.firstChild)){T=1}ak.appendChild(ad.firstChild)}if(!T){var an=X.document.createElement("p");an.appendChild(ak);S.appendChild(an)}else{S.appendChild(ak)}e.remove(ad)}ad=ah}ae.parentNode.insertBefore(S,ae.nextSibling);if(e.isEmptyNode(ae)){ac.setStartBefore(ae);e.remove(ae)}else{ac.setStartAfter(ae)}Z=1}if(P&&e.inDoc(Q,X.document)){ad=Q.firstChild;while(ad&&ad!==P){ah=ad.nextSibling;if(e.isTagNode(ad,"ol ul")){S.appendChild(ad)}else{ak=X.document.createDocumentFragment();T=0;while(ad.firstChild){if(e.isBlockElm(ad.firstChild)){T=1}ak.appendChild(ad.firstChild)}if(!T){an=X.document.createElement("p");an.appendChild(ak);S.appendChild(an)}else{S.appendChild(ak)}e.remove(ad)}ad=ah}var ai=e.createElement(X.document,"div",{"tmpDiv":1});e.moveChild(P,ai);S.appendChild(ai);e.remove(P);Q.parentNode.insertBefore(S,Q);ac.setEndBefore(Q);if(e.isEmptyNode(Q)){e.remove(Q)}Y=1}}if(!Z){ac.setStartBefore(X.document.getElementById(K.start))}if(K.end&&!Y){ac.setEndAfter(X.document.getElementById(K.end))}ac.enlarge(true,function(ap){return G[ap.tagName]});S=X.document.createDocumentFragment();var J=ac.createBookmark(),O=e.getNextDomNode(J.start,false,R),ao=ac.cloneRange(),am,L=e.isBlockElm;while(O&&O!==J.end&&(e.getPosition(O,J.end)&e.POSITION_PRECEDING)){if(O.nodeType==3||f.li[O.tagName]){if(O.nodeType==1&&f.$list[O.tagName]){while(O.firstChild){S.appendChild(O.firstChild)}am=e.getNextDomNode(O,false,R);e.remove(O);O=am;continue}am=O;ao.setStartBefore(O);while(O&&O!==J.end&&(!L(O)||e.isBookmarkNode(O))){am=O;O=e.getNextDomNode(O,false,null,function(ap){return !G[ap.tagName]})}if(O&&L(O)){ah=e.getNextDomNode(am,false,R);if(ah&&e.isBookmarkNode(ah)){O=e.getNextDomNode(ah,false,R);am=ah}}ao.setEndAfter(am);O=e.getNextDomNode(am,false,R);var V=ac.document.createElement("li");V.appendChild(ao.extractContents());if(e.isEmptyNode(V)){var am=ac.document.createElement("p");while(V.firstChild){am.appendChild(V.firstChild)}V.appendChild(am)}S.appendChild(V)}else{O=e.getNextDomNode(O,true,R)}}ac.moveToBookmark(J).collapse(true);W=X.document.createElement(ag);I(W,af);W.appendChild(S);ac.insertNode(W);w(W,ag,af);for(var U=0,M,aj=e.getElementsByTagName(W,"div");M=aj[U++];){if(M.getAttribute("tmpDiv")){e.remove(M,true)}}ac.moveToBookmark(K).select()},queryCommandState:function(K){var N=K.toLowerCase()=="insertorderedlist"?"ol":"ul";var M=this.selection.getStartElementPath();for(var L=0,J;J=M[L++];){if(J.nodeName=="TABLE"){return 0}if(N==J.nodeName.toLowerCase()){return 1}}return 0},queryCommandValue:function(K){var O=K.toLowerCase()=="insertorderedlist"?"ol":"ul";var N=this.selection.getStartElementPath(),M;for(var L=0,J;J=N[L++];){if(J.nodeName=="TABLE"){M=null;break}if(O==J.nodeName.toLowerCase()){M=J;break}}return M?B(M)||e.getComputedStyle(M,"list-style-type"):null}}};(function(){var w={textarea:function(x,y){var z=y.ownerDocument.createElement("textarea");z.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";if(c.ie&&c.version<8){z.style.width=y.offsetWidth+"px";z.style.height=y.offsetHeight+"px";y.onresize=function(){z.style.width=y.offsetWidth+"px";z.style.height=y.offsetHeight+"px"}}y.appendChild(z);return{setContent:function(A){z.value=A},getContent:function(){return z.value},select:function(){var A;if(c.ie){A=z.createTextRange();A.collapse(true);A.select()}else{z.setSelectionRange(0,0);z.focus()}},dispose:function(){y.removeChild(z);y.onresize=null;z=null;y=null}}},codemirror:function(z,A){var x=window.CodeMirror(A,{mode:"text/html",tabMode:"indent",lineNumbers:true,lineWrapping:true});var y=x.getWrapperElement();y.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';x.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";x.refresh();return{getCodeMirror:function(){return x},setContent:function(B){x.setValue(B)},getContent:function(){return x.getValue()},select:function(){x.focus()},dispose:function(){A.removeChild(y);y=null;x=null}}}};UE.plugins["source"]=function(){var A=this;var D=this.options;var G=false;var F;var E;D.sourceEditor=c.ie?"textarea":(D.sourceEditor||"codemirror");A.setOpt({sourceEditorFirst:false});function z(H){return w[D.sourceEditor=="codemirror"&&window.CodeMirror?"codemirror":"textarea"](A,H)}var y;var B,x;A.commands["source"]={execCommand:function(){G=!G;if(G){x=A.selection.getRange().createAddress(false,true);A.undoManger&&A.undoManger.save(true);if(c.gecko){A.body.contentEditable=false}y=A.iframe.style.cssText;A.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";A.fireEvent("beforegetcontent");var M=UE.htmlparser(A.body.innerHTML);A.filterOutputRule(M);M.traversal(function(N){if(N.type=="element"){switch(N.tagName){case"td":case"th":case"caption":if(N.children&&N.children.length==1){if(N.firstChild().tagName=="br"){N.removeChild(N.firstChild())}}break;case"pre":N.innerText(N.innerText().replace(/&nbsp;/g," "))}}});A.fireEvent("aftergetcontent");var I=M.toHtml(true);F=z(A.iframe.parentNode);F.setContent(I);E=A.setContent;A.setContent=function(N){var O=UE.htmlparser(N);A.filterInputRule(O);N=O.toHtml();F.setContent(N)};setTimeout(function(){F.select();A.addListener("fullscreenchanged",function(){try{F.getCodeMirror().refresh()}catch(N){}})});B=A.getContent;A.getContent=function(){return F.getContent()||"<p>"+(c.ie?"":"<br/>")+"</p>"}}else{A.iframe.style.cssText=y;var H=F.getContent()||"<p>"+(c.ie?"":"<br/>")+"</p>";H=H.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(N,O){if(O&&!f.$inlineWithA[O.toLowerCase()]){return N.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,"")}return N.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")});A.setContent=E;A.setContent(H);F.dispose();F=null;A.getContent=B;var K=A.body.firstChild;if(!K){A.body.innerHTML="<p>"+(c.ie?"":"<br/>")+"</p>";K=A.body.firstChild}A.undoManger&&A.undoManger.save(true);if(c.gecko){var L=document.createElement("input");L.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(L);A.body.contentEditable=false;setTimeout(function(){e.setViewportOffset(L,{left:-32768,top:0});L.focus();setTimeout(function(){A.body.contentEditable=true;A.selection.getRange().moveToAddress(x).select(true);e.remove(L)})})}else{try{A.selection.getRange().moveToAddress(x).select(true)}catch(J){}}}this.fireEvent("sourcemodechanged",G)},queryCommandState:function(){return G|0},notNeedUndo:1};var C=A.queryCommandState;A.queryCommandState=function(H){H=H.toLowerCase();if(G){return H in {"source":1,"fullscreen":1}?1:-1}return C.apply(this,arguments)};if(D.sourceEditor=="codemirror"){A.addListener("ready",function(){u.loadFile(document,{src:D.codeMirrorJsUrl||D.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){if(D.sourceEditorFirst){setTimeout(function(){A.execCommand("source")},0)}});u.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:D.codeMirrorCssUrl||D.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}}})();UE.plugins["enterkey"]=function(){var w,x=this,y=x.options.enterTag;x.addListener("keyup",function(I,B){var D=B.keyCode||B.which;if(D==13){var F=x.selection.getRange(),G=F.startContainer,A;if(!c.ie){if(/h\d/i.test(w)){if(c.gecko){var C=e.findParentByTagName(G,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],true);if(!C){x.document.execCommand("formatBlock",false,"<p>");A=1}}else{if(G.nodeType==1){var H=x.document.createTextNode(""),z;F.insertNode(H);z=e.findParentByTagName(H,"div",true);if(z){var E=x.document.createElement("p");while(z.firstChild){E.appendChild(z.firstChild)}z.parentNode.insertBefore(E,z);e.remove(z);F.setStartBefore(H).setCursor();A=1}e.remove(H)}}if(x.undoManger&&A){x.undoManger.save()}}c.opera&&F.select()}else{x.fireEvent("saveScene",true,true)}}});x.addListener("keydown",function(I,C){var D=C.keyCode||C.which;if(D==13){if(x.fireEvent("beforeenterkeydown")){e.preventDefault(C);return}x.fireEvent("saveScene",true,true);w="";var F=x.selection.getRange();if(!F.collapsed){var G=F.startContainer,A=F.endContainer,H=e.findParentByTagName(G,"td",true),B=e.findParentByTagName(A,"td",true);if(H&&B&&H!==B||!H&&B||H&&!B){C.preventDefault?C.preventDefault():(C.returnValue=false);return}}if(y=="p"){if(!c.ie){G=e.findParentByTagName(F.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],true);if(!G&&!c.opera){x.document.execCommand("formatBlock",false,"<p>");if(c.gecko){F=x.selection.getRange();G=e.findParentByTagName(F.startContainer,"p",true);G&&e.removeDirtyAttr(G)}}else{w=G.tagName;G.tagName.toLowerCase()=="p"&&c.gecko&&e.removeDirtyAttr(G)}}}else{C.preventDefault?C.preventDefault():(C.returnValue=false);if(!F.collapsed){F.deleteContents();G=F.startContainer;if(G.nodeType==1&&(G=G.childNodes[F.startOffset])){while(G.nodeType==1){if(f.$empty[G.tagName]){F.setStartBefore(G).setCursor();if(x.undoManger){x.undoManger.save()}return false}if(!G.firstChild){var z=F.document.createElement("br");G.appendChild(z);F.setStart(G,0).setCursor();if(x.undoManger){x.undoManger.save()}return false}G=G.firstChild}if(G===F.startContainer.childNodes[F.startOffset]){z=F.document.createElement("br");F.insertNode(z).setCursor()}else{F.setStart(G,0).setCursor()}}else{z=F.document.createElement("br");F.insertNode(z).setStartAfter(z).setCursor()}}else{z=F.document.createElement("br");F.insertNode(z);var E=z.parentNode;if(E.lastChild===z){z.parentNode.insertBefore(z.cloneNode(true),z);F.setStartBefore(z)}else{F.setStartAfter(z)}F.setCursor()}}}})};UE.plugins["keystrokes"]=function(){var x=this;var w=true;x.addListener("keydown",function(Q,C){var G=C.keyCode||C.which,J=x.selection.getRange();if(!J.collapsed&&!(C.ctrlKey||C.shiftKey||C.altKey||C.metaKey)&&(G>=65&&G<=90||G>=48&&G<=57||G>=96&&G<=111||{13:1,8:1,46:1}[G])){var O=J.startContainer;if(e.isFillChar(O)){J.setStartBefore(O)}O=J.endContainer;if(e.isFillChar(O)){J.setEndAfter(O)}J.txtToElmBoundary();if(J.endContainer&&J.endContainer.nodeType==1){O=J.endContainer.childNodes[J.endOffset];if(O&&e.isBr(O)){J.setEndAfter(O)}}if(J.startOffset==0){O=J.startContainer;if(e.isBoundaryNode(O,"firstChild")){O=J.endContainer;if(J.endOffset==(O.nodeType==3?O.nodeValue.length:O.childNodes.length)&&e.isBoundaryNode(O,"lastChild")){x.fireEvent("saveScene");x.body.innerHTML="<p>"+(c.ie?"":"<br/>")+"</p>";J.setStart(x.body.firstChild,0).setCursor(false,true);x._selectionChange();return}}}}if(G==q.Backspace){J=x.selection.getRange();w=J.collapsed;if(x.fireEvent("delkeydown",C)){return}var L,B;if(J.collapsed&&J.inFillChar()){L=J.startContainer;if(e.isFillChar(L)){J.setStartBefore(L).shrinkBoundary(true).collapse(true);e.remove(L)}else{L.nodeValue=L.nodeValue.replace(new RegExp("^"+e.fillChar),"");J.startOffset--;J.collapse(true).select(true)}}if(L=J.getClosedNode()){x.fireEvent("saveScene");J.setStartBefore(L);e.remove(L);J.setCursor();x.fireEvent("saveScene");e.preventDefault(C);return}if(!c.ie){L=e.findParentByTagName(J.startContainer,"table",true);B=e.findParentByTagName(J.endContainer,"table",true);if(L&&!B||!L&&B||L!==B){C.preventDefault();return}}}if(G==q.Tab){var D={"ol":1,"ul":1,"table":1};if(x.fireEvent("tabkeydown",C)){e.preventDefault(C);return}var I=x.selection.getRange();x.fireEvent("saveScene");for(var F=0,P="",N=x.options.tabSize||4,M=x.options.tabNode||"&nbsp;";F<N;F++){P+=M}var K=x.document.createElement("span");K.innerHTML=P+e.fillChar;if(I.collapsed){I.insertNode(K.cloneNode(true).firstChild).setCursor(true)}else{var E=function(R){return e.isBlockElm(R)&&!D[R.tagName.toLowerCase()]};L=e.findParent(I.startContainer,E,true);B=e.findParent(I.endContainer,E,true);if(L&&B&&L===B){I.deleteContents();I.insertNode(K.cloneNode(true).firstChild).setCursor(true)}else{var y=I.createBookmark();I.enlarge(true);var z=I.createBookmark(),A=e.getNextDomNode(z.start,false,E);while(A&&!(e.getPosition(A,z.end)&e.POSITION_FOLLOWING)){A.insertBefore(K.cloneNode(true).firstChild,A.firstChild);A=e.getNextDomNode(A,false,E)}I.moveToBookmark(z).moveToBookmark(y).select()}}e.preventDefault(C)}if(c.gecko&&G==46){I=x.selection.getRange();if(I.collapsed){L=I.startContainer;if(e.isEmptyBlock(L)){var H=L.parentNode;while(e.getChildCount(H)==1&&!e.isBody(H)){L=H;H=H.parentNode}if(L===H.lastChild){C.preventDefault()}return}}}});x.addListener("keyup",function(H,z){var A=z.keyCode||z.which,E,B=this;if(A==q.Backspace){if(B.fireEvent("delkeyup")){return}E=B.selection.getRange();if(E.collapsed){var G,y=["h1","h2","h3","h4","h5","h6"];if(G=e.findParentByTagName(E.startContainer,y,true)){if(e.isEmptyBlock(G)){var D=G.previousSibling;if(D&&D.nodeName!="TABLE"){e.remove(G);E.setStartAtLast(D).setCursor(false,true);return}else{var C=G.nextSibling;if(C&&C.nodeName!="TABLE"){e.remove(G);E.setStartAtFirst(C).setCursor(false,true);return}}}}if(e.isBody(E.startContainer)){var G=e.createElement(B.document,"p",{"innerHTML":c.ie?e.fillChar:"<br/>"});E.insertNode(G).setStart(G,0).setCursor(false,true)}}if(!w&&(E.startContainer.nodeType==3||E.startContainer.nodeType==1&&e.isEmptyBlock(E.startContainer))){if(c.ie){var F=E.document.createElement("span");E.insertNode(F).setStartBefore(F).collapse(true);E.select();e.remove(F)}else{E.select()}}}})};UE.plugins["fiximgclick"]=(function(){var w=false;function x(){this.editor=null;this.resizer=null;this.cover=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}(function(){var y=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];x.prototype={init:function(A){var C=this;C.editor=A;C.startPos=this.prePos={x:0,y:0};C.dragId=-1;var B=[],z=C.cover=document.createElement("div"),D=C.resizer=document.createElement("div");z.id=C.editor.ui.id+"_imagescale_cover";z.style.cssText="position:absolute;display:none;z-index:"+(C.editor.options.zIndex)+";filter:alpha(opacity=0); opacity:0;background:#CCC;";e.on(z,"mousedown click",function(){C.hide()});for(i=0;i<8;i++){B.push('<span class="edui-editor-imagescale-hand'+i+'"></span>')}D.id=C.editor.ui.id+"_imagescale";D.className="edui-editor-imagescale";D.innerHTML=B.join("");D.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+(C.editor.options.zIndex)+";";C.editor.ui.getDom().appendChild(z);C.editor.ui.getDom().appendChild(D);C.initStyle();C.initEvents()},initStyle:function(){u.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}"+".edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}"+".edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}"+".edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){var z=this;z.startPos.x=z.startPos.y=0;z.isDraging=false},_eventHandler:function(z){var B=this;switch(z.type){case"mousedown":var A=z.target||z.srcElement,A;if(A.className.indexOf("edui-editor-imagescale-hand")!=-1&&B.dragId==-1){B.dragId=A.className.slice(-1);B.startPos.x=B.prePos.x=z.clientX;B.startPos.y=B.prePos.y=z.clientY;e.on(B.doc,"mousemove",B.proxy(B._eventHandler,B))}break;case"mousemove":if(B.dragId!=-1){B.updateContainerStyle(B.dragId,{x:z.clientX-B.prePos.x,y:z.clientY-B.prePos.y});B.prePos.x=z.clientX;B.prePos.y=z.clientY;w=true;B.updateTargetElement()}break;case"mouseup":if(B.dragId!=-1){B.updateContainerStyle(B.dragId,{x:z.clientX-B.prePos.x,y:z.clientY-B.prePos.y});B.updateTargetElement();if(B.target.parentNode){B.attachTo(B.target)}B.dragId=-1}e.un(B.doc,"mousemove",B.proxy(B._eventHandler,B));if(w){w=false;B.editor.fireEvent("contentchange")}break;default:break}},updateTargetElement:function(){var z=this;e.setStyles(z.target,{"width":z.resizer.style.width,"height":z.resizer.style.height});z.target.width=parseInt(z.resizer.style.width);z.target.height=parseInt(z.resizer.style.height);z.attachTo(z.target)},updateContainerStyle:function(z,C){var B=this,A=B.resizer,D;if(y[z][0]!=0){D=parseInt(A.style.left)+C.x;A.style.left=B._validScaledProp("left",D)+"px"}if(y[z][1]!=0){D=parseInt(A.style.top)+C.y;A.style.top=B._validScaledProp("top",D)+"px"}if(y[z][2]!=0){D=A.clientWidth+y[z][2]*C.x;A.style.width=B._validScaledProp("width",D)+"px"}if(y[z][3]!=0){D=A.clientHeight+y[z][3]*C.y;A.style.height=B._validScaledProp("height",D)+"px"}},_validScaledProp:function(A,B){var z=this.resizer,C=document;B=isNaN(B)?0:B;switch(A){case"left":return B<0?0:(B+z.clientWidth)>C.clientWidth?C.clientWidth-z.clientWidth:B;case"top":return B<0?0:(B+z.clientHeight)>C.clientHeight?C.clientHeight-z.clientHeight:B;case"width":return B<=0?1:(B+z.offsetLeft)>C.clientWidth?C.clientWidth-z.offsetLeft:B;case"height":return B<=0?1:(B+z.offsetTop)>C.clientHeight?C.clientHeight-z.offsetTop:B}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var B=this,z=e.getXY(B.editor.ui.getDom()),A=e.getXY(B.editor.iframe);e.setStyles(B.cover,{"width":B.editor.iframe.offsetWidth+"px","height":B.editor.iframe.offsetHeight+"px","top":A.y-z.y+"px","left":A.x-z.x+"px","position":"absolute","display":""})},show:function(A){var z=this;z.resizer.style.display="block";if(A){z.attachTo(A)}e.on(this.resizer,"mousedown",z.proxy(z._eventHandler,z));e.on(z.doc,"mouseup",z.proxy(z._eventHandler,z));z.showCover();z.editor.fireEvent("afterscaleshow",z);z.editor.fireEvent("saveScene")},hide:function(){var z=this;z.hideCover();z.resizer.style.display="none";e.un(z.resizer,"mousedown",z.proxy(z._eventHandler,z));e.un(z.doc,"mouseup",z.proxy(z._eventHandler,z));z.editor.fireEvent("afterscalehide",z)},proxy:function(A,z){return function(B){return A.apply(z||this,arguments)}},attachTo:function(F){var C=this,E=C.target=F,D=this.resizer,B=e.getXY(E),A=e.getXY(C.editor.iframe),z=e.getXY(D.parentNode);e.setStyles(D,{"width":E.width+"px","height":E.height+"px","left":A.x+B.x-C.editor.document.body.scrollLeft-z.x-parseInt(D.style.borderLeftWidth)+"px","top":A.y+B.y-C.editor.document.body.scrollTop-z.y-parseInt(D.style.borderTopWidth)+"px"})}}})();return function(){var z=this,y;z.setOpt("imageScaleEnabled",true);if(!c.ie&&z.options.imageScaleEnabled){z.addListener("click",function(G,C){var E=z.selection.getRange(),D=E.getClosedNode();if(D&&D.tagName=="IMG"&&z.body.contentEditable!="false"){if(D.className.indexOf("edui-faked-music")!=-1||D.getAttribute("anchorname")||e.hasClass(D,"loadingclass")||e.hasClass(D,"loaderrorclass")){return}if(!y){y=new x();y.init(z);z.ui.getDom().appendChild(y.resizer);var A=function(H){y.hide();if(y.target){z.selection.getRange().selectNode(y.target).select()}},B=function(H){var I=H.target||H.srcElement;if(I&&(I.className===undefined||I.className.indexOf("edui-editor-imagescale")==-1)){A(H)}},F;z.addListener("afterscaleshow",function(H){z.addListener("beforekeydown",A);z.addListener("beforemousedown",B);e.on(document,"keydown",A);e.on(document,"mousedown",B);z.selection.getNative().removeAllRanges()});z.addListener("afterscalehide",function(H){z.removeListener("beforekeydown",A);z.removeListener("beforemousedown",B);e.un(document,"keydown",A);e.un(document,"mousedown",B);var I=y.target;if(I.parentNode){z.selection.getRange().selectNode(I).select()}});e.on(y.resizer,"mousedown",function(H){z.selection.getNative().removeAllRanges();var I=H.target||H.srcElement;if(I&&I.className.indexOf("edui-editor-imagescale-hand")==-1){F=setTimeout(function(){y.hide();if(y.target){z.selection.getRange().selectNode(I).select()}},200)}});e.on(y.resizer,"mouseup",function(H){var I=H.target||H.srcElement;if(I&&I.className.indexOf("edui-editor-imagescale-hand")==-1){clearTimeout(F)}})}y.show(D)}else{if(y&&y.resizer.style.display!="none"){y.hide()}}})}if(c.webkit){z.addListener("click",function(C,A){if(A.target.tagName=="IMG"&&z.body.contentEditable!="false"){var B=new d.Range(z.document);B.selectNode(A.target).select()}})}}})();UE.plugin.register("autolink",function(){var w=0;return !c.ie?{bindEvents:{"reset":function(){w=0},"keydown":function(J,A){var D=this;var C=A.keyCode||A.which;if(C==32||C==13){var G=D.selection.getNative(),F=G.getRangeAt(0).cloneRange(),E,y;var H=F.startContainer;while(H.nodeType==1&&F.startOffset>0){H=F.startContainer.childNodes[F.startOffset-1];if(!H){break}F.setStart(H,H.nodeType==1?H.childNodes.length:H.nodeValue.length);F.collapse(true);H=F.startContainer}do{if(F.startOffset==0){H=F.startContainer.previousSibling;while(H&&H.nodeType==1){H=H.lastChild}if(!H||e.isFillChar(H)){break}E=H.nodeValue.length}else{H=F.startContainer;E=F.startOffset}F.setStart(H,E-1);y=F.toString().charCodeAt(0)}while(y!=160&&y!=32);if(F.toString().replace(new RegExp(e.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(F.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(F.toString())){break}try{F.setStart(F.startContainer,F.startOffset+1)}catch(z){var H=F.startContainer;while(!(next=H.nextSibling)){if(e.isBody(H)){return}H=H.parentNode}F.setStart(next,0)}}if(e.findParentByTagName(F.startContainer,"a",true)){return}var x=D.document.createElement("a"),I=D.document.createTextNode(" "),B;D.undoManger&&D.undoManger.save();x.appendChild(F.extractContents());x.href=x.innerHTML=x.innerHTML.replace(/<[^>]+>/g,"");B=x.getAttribute("href").replace(new RegExp(e.fillChar,"g"),"");B=/^(?:https?:\/\/)/ig.test(B)?B:"http://"+B;x.setAttribute("_src",u.html(B));x.href=u.html(B);F.insertNode(x);x.parentNode.insertBefore(I,x.nextSibling);F.setStart(I,0);F.collapse(true);G.removeAllRanges();G.addRange(F);D.undoManger&&D.undoManger.save()}}}}}:{}},function(){var x={37:1,38:1,39:1,40:1,13:1,32:1};function w(z){if(z.nodeType==3){return null}if(z.nodeName=="A"){return z}var y=z.lastChild;while(y){if(y.nodeName=="A"){return y}if(y.nodeType==3){if(e.isWhitespace(y)){y=y.previousSibling;continue}return null}y=y.lastChild}}c.ie&&this.addListener("keyup",function(z,A){var C=this,B=A.keyCode;if(x[B]){var E=C.selection.getRange();var F=E.startContainer;if(B==13){while(F&&!e.isBody(F)&&!e.isBlockElm(F)){F=F.parentNode}if(F&&!e.isBody(F)&&F.nodeName=="P"){var D=F.previousSibling;if(D&&D.nodeType==1){var D=w(D);if(D&&!D.getAttribute("_href")){e.remove(D,true)}}}}else{if(B==32){if(F.nodeType==3&&/^\s$/.test(F.nodeValue)){F=F.previousSibling;if(F&&F.nodeName=="A"&&!F.getAttribute("_href")){e.remove(F,true)}}}else{F=e.findParentByTagName(F,"a",true);if(F&&!F.getAttribute("_href")){var y=E.createBookmark();e.remove(F,true);E.moveToBookmark(y).select(true)}}}}})});UE.plugins["autoheight"]=function(){var B=this;B.autoHeightEnabled=B.options.autoHeightEnabled!==false;if(!B.autoHeightEnabled){return}var x,A=0,C=B.options,y,D;function w(){var E=this;clearTimeout(D);if(z){return}if(!E.queryCommandState||E.queryCommandState&&E.queryCommandState("source")!=1){D=setTimeout(function(){var F=E.body.lastChild;while(F&&F.nodeType!=1){F=F.previousSibling}if(F&&F.nodeType==1){F.style.clear="both";y=Math.max(e.getXY(F).y+F.offsetHeight+25,Math.max(C.minFrameHeight,C.initialFrameHeight));if(y!=A){if(y!==parseInt(E.iframe.parentNode.style.height)){E.iframe.parentNode.style.height=y+"px"}E.body.style.height=y+"px";A=y}e.removeStyle(F,"clear")}},50)}}var z;B.addListener("fullscreenchanged",function(E,F){z=F});B.addListener("destroy",function(){B.removeListener("contentchange afterinserthtml keyup mouseup",w)});B.enableAutoHeight=function(){var F=this;if(!F.autoHeightEnabled){return}var E=F.document;F.autoHeightEnabled=true;x=E.body.style.overflowY;E.body.style.overflowY="hidden";F.addListener("contentchange afterinserthtml keyup mouseup",w);setTimeout(function(){w.call(F)},c.gecko?100:0);F.fireEvent("autoheightchanged",F.autoHeightEnabled)};B.disableAutoHeight=function(){B.body.style.overflowY=x||"";B.removeListener("contentchange",w);B.removeListener("keyup",w);B.removeListener("mouseup",w);B.autoHeightEnabled=false;B.fireEvent("autoheightchanged",B.autoHeightEnabled)};B.on("setHeight",function(){B.disableAutoHeight()});B.addListener("ready",function(){B.enableAutoHeight();var F;e.on(c.ie?B.body:B.document,c.webkit?"dragover":"drop",function(){clearTimeout(F);F=setTimeout(function(){w.call(B)},100)});var E;window.onscroll=function(){if(E===null){E=this.scrollY}else{if(this.scrollY==0&&E!=0){B.window.scrollTo(0,0);E=null}}}})};UE.plugins["autofloat"]=function(){var E=this,C=E.getLang();E.setOpt({topOffset:0});var F=E.options.autoFloatEnabled!==false,L=E.options.topOffset;if(!F){return}var M=UE.ui.uiUtils,D=c.ie&&c.version<=6,I=c.quirks;function x(){if(!UE.ui){alert(C.autofloatMsg);return 0}return 1}function z(){var P=document.body.style;P.backgroundImage='url("about:blank")';P.backgroundAttachment="fixed"}var w,H=document.createElement("div"),K,G,B,A=true;function J(){var R=e.getXY(K),P=e.getComputedStyle(K,"position"),Q=e.getComputedStyle(K,"left");K.style.width=K.offsetWidth+"px";K.style.zIndex=E.options.zIndex*1+1;K.parentNode.insertBefore(H,K);if(D||(I&&c.ie)){if(K.style.position!="absolute"){K.style.position="absolute"}K.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-G+L+"px"}else{if(c.ie7Compat&&A){A=false;K.style.left=e.getXY(K).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(K.style.position!="fixed"){K.style.position="fixed";K.style.top=L+"px";((P=="absolute"||P=="relative")&&parseFloat(Q))&&(K.style.left=R.x+"px")}}}function N(){A=true;if(H.parentNode){H.parentNode.removeChild(H)}K.style.cssText=w}function O(){var Q=B(E.container);var P=E.options.toolbarTopOffset||0;if(Q.top<0&&Q.bottom-K.offsetHeight>P){J()}else{N()}}var y=u.defer(function(){O()},c.ie?200:100,true);E.addListener("destroy",function(){e.un(window,["scroll","resize"],O);E.removeListener("keydown",y)});E.addListener("ready",function(){if(x(E)){if(!E.ui){return}B=M.getClientRect;K=E.ui.getDom("toolbarbox");G=B(K).top;w=K.style.cssText;H.style.height=K.offsetHeight+"px";if(D){z()}e.on(window,["scroll","resize"],O);E.addListener("keydown",y);E.addListener("beforefullscreenchange",function(Q,P){if(P){N()}});E.addListener("fullscreenchanged",function(Q,P){if(!P){O()}});E.addListener("sourcemodechanged",function(Q,P){setTimeout(function(){O()},0)});E.addListener("clearDoc",function(){setTimeout(function(){O()},0)})}})};UE.plugins["video"]=function(){var x=this;function w(G,H,C,D,z,A,F){G=u.unhtmlForUrl(G);z=u.unhtml(z);A=u.unhtml(A);H=parseInt(H,10)||0;C=parseInt(C,10)||0;var E;switch(F){case"image":E="<img "+(D?'id="'+D+'"':"")+' width="'+H+'" height="'+C+'" _url="'+G+'" class="'+A.replace(/\bvideo-js\b/,"")+'"'+' src="'+x.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+x.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(z?"float:"+z+";":"")+'" />';break;case"embed":E='<embed type="application/x-shockwave-flash" class="'+A+'" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+u.html(G)+'" width="'+H+'" height="'+C+'"'+(z?' style="float:'+z+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var B=G.substr(G.lastIndexOf(".")+1);if(B=="ogv"){B="ogg"}if(B=="mp3"){E="<audio"+(D?' id="'+D+'"':"")+' class="audio-js" '+(z?' style="float:'+z+'"':"")+' controls preload="none" style="width:100%;" src="'+G+'" ></audio>'}else{E="<video"+(D?' id="'+D+'"':"")+' class="'+A+' video-js" '+(z?' style="float:'+z+'"':"")+' controls preload="none" style="width:100%;height:200px" src="'+G+'" data-setup="{}">'+'<source src="'+G+'" type="video/'+B+'" /></video>'}}return E}function y(A,z){u.each(A.getNodesByTagName(z?"img":"embed video"),function(D){var B=D.getAttr("class");if(B&&B.indexOf("edui-faked-video")!=-1){var C=w(z?D.getAttr("_url"):D.getAttr("src"),D.getAttr("width"),D.getAttr("height"),null,D.getStyle("float")||"",B,z?"embed":"image");D.parentNode.replaceChild(UE.uNode.createElement(C),D)}if(B&&B.indexOf("edui-upload-video")!=-1){var C=w(z?D.getAttr("_url"):D.getAttr("src"),D.getAttr("width"),D.getAttr("height"),null,D.getStyle("float")||"",B,z?"video":"image");D.parentNode.replaceChild(UE.uNode.createElement(C),D)}})}x.addOutputRule(function(z){y(z,true)});x.addInputRule(function(z){y(z)});x.commands["insertvideo"]={execCommand:function(A,J,H){J=u.isArray(J)?J:[J];var B=[],D="tmpVedio",z;for(var C=0,I,F=J.length;C<F;C++){I=J[C];z=(H=="upload"?"edui-upload-video video-js vjs-default-skin":"edui-faked-video");B.push(w(I.url,I.width||420,I.height||280,D+C,null,z,"image"))}x.execCommand("inserthtml",B.join(""),true);var G=this.selection.getRange();for(var C=0,F=J.length;C<F;C++){var E=this.document.getElementById("tmpVedio"+C);e.removeAttributes(E,"id");G.selectNode(E).select();x.execCommand("imagefloat",J[C].align)}},queryCommandState:function(){var A=x.selection.getRange().getClosedNode(),z=A&&(A.className=="edui-faked-video"||A.className.indexOf("edui-upload-video")!=-1);return z?1:0}}};(function(){var x=UE.UETable=function(y){this.table=y;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(y)};x.removeSelectedClass=function(y){u.each(y,function(z){e.removeClasses(z,"selectTdClass")})};x.addSelectedClass=function(y){u.each(y,function(z){e.addClass(z,"selectTdClass")})};x.isEmptyBlock=function(z){var A=new RegExp(e.fillChar,"g");if(z[c.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(A,"").length>0){return 0}for(var y in f.$isNotEmpty){if(f.$isNotEmpty.hasOwnProperty(y)){if(z.getElementsByTagName(y).length){return 0}}}return 1};x.getWidth=function(y){if(!y){return 0}return parseInt(e.getComputedStyle(y,"width"),10)};x.getTableCellAlignState=function(y){!u.isArray(y)&&(y=[y]);var A={},B=["align","valign"],C=null,z=true;u.each(y,function(D){u.each(B,function(E){C=D.getAttribute(E);if(!A[E]&&C){A[E]=C}else{if(!A[E]||(C!==A[E])){z=false;return false}}});return z});return z?A:null};x.getTableItemsByRange=function(A){var B=A.selection.getStart();if(B&&B.id&&B.id.indexOf("_baidu_bookmark_start_")===0&&B.nextSibling){B=B.nextSibling}var z=B&&e.findParentByTagName(B,["td","th"],true),D=z&&z.parentNode,y=B&&e.findParentByTagName(B,"caption",true),C=y?y.parentNode:D&&D.parentNode.parentNode;return{cell:z,tr:D,table:C,caption:y}};x.getUETableBySelected=function(y){var z=x.getTableItemsByRange(y).table;if(z&&z.ueTable&&z.ueTable.selectedTds.length){return z.ueTable}return null};x.getDefaultValue=function(z,A){var y={thin:"0px",medium:"1px",thick:"2px"},B,E,D,F;if(!A){A=z.document.createElement("table");A.insertRow(0).insertCell(0).innerHTML="xxx";z.body.appendChild(A);var C=A.getElementsByTagName("td")[0];F=e.getComputedStyle(A,"border-left-width");B=parseInt(y[F]||F,10);F=e.getComputedStyle(C,"padding-left");E=parseInt(y[F]||F,10);F=e.getComputedStyle(C,"border-left-width");D=parseInt(y[F]||F,10);e.remove(A);return{tableBorder:B,tdPadding:E,tdBorder:D}}else{C=A.getElementsByTagName("td")[0];F=e.getComputedStyle(A,"border-left-width");B=parseInt(y[F]||F,10);F=e.getComputedStyle(C,"padding-left");E=parseInt(y[F]||F,10);F=e.getComputedStyle(C,"border-left-width");D=parseInt(y[F]||F,10);return{tableBorder:B,tdPadding:E,tdBorder:D}}};x.getUETable=function(z){var y=z.tagName.toLowerCase();z=(y=="td"||y=="th"||y=="caption")?e.findParentByTagName(z,"table",true):z;if(!z.ueTable){z.ueTable=new x(z)}return z.ueTable};x.cloneCell=function(y,A,B){if(!y||u.isString(y)){return this.table.ownerDocument.createElement(y||"td")}var z=e.hasClass(y,"selectTdClass");z&&e.removeClasses(y,"selectTdClass");var C=y.cloneNode(true);if(A){C.rowSpan=C.colSpan=1}!B&&e.removeAttributes(C,"width height");!B&&e.removeAttributes(C,"style");C.style.borderLeftStyle="";C.style.borderTopStyle="";C.style.borderLeftColor=y.style.borderRightColor;C.style.borderLeftWidth=y.style.borderRightWidth;C.style.borderTopColor=y.style.borderBottomColor;C.style.borderTopWidth=y.style.borderBottomWidth;z&&e.addClass(y,"selectTdClass");return C};x.prototype={getMaxRows:function(){var E=this.table.rows,C=1;for(var A=0,D;D=E[A];A++){var z=1;for(var B=0,y;y=D.cells[B++];){z=Math.max(y.rowSpan||1,z)}C=Math.max(z+A,C)}return C},getMaxCols:function(){var G=this.table.rows,E=0,y={};for(var B=0,F;F=G[B];B++){var z=0;for(var C=0,A;A=F.cells[C++];){z+=(A.colSpan||1);if(A.rowSpan&&A.rowSpan>1){for(var D=1;D<A.rowSpan;D++){if(!y["row_"+(B+D)]){y["row_"+(B+D)]=(A.colSpan||1)}else{y["row_"+(B+D)]++}}}}z+=y["row_"+B]||0;E=Math.max(z,E)}return E},getCellColIndex:function(y){},getHSideCell:function(y,F){try{var z=this.getCellInfo(y),D,C;var B=this.selectedTds.length,E=this.cellsRange;if((!F&&(!B?!z.colIndex:!E.beginColIndex))||(F&&(!B?(z.colIndex==(this.colsNum-1)):(E.endColIndex==this.colsNum-1)))){return null}D=!B?z.rowIndex:E.beginRowIndex;C=!F?(!B?(z.colIndex<1?0:(z.colIndex-1)):E.beginColIndex-1):(!B?z.colIndex+1:E.endColIndex+1);return this.getCell(this.indexTable[D][C].rowIndex,this.indexTable[D][C].cellIndex)}catch(A){w(A)}},getTabNextCell:function(y,D){var z=this.getCellInfo(y),E=D||z.rowIndex,A=z.colIndex+1+(z.colSpan-1),C;try{C=this.getCell(this.indexTable[E][A].rowIndex,this.indexTable[E][A].cellIndex)}catch(B){try{E=E*1+1;A=0;C=this.getCell(this.indexTable[E][A].rowIndex,this.indexTable[E][A].cellIndex)}catch(B){}}return C},getVSideCell:function(z,y,C){try{var A=this.getCellInfo(z),F,E;var D=this.selectedTds.length&&!C,G=this.cellsRange;if((!y&&(A.rowIndex==0))||(y&&(!D?(A.rowIndex+A.rowSpan>this.rowsNum-1):(G.endRowIndex==this.rowsNum-1)))){return null}F=!y?(!D?A.rowIndex-1:G.beginRowIndex-1):(!D?(A.rowIndex+A.rowSpan):G.endRowIndex+1);E=!D?A.colIndex:G.beginColIndex;return this.getCell(this.indexTable[F][E].rowIndex,this.indexTable[F][E].cellIndex)}catch(B){w(B)}},getSameEndPosCells:function(y,J){try{var C=(J.toLowerCase()==="x"),B=e.getXY(y)[C?"x":"y"]+y["offset"+(C?"Width":"Height")],G=this.table.rows,z=null,F=[];for(var D=0;D<this.rowsNum;D++){z=G[D].cells;for(var E=0,H;H=z[E++];){var I=e.getXY(H)[C?"x":"y"]+H["offset"+(C?"Width":"Height")];if(I>B&&C){break}if(y==H||B==I){if(H[C?"colSpan":"rowSpan"]==1){F.push(H)}if(C){break}}}}return F}catch(A){w(A)}},setCellContent:function(y,z){y.innerHTML=z||(c.ie?e.fillChar:"<br />")},cloneCell:x.cloneCell,getSameStartPosXCells:function(y){try{var F=e.getXY(y).x+y.offsetWidth,E=this.table.rows,z,D=[];for(var B=0;B<this.rowsNum;B++){z=E[B].cells;for(var C=0,G;G=z[C++];){var H=e.getXY(G).x;if(H>F){break}if(H==F&&G.colSpan==1){D.push(G);break}}}return D}catch(A){w(A)}},update:function(T){this.table=T||this.table;this.selectedTds=[];this.cellsRange={};this.indexTable=[];var N=this.table.rows,O=this.getMaxRows(),E=O-N.length,C=this.getMaxCols();while(E--){this.table.insertRow(N.length)}this.rowsNum=O;this.colsNum=C;for(var H=0,K=N.length;H<K;H++){this.indexTable[H]=new Array(C)}for(var M=0,L;L=N[M];M++){for(var z=0,y,A=L.cells;y=A[z];z++){if(y.rowSpan>O){y.rowSpan=O}var B=z,P=y.rowSpan||1,D=y.colSpan||1;while(this.indexTable[M][B]){B++}for(var I=0;I<P;I++){for(var J=0;J<D;J++){this.indexTable[M+I][B+J]={rowIndex:M,cellIndex:z,colIndex:B,rowSpan:P,colSpan:D}}}}}for(I=0;I<O;I++){for(J=0;J<C;J++){if(this.indexTable[I][J]===undefined){L=N[I];y=L.cells[L.cells.length-1];y=y?y.cloneNode(true):this.table.ownerDocument.createElement("td");this.setCellContent(y);if(y.colSpan!==1){y.colSpan=1}if(y.rowSpan!==1){y.rowSpan=1}L.appendChild(y);this.indexTable[I][J]={rowIndex:I,cellIndex:y.cellIndex,colIndex:J,rowSpan:1,colSpan:1}}}}var U=e.getElementsByTagName(this.table,"td"),Q=[];u.each(U,function(V){if(e.hasClass(V,"selectTdClass")){Q.push(V)}});if(Q.length){var R=Q[0],F=Q[Q.length-1],S=this.getCellInfo(R),G=this.getCellInfo(F);this.selectedTds=Q;this.cellsRange={beginRowIndex:S.rowIndex,beginColIndex:S.colIndex,endRowIndex:G.rowIndex+G.rowSpan-1,endColIndex:G.colIndex+G.colSpan-1}}if(!e.hasClass(this.table.rows[0],"firstRow")){e.addClass(this.table.rows[0],"firstRow");for(var H=1;H<this.table.rows.length;H++){e.removeClasses(this.table.rows[H],"firstRow")}}},getCellInfo:function(y){if(!y){return}var z=y.cellIndex,D=y.parentNode.rowIndex,E=this.indexTable[D],C=this.colsNum;for(var B=z;B<C;B++){var A=E[B];if(A.rowIndex===D&&A.cellIndex===z){return A}}},getCell:function(z,y){return z<this.rowsNum&&this.table.rows[z].cells[y]||null},deleteCell:function(y,A){A=typeof A=="number"?A:y.parentNode.rowIndex;var z=this.table.rows[A];z.deleteCell(y.cellIndex)},getCellsRange:function(A,C){function E(K,J,O,N){var R=K,Q=J,T=O,S=N,L,M,P;if(K>0){for(M=J;M<N;M++){L=I.indexTable[K][M];P=L.rowIndex;if(P<K){R=Math.min(P,R)}}}if(N<I.colsNum){for(P=K;P<O;P++){L=I.indexTable[P][N];M=L.colIndex+L.colSpan-1;if(M>N){S=Math.max(M,S)}}}if(O<I.rowsNum){for(M=J;M<N;M++){L=I.indexTable[O][M];P=L.rowIndex+L.rowSpan-1;if(P>O){T=Math.max(P,T)}}}if(J>0){for(P=K;P<O;P++){L=I.indexTable[P][J];M=L.colIndex;if(M<J){Q=Math.min(L.colIndex,Q)}}}if(R!=K||Q!=J||T!=O||S!=N){return E(R,Q,T,S)}else{return{beginRowIndex:K,beginColIndex:J,endRowIndex:O,endColIndex:N}}}try{var I=this,B=I.getCellInfo(A);if(A===C){return{beginRowIndex:B.rowIndex,beginColIndex:B.colIndex,endRowIndex:B.rowIndex+B.rowSpan-1,endColIndex:B.colIndex+B.colSpan-1}}var D=I.getCellInfo(C);var z=Math.min(B.rowIndex,D.rowIndex),y=Math.min(B.colIndex,D.colIndex),H=Math.max(B.rowIndex+B.rowSpan-1,D.rowIndex+D.rowSpan-1),G=Math.max(B.colIndex+B.colSpan-1,D.colIndex+D.colSpan-1);return E(z,y,H,G)}catch(F){}},getCells:function(H){this.clearSelected();var z=H.beginRowIndex,y=H.beginColIndex,D=H.endRowIndex,C=H.endColIndex,A,J,B,K={},I=[];for(var E=z;E<=D;E++){for(var F=y;F<=C;F++){A=this.indexTable[E][F];J=A.rowIndex;B=A.colIndex;var G=J+"|"+B;if(K[G]){continue}K[G]=1;if(J<E||B<F||J+A.rowSpan-1>D||B+A.colSpan-1>C){return null}I.push(this.getCell(J,A.cellIndex))}}return I},clearSelected:function(){x.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(z){var y=this.getCells(z);x.addSelectedClass(y);this.selectedTds=y;this.cellsRange=z},isFullRow:function(){var y=this.cellsRange;return(y.endColIndex-y.beginColIndex+1)==this.colsNum},isFullCol:function(){var y=this.cellsRange,A=this.table,B=A.getElementsByTagName("th"),z=y.endRowIndex-y.beginRowIndex+1;return !B.length?z==this.rowsNum:z==this.rowsNum||(z==this.rowsNum-1)},getNextCell:function(z,y,C){try{var A=this.getCellInfo(z),F,E;var D=this.selectedTds.length&&!C,G=this.cellsRange;if((!y&&(A.rowIndex==0))||(y&&(!D?(A.rowIndex+A.rowSpan>this.rowsNum-1):(G.endRowIndex==this.rowsNum-1)))){return null}F=!y?(!D?A.rowIndex-1:G.beginRowIndex-1):(!D?(A.rowIndex+A.rowSpan):G.endRowIndex+1);E=!D?A.colIndex:G.beginColIndex;return this.getCell(this.indexTable[F][E].rowIndex,this.indexTable[F][E].cellIndex)}catch(B){w(B)}},getPreviewCell:function(y,F){try{var z=this.getCellInfo(y),D,C;var B=this.selectedTds.length,E=this.cellsRange;if((!F&&(!B?!z.colIndex:!E.beginColIndex))||(F&&(!B?(z.rowIndex>(this.colsNum-1)):(E.endColIndex==this.colsNum-1)))){return null}D=!F?(!B?z.rowIndex:E.beginRowIndex):(!B?(z.rowIndex<1?0:(z.rowIndex-1)):E.beginRowIndex);C=!F?(!B?(z.colIndex<1?0:(z.colIndex-1)):E.beginColIndex-1):(!B?z.colIndex:E.endColIndex+1);return this.getCell(this.indexTable[D][C].rowIndex,this.indexTable[D][C].cellIndex)}catch(A){w(A)}},moveContent:function(z,y){if(x.isEmptyBlock(y)){return}if(x.isEmptyBlock(z)){z.innerHTML=y.innerHTML;return}var A=z.lastChild;if(A.nodeType==3||!f.$block[A.tagName]){z.appendChild(z.ownerDocument.createElement("br"))}while(A=y.firstChild){z.appendChild(A)}},mergeRight:function(y){var z=this.getCellInfo(y),C=z.colIndex+z.colSpan,B=this.indexTable[z.rowIndex][C],A=this.getCell(B.rowIndex,B.cellIndex);y.colSpan=z.colSpan+B.colSpan;y.removeAttribute("width");this.moveContent(y,A);this.deleteCell(A,B.rowIndex);this.update()},mergeDown:function(y){var z=this.getCellInfo(y),C=z.rowIndex+z.rowSpan,B=this.indexTable[C][z.colIndex],A=this.getCell(B.rowIndex,B.cellIndex);y.rowSpan=z.rowSpan+B.rowSpan;y.removeAttribute("height");this.moveContent(y,A);this.deleteCell(A,B.rowIndex);this.update()},mergeRange:function(){var G=this.cellsRange,E=this.getCell(G.beginRowIndex,this.indexTable[G.beginRowIndex][G.beginColIndex].cellIndex);if(E.tagName=="TH"&&G.endRowIndex!==G.beginRowIndex){var C=this.indexTable,D=this.getCellInfo(E);E=this.getCell(1,C[1][D.colIndex].cellIndex);G=this.getCellsRange(E,this.getCell(C[this.rowsNum-1][D.colIndex].rowIndex,C[this.rowsNum-1][D.colIndex].cellIndex))}var y=this.getCells(G);for(var B=0,z;z=y[B++];){if(z!==E){this.moveContent(E,z);this.deleteCell(z)}}E.rowSpan=G.endRowIndex-G.beginRowIndex+1;E.rowSpan>1&&E.removeAttribute("height");E.colSpan=G.endColIndex-G.beginColIndex+1;E.colSpan>1&&E.removeAttribute("width");if(E.rowSpan==this.rowsNum&&E.colSpan!=1){E.colSpan=1}if(E.colSpan==this.colsNum&&E.rowSpan!=1){var I=E.parentNode.rowIndex;if(this.table.deleteRow){for(var B=I+1,A=I+1,F=E.rowSpan;B<F;B++){this.table.deleteRow(A)}}else{for(var B=0,F=E.rowSpan-1;B<F;B++){var H=this.table.rows[I+1];H.parentNode.removeChild(H)}}E.rowSpan=1}this.update()},insertRow:function(H,I){var E=this.colsNum,J=this.table,G=J.insertRow(H),y,D=typeof I=="string"&&I.toUpperCase()=="TH";function F(L,K,M){if(L==0){var P=M.nextSibling||M.previousSibling,O=P.cells[L];if(O.tagName=="TH"){O=K.ownerDocument.createElement("th");O.appendChild(K.firstChild);M.insertBefore(O,K);e.remove(K)}}else{if(K.tagName=="TH"){var N=K.ownerDocument.createElement("td");N.appendChild(K.firstChild);M.insertBefore(N,K);e.remove(K)}}}if(H==0||H==this.rowsNum){for(var B=0;B<E;B++){y=this.cloneCell(I,true);this.setCellContent(y);y.getAttribute("vAlign")&&y.setAttribute("vAlign",y.getAttribute("vAlign"));G.appendChild(y);if(!D){F(B,y,G)}}}else{var C=this.indexTable[H],z=0;for(B=0;B<E;B++){var A=C[B];if(A.rowIndex<H){y=this.getCell(A.rowIndex,A.cellIndex);y.rowSpan=A.rowSpan+1}else{y=this.cloneCell(I,true);this.setCellContent(y);G.appendChild(y)}if(!D){F(B,y,G)}}}this.update();return G},deleteRow:function(O){var N=this.table.rows[O],G=this.indexTable[O],D=this.colsNum,E=0;for(var C=0;C<D;){var A=G[C],z=this.getCell(A.rowIndex,A.cellIndex);if(z.rowSpan>1){if(A.rowIndex==O){var B=z.cloneNode(true);B.rowSpan=z.rowSpan-1;B.innerHTML="";z.rowSpan=1;var L=O+1,K=this.table.rows[L],H,M=this.getPreviewMergedCellsNum(L,C)-E;if(M<C){H=C-M-1;e.insertAfter(K.cells[H],B)}else{if(K.cells.length){K.insertBefore(B,K.cells[0])}}E+=1}}C+=z.colSpan||1}var F=[],y={};for(C=0;C<D;C++){var Q=G[C].rowIndex,P=G[C].cellIndex,I=Q+"_"+P;if(y[I]){continue}y[I]=1;z=this.getCell(Q,P);F.push(z)}var J=[];u.each(F,function(R){if(R.rowSpan==1){R.parentNode.removeChild(R)}else{J.push(R)}});u.each(J,function(R){R.rowSpan--});N.parentNode.removeChild(N);this.update()},insertCol:function(B,I,C){var H=this.rowsNum,G=0,J,z,y=parseInt((this.table.offsetWidth-(this.colsNum+1)*20-(this.colsNum+1))/(this.colsNum+1),10),D=typeof I=="string"&&I.toUpperCase()=="TH";function F(L,K,M){if(L==0){var O=K.nextSibling||K.previousSibling;if(O.tagName=="TH"){O=K.ownerDocument.createElement("th");O.appendChild(K.firstChild);M.insertBefore(O,K);e.remove(K)}}else{if(K.tagName=="TH"){var N=K.ownerDocument.createElement("td");N.appendChild(K.firstChild);M.insertBefore(N,K);e.remove(K)}}}var E;if(B==0||B==this.colsNum){for(;G<H;G++){J=this.table.rows[G];E=J.cells[B==0?B:J.cells.length];z=this.cloneCell(I,true);this.setCellContent(z);z.setAttribute("vAlign",z.getAttribute("vAlign"));E&&z.setAttribute("width",E.getAttribute("width"));if(!B){J.insertBefore(z,J.cells[0])}else{e.insertAfter(J.cells[J.cells.length-1],z)}if(!D){F(G,z,J)}}}else{for(;G<H;G++){var A=this.indexTable[G][B];if(A.colIndex<B){z=this.getCell(A.rowIndex,A.cellIndex);z.colSpan=A.colSpan+1}else{J=this.table.rows[G];E=J.cells[A.cellIndex];z=this.cloneCell(I,true);this.setCellContent(z);z.setAttribute("vAlign",z.getAttribute("vAlign"));E&&z.setAttribute("width",E.getAttribute("width"));E?J.insertBefore(z,E):J.appendChild(z)}if(!D){F(G,z,J)}}}this.update();this.updateWidth(y,C||{tdPadding:10,tdBorder:1})},updateWidth:function(C,y){var z=this.table,B=x.getWidth(z)-y.tdPadding*2-y.tdBorder+C;if(B<z.ownerDocument.body.offsetWidth){z.setAttribute("width",B);return}var A=e.getElementsByTagName(this.table,"td th");u.each(A,function(D){D.setAttribute("width",C)})},deleteCol:function(D){var E=this.indexTable,J=this.table.rows,y=this.table.getAttribute("width"),z=0,I=this.rowsNum,A={};for(var H=0;H<I;){var F=E[H],C=F[D],G=C.rowIndex+"_"+C.colIndex;if(A[G]){continue}A[G]=1;var B=this.getCell(C.rowIndex,C.cellIndex);if(!z){z=B&&parseInt(B.offsetWidth/B.colSpan,10).toFixed(0)}if(B.colSpan>1){B.colSpan--}else{J[H].deleteCell(C.cellIndex)}H+=C.rowSpan||1}this.table.setAttribute("width",y-z);this.update()},splitToCells:function(y){var A=this,z=this.splitToRows(y);u.each(z,function(B){A.splitToCols(B)})},splitToRows:function(y){var z=this.getCellInfo(y),E=z.rowIndex,A=z.colIndex,D=[];y.rowSpan=1;D.push(y);for(var C=E,B=E+z.rowSpan;C<B;C++){if(C==E){continue}var F=this.table.rows[C],G=F.insertCell(A-this.getPreviewMergedCellsNum(C,A));G.colSpan=z.colSpan;this.setCellContent(G);G.setAttribute("vAlign",y.getAttribute("vAlign"));G.setAttribute("align",y.getAttribute("align"));if(y.style.cssText){G.style.cssText=y.style.cssText}D.push(G)}this.update();return D},getPreviewMergedCellsNum:function(D,y){var B=this.indexTable[D],C=0;for(var A=0;A<y;){var z=B[A].colSpan,E=B[A].rowIndex;C+=(z-(E==D?1:0));A+=z}return C},splitToCols:function(z){var y=(z.offsetWidth/z.colSpan-22).toFixed(0),A=this.getCellInfo(z),F=A.rowIndex,B=A.colIndex,E=[];z.colSpan=1;z.setAttribute("width",y);E.push(z);for(var D=B,C=B+A.colSpan;D<C;D++){if(D==B){continue}var G=this.table.rows[F],I=G.insertCell(this.indexTable[F][D].cellIndex+1);I.rowSpan=A.rowSpan;this.setCellContent(I);I.setAttribute("vAlign",z.getAttribute("vAlign"));I.setAttribute("align",z.getAttribute("align"));I.setAttribute("width",y);if(z.style.cssText){I.style.cssText=z.style.cssText}if(z.tagName=="TH"){var H=z.ownerDocument.createElement("th");H.appendChild(I.firstChild);H.setAttribute("vAlign",z.getAttribute("vAlign"));H.rowSpan=I.rowSpan;G.insertBefore(H,I);e.remove(I)}E.push(I)}this.update();return E},isLastCell:function(y,B,A){B=B||this.rowsNum;A=A||this.colsNum;var z=this.getCellInfo(y);return((z.rowIndex+z.rowSpan)==B)&&((z.colIndex+z.colSpan)==A)},getLastCell:function(y){y=y||this.table.getElementsByTagName("td");var B=this.getCellInfo(y[0]);var D=this,C=y[0],F=C.parentNode,z=0,A=0,E;u.each(y,function(G){if(G.parentNode==F){A+=G.colSpan||1}z+=G.rowSpan*G.colSpan||1});E=z/A;u.each(y,function(G){if(D.isLastCell(G,E,A)){C=G;return false}});return C},selectRow:function(B){var z=this.indexTable[B],C=this.getCell(z[0].rowIndex,z[0].cellIndex),y=this.getCell(z[this.colsNum-1].rowIndex,z[this.colsNum-1].cellIndex),A=this.getCellsRange(C,y);this.setSelected(A)},selectTable:function(){var z=this.table.getElementsByTagName("td"),y=this.getCellsRange(z[0],z[z.length-1]);this.setSelected(y)},setBackground:function(A,G){if(typeof G==="string"){u.each(A,function(H){H.style.backgroundColor=G})}else{if(typeof G==="object"){G=u.extend({repeat:true,colorList:["#ddd","#fff"]},G);var F=this.getCellInfo(A[0]).rowIndex,C=0,B=G.colorList,D=function(I,H,J){return I[H]?I[H]:J?I[H%I.length]:""};for(var E=0,y;y=A[E++];){var z=this.getCellInfo(y);y.style.backgroundColor=D(B,((F+C)==z.rowIndex)?C:++C,G.repeat)}}}},removeBackground:function(y){u.each(y,function(z){z.style.backgroundColor=""})}};function w(y){}})();(function(){var D=UE.UETable,y=function(E){return D.getTableItemsByRange(E)},B=function(E){return D.getUETableBySelected(E)},w=function(E,F){return D.getDefaultValue(E,F)},A=function(E){return D.getUETable(E)};UE.commands["inserttable"]={queryCommandState:function(){return y(this).table?-1:0},execCommand:function(E,J){function F(R,U){var Q=[],T=R.numRows,P=R.numCols;for(var S=0;S<T;S++){Q.push("<tr"+(S==0?' class="firstRow"':"")+">");for(var O=0;O<P;O++){Q.push('<td width="'+U+'"  vAlign="'+R.tdvalign+'" >'+(c.ie&&c.version<11?e.fillChar:"<br/>")+"</td>")}Q.push("</tr>")}return"<table><tbody>"+Q.join("")+"</tbody></table>"}if(!J){J=u.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign})}var I=this;var K=this.selection.getRange(),L=K.startContainer,H=e.findParent(L,function(O){return e.isBlockElm(O)},true)||I.body;var G=w(I),M=H.offsetWidth,N=Math.floor(M/J.numCols-G.tdPadding*2-G.tdBorder);!J.tdvalign&&(J.tdvalign=I.options.tdvalign);I.execCommand("inserthtml",F(J,N))}};UE.commands["insertparagraphbeforetable"]={queryCommandState:function(){return y(this).cell?0:-1},execCommand:function(){var F=y(this).table;if(F){var E=this.document.createElement("p");E.innerHTML=c.ie?"&nbsp;":"<br />";F.parentNode.insertBefore(E,F);this.selection.getRange().setStart(E,0).setCursor()}}};UE.commands["deletetable"]={queryCommandState:function(){var E=this.selection.getRange();return e.findParentByTagName(E.startContainer,"table",true)?0:-1},execCommand:function(E,H){var G=this.selection.getRange();H=H||e.findParentByTagName(G.startContainer,"table",true);if(H){var F=H.nextSibling;if(!F){F=e.createElement(this.document,"p",{"innerHTML":c.ie?e.fillChar:"<br/>"});H.parentNode.insertBefore(F,H)}e.remove(H);G=this.selection.getRange();if(F.nodeType==3){G.setStartBefore(F)}else{G.setStart(F,0)}G.setCursor(false,true);this.fireEvent("tablehasdeleted")}}};UE.commands["cellalign"]={queryCommandState:function(){return x(this).length?0:-1},execCommand:function(G,E){var I=x(this);if(I.length){for(var H=0,F;F=I[H++];){F.setAttribute("align",E)}}}};UE.commands["cellvalign"]={queryCommandState:function(){return x(this).length?0:-1},execCommand:function(F,I){var H=x(this);if(H.length){for(var G=0,E;E=H[G++];){E.setAttribute("vAlign",I)}}}};UE.commands["insertcaption"]={queryCommandState:function(){var E=y(this).table;if(E){return E.getElementsByTagName("caption").length==0?1:-1}return -1},execCommand:function(){var G=y(this).table;if(G){var E=this.document.createElement("caption");E.innerHTML=c.ie?e.fillChar:"<br/>";G.insertBefore(E,G.firstChild);var F=this.selection.getRange();F.setStart(E,0).setCursor()}}};UE.commands["deletecaption"]={queryCommandState:function(){var E=this.selection.getRange(),F=e.findParentByTagName(E.startContainer,"table");if(F){return F.getElementsByTagName("caption").length==0?-1:1}return -1},execCommand:function(){var F=this.selection.getRange(),G=e.findParentByTagName(F.startContainer,"table");if(G){e.remove(G.getElementsByTagName("caption")[0]);var E=this.selection.getRange();E.setStart(G.rows[0].cells[0],0).setCursor()}}};UE.commands["inserttitle"]={queryCommandState:function(){var F=y(this).table;if(F){var E=F.rows[0];return E.cells[E.cells.length-1].tagName.toLowerCase()!="th"?0:-1}return -1},execCommand:function(){var E=y(this).table;if(E){A(E).insertRow(0,"th")}var F=E.getElementsByTagName("th")[0];this.selection.getRange().setStart(F,0).setCursor(false,true)}};UE.commands["deletetitle"]={queryCommandState:function(){var F=y(this).table;if(F){var E=F.rows[0];return E.cells[E.cells.length-1].tagName.toLowerCase()=="th"?0:-1}return -1},execCommand:function(){var E=y(this).table;if(E){e.remove(E.rows[0])}var F=E.getElementsByTagName("td")[0];this.selection.getRange().setStart(F,0).setCursor(false,true)}};UE.commands["inserttitlecol"]={queryCommandState:function(){var F=y(this).table;if(F){var E=F.rows[F.rows.length-1];return E.getElementsByTagName("th").length?-1:0}return -1},execCommand:function(E){var F=y(this).table;if(F){A(F).insertCol(0,"th")}C(F,this);var G=F.getElementsByTagName("th")[0];this.selection.getRange().setStart(G,0).setCursor(false,true)}};UE.commands["deletetitlecol"]={queryCommandState:function(){var F=y(this).table;if(F){var E=F.rows[F.rows.length-1];return E.getElementsByTagName("th").length?0:-1}return -1},execCommand:function(){var F=y(this).table;if(F){for(var E=0;E<F.rows.length;E++){e.remove(F.rows[E].children[0])}}C(F,this);var G=F.getElementsByTagName("td")[0];this.selection.getRange().setStart(G,0).setCursor(false,true)}};UE.commands["mergeright"]={queryCommandState:function(G){var L=y(this),K=L.table,E=L.cell;if(!K||!E){return -1}var M=A(K);if(M.selectedTds.length){return -1}var F=M.getCellInfo(E),J=F.colIndex+F.colSpan;if(J>=M.colsNum){return -1}var I=M.indexTable[F.rowIndex][J],H=K.rows[I.rowIndex].cells[I.cellIndex];if(!H||E.tagName!=H.tagName){return -1}return(I.rowIndex==F.rowIndex&&I.rowSpan==F.rowSpan)?0:-1},execCommand:function(G){var H=this.selection.getRange(),E=H.createBookmark(true);var F=y(this).cell,I=A(F);I.mergeRight(F);H.moveToBookmark(E).select()}};UE.commands["mergedown"]={queryCommandState:function(G){var L=y(this),K=L.table,E=L.cell;if(!K||!E){return -1}var M=A(K);if(M.selectedTds.length){return -1}var F=M.getCellInfo(E),J=F.rowIndex+F.rowSpan;if(J>=M.rowsNum){return -1}var I=M.indexTable[J][F.colIndex],H=K.rows[I.rowIndex].cells[I.cellIndex];if(!H||E.tagName!=H.tagName){return -1}return(I.colIndex==F.colIndex&&I.colSpan==F.colSpan)?0:-1},execCommand:function(){var G=this.selection.getRange(),E=G.createBookmark(true);var F=y(this).cell,H=A(F);H.mergeDown(F);G.moveToBookmark(E).select()}};UE.commands["mergecells"]={queryCommandState:function(){return B(this)?0:-1},execCommand:function(){var G=B(this);if(G&&G.selectedTds.length){var E=G.selectedTds[0];G.mergeRange();var F=this.selection.getRange();if(e.isEmptyBlock(E)){F.setStart(E,0).collapse(true)}else{F.selectNodeContents(E)}F.select()}}};UE.commands["insertrow"]={queryCommandState:function(){var F=y(this),E=F.cell;return E&&(E.tagName=="TD"||(E.tagName=="TH"&&F.tr!==F.table.rows[0]))&&A(F.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var K=this.selection.getRange(),E=K.createBookmark(true);var M=y(this),F=M.cell,L=M.table,N=A(L),G=N.getCellInfo(F);if(!N.selectedTds.length){N.insertRow(G.rowIndex,F)}else{var J=N.cellsRange;for(var H=0,I=J.endRowIndex-J.beginRowIndex+1;H<I;H++){N.insertRow(J.beginRowIndex,F)}}K.moveToBookmark(E).select();if(L.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",L)}}};UE.commands["insertrownext"]={queryCommandState:function(){var F=y(this),E=F.cell;return E&&(E.tagName=="TD")&&A(F.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var K=this.selection.getRange(),E=K.createBookmark(true);var M=y(this),F=M.cell,L=M.table,N=A(L),G=N.getCellInfo(F);if(!N.selectedTds.length){N.insertRow(G.rowIndex+G.rowSpan,F)}else{var J=N.cellsRange;for(var H=0,I=J.endRowIndex-J.beginRowIndex+1;H<I;H++){N.insertRow(J.endRowIndex+1,F)}}K.moveToBookmark(E).select();if(L.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",L)}}};UE.commands["deleterow"]={queryCommandState:function(){var E=y(this);return E.cell?0:-1},execCommand:function(){var E=y(this).cell,O=A(E),G=O.cellsRange,F=O.getCellInfo(E),L=O.getVSideCell(E),J=O.getVSideCell(E,true),M=this.selection.getRange();if(u.isEmptyObject(G)){O.deleteRow(F.rowIndex)}else{for(var H=G.beginRowIndex;H<G.endRowIndex+1;H++){O.deleteRow(G.beginRowIndex)}}var N=O.table;if(!N.getElementsByTagName("td").length){var K=N.nextSibling;e.remove(N);if(K){M.setStart(K,0).setCursor(false,true)}}else{if(F.rowSpan==1||F.rowSpan==G.endRowIndex-G.beginRowIndex+1){if(J||L){M.selectNodeContents(J||L).setCursor(false,true)}}else{var I=O.getCell(F.rowIndex,O.indexTable[F.rowIndex][F.colIndex].cellIndex);if(I){M.selectNodeContents(I).setCursor(false,true)}}}if(N.getAttribute("interlaced")==="enabled"){this.fireEvent("interlacetable",N)}}};UE.commands["insertcol"]={queryCommandState:function(F){var G=y(this),E=G.cell;return E&&(E.tagName=="TD"||(E.tagName=="TH"&&E!==G.tr.cells[0]))&&A(G.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(H){var L=this.selection.getRange(),E=L.createBookmark(true);if(this.queryCommandState(H)==-1){return}var F=y(this).cell,M=A(F),G=M.getCellInfo(F);if(!M.selectedTds.length){M.insertCol(G.colIndex,F)}else{var K=M.cellsRange;for(var I=0,J=K.endColIndex-K.beginColIndex+1;I<J;I++){M.insertCol(K.beginColIndex,F)}}L.moveToBookmark(E).select(true)}};UE.commands["insertcolnext"]={queryCommandState:function(){var F=y(this),E=F.cell;return E&&A(F.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var K=this.selection.getRange(),E=K.createBookmark(true);var F=y(this).cell,L=A(F),G=L.getCellInfo(F);if(!L.selectedTds.length){L.insertCol(G.colIndex+G.colSpan,F)}else{var J=L.cellsRange;for(var H=0,I=J.endColIndex-J.beginColIndex+1;H<I;H++){L.insertCol(J.endColIndex+1,F)}}K.moveToBookmark(E).select()}};UE.commands["deletecol"]={queryCommandState:function(){var E=y(this);return E.cell?0:-1},execCommand:function(){var E=y(this).cell,N=A(E),K=N.cellsRange,F=N.getCellInfo(E),J=N.getHSideCell(E),H=N.getHSideCell(E,true);if(u.isEmptyObject(K)){N.deleteCol(F.colIndex)}else{for(var G=K.beginColIndex;G<K.endColIndex+1;G++){N.deleteCol(K.beginColIndex)}}var M=N.table,L=this.selection.getRange();if(!M.getElementsByTagName("td").length){var I=M.nextSibling;e.remove(M);if(I){L.setStart(I,0).setCursor(false,true)}}else{if(e.inDoc(E,this.document)){L.setStart(E,0).setCursor(false,true)}else{if(H&&e.inDoc(H,this.document)){L.selectNodeContents(H).setCursor(false,true)}else{if(J&&e.inDoc(J,this.document)){L.selectNodeContents(J).setCursor(true,true)}}}}}};UE.commands["splittocells"]={queryCommandState:function(){var F=y(this),E=F.cell;if(!E){return -1}var G=A(F.table);if(G.selectedTds.length>0){return -1}return E&&(E.colSpan>1||E.rowSpan>1)?0:-1},execCommand:function(){var G=this.selection.getRange(),E=G.createBookmark(true);var F=y(this).cell,H=A(F);H.splitToCells(F);G.moveToBookmark(E).select()}};UE.commands["splittorows"]={queryCommandState:function(){var F=y(this),E=F.cell;if(!E){return -1}var G=A(F.table);if(G.selectedTds.length>0){return -1}return E&&E.rowSpan>1?0:-1},execCommand:function(){var G=this.selection.getRange(),E=G.createBookmark(true);var F=y(this).cell,H=A(F);H.splitToRows(F);G.moveToBookmark(E).select()}};UE.commands["splittocols"]={queryCommandState:function(){var F=y(this),E=F.cell;if(!E){return -1}var G=A(F.table);if(G.selectedTds.length>0){return -1}return E&&E.colSpan>1?0:-1},execCommand:function(){var G=this.selection.getRange(),E=G.createBookmark(true);var F=y(this).cell,H=A(F);H.splitToCols(F);G.moveToBookmark(E).select()}};UE.commands["adaptbytext"]=UE.commands["adaptbywindow"]={queryCommandState:function(){return y(this).table?0:-1},execCommand:function(F){var H=y(this),G=H.table;if(G){if(F=="adaptbywindow"){C(G,this)}else{var E=e.getElementsByTagName(G,"td th");u.each(E,function(I){I.removeAttribute("width")});G.removeAttribute("width")}}}};UE.commands["averagedistributecol"]={queryCommandState:function(){var E=B(this);if(!E){return -1}return E.isFullRow()||E.isFullCol()?0:-1},execCommand:function(E){var G=this,I=B(G);function F(){var Q=I.table,J,P=0,L=0,R=w(G,Q);if(I.isFullRow()){P=Q.offsetWidth;L=I.colsNum}else{var K=I.cellsRange.beginColIndex,M=I.cellsRange.endColIndex,O;for(var N=K;N<=M;){O=I.selectedTds[N];P+=O.offsetWidth;N+=O.colSpan;L+=1}}J=Math.ceil(P/L)-R.tdBorder*2-R.tdPadding*2;return J}function H(J){u.each(e.getElementsByTagName(I.table,"th"),function(L){L.setAttribute("width","")});var K=I.isFullRow()?e.getElementsByTagName(I.table,"td"):I.selectedTds;u.each(K,function(L){if(L.colSpan==1){L.setAttribute("width",J)}})}if(I&&I.selectedTds.length){H(F())}}};UE.commands["averagedistributerow"]={queryCommandState:function(){var E=B(this);if(!E){return -1}if(E.selectedTds&&/th/ig.test(E.selectedTds[0].tagName)){return -1}return E.isFullRow()||E.isFullCol()?0:-1},execCommand:function(E){var G=this,I=B(G);function F(){var J,Q,R=0,S=I.table,T=w(G,S),U=parseInt(e.getComputedStyle(S.getElementsByTagName("td")[0],"padding-top"));if(I.isFullCol()){var L=e.getElementsByTagName(S,"caption"),V=e.getElementsByTagName(S,"th"),M,W;if(L.length>0){M=L[0].offsetHeight}if(V.length>0){W=V[0].offsetHeight}R=S.offsetHeight-(M||0)-(W||0);Q=V.length==0?I.rowsNum:(I.rowsNum-1)}else{var K=I.cellsRange.beginRowIndex,O=I.cellsRange.endRowIndex,N=0,X=e.getElementsByTagName(S,"tr");for(var P=K;P<=O;P++){R+=X[P].offsetHeight;N+=1}Q=N}if(c.ie&&c.version<9){J=Math.ceil(R/Q)}else{J=Math.ceil(R/Q)-T.tdBorder*2-U*2}return J}function H(J){var K=I.isFullCol()?e.getElementsByTagName(I.table,"td"):I.selectedTds;u.each(K,function(L){if(L.rowSpan==1){L.setAttribute("height",J)}})}if(I&&I.selectedTds.length){H(F())}}};UE.commands["cellalignment"]={queryCommandState:function(){return y(this).table?0:-1},execCommand:function(F,G){var H=this,J=B(H);if(!J){var I=H.selection.getStart(),E=I&&e.findParentByTagName(I,["td","th","caption"],true);if(!/caption/ig.test(E.tagName)){e.setAttributes(E,G)}else{E.style.textAlign=G.align;E.style.verticalAlign=G.vAlign}H.selection.getRange().setCursor(true)}else{u.each(J.selectedTds,function(K){e.setAttributes(K,G)})}},queryCommandValue:function(G){var E=y(this).cell;if(!E){E=x(this)[0]}if(!E){return null}else{var F=UE.UETable.getUETable(E).selectedTds;!F.length&&(F=E);return UE.UETable.getTableCellAlignState(F)}}};UE.commands["tablealignment"]={queryCommandState:function(){if(c.ie&&c.version<8){return -1}return y(this).table?0:-1},execCommand:function(E,I){var F=this,G=F.selection.getStart(),H=G&&e.findParentByTagName(G,["table"],true);if(H){H.setAttribute("align",I)}}};UE.commands["edittable"]={queryCommandState:function(){return y(this).table?0:-1},execCommand:function(F,G){var H=this.selection.getRange(),I=e.findParentByTagName(H.startContainer,"table");if(I){var E=e.getElementsByTagName(I,"td").concat(e.getElementsByTagName(I,"th"),e.getElementsByTagName(I,"caption"));u.each(E,function(J){J.style.borderColor=G})}}};UE.commands["edittd"]={queryCommandState:function(){return y(this).table?0:-1},execCommand:function(G,E){var H=this,J=B(H);if(!J){var I=H.selection.getStart(),F=I&&e.findParentByTagName(I,["td","th","caption"],true);if(F){F.style.backgroundColor=E}}else{u.each(J.selectedTds,function(K){K.style.backgroundColor=E})}}};UE.commands["settablebackground"]={queryCommandState:function(){return x(this).length>1?0:-1},execCommand:function(F,H){var E,G;E=x(this);G=A(E[0]);G.setBackground(E,H)}};UE.commands["cleartablebackground"]={queryCommandState:function(){var F=x(this);if(!F.length){return -1}for(var G=0,E;E=F[G++];){if(E.style.backgroundColor!==""){return 0}}return -1},execCommand:function(){var E=x(this),F=A(E[0]);F.removeBackground(E)}};UE.commands["interlacetable"]=UE.commands["uninterlacetable"]={queryCommandState:function(E){var G=y(this).table;if(!G){return -1}var F=G.getAttribute("interlaced");if(E=="interlacetable"){return(F==="enabled")?-1:0}else{return(!F||F==="disabled")?-1:0}},execCommand:function(F,E){var G=y(this).table;if(F=="interlacetable"){G.setAttribute("interlaced","enabled");this.fireEvent("interlacetable",G,E)}else{G.setAttribute("interlaced","disabled");this.fireEvent("uninterlacetable",G)}}};UE.commands["setbordervisible"]={queryCommandState:function(E){var F=y(this).table;if(!F){return -1}return 0},execCommand:function(){var E=y(this).table;u.each(e.getElementsByTagName(E,"td"),function(F){F.style.borderWidth="1px";F.style.borderStyle="solid"})}};function C(F,E){var G=e.getElementsByTagName(F,"td th");u.each(G,function(I){I.removeAttribute("width")});F.setAttribute("width",z(E,true,w(E,F)));var H=[];setTimeout(function(){u.each(G,function(I){(I.colSpan==1)&&H.push(I.offsetWidth)});u.each(G,function(J,I){(J.colSpan==1)&&J.setAttribute("width",H[I]+"")})},0)}function z(G,H,F){var E=G.body;return E.offsetWidth-(H?parseInt(e.getComputedStyle(E,"margin-left"),10)*2:0)-F.tableBorder*2-(G.options.offsetWidth||0)}function x(F){var E=y(F).cell;if(E){var G=A(E);return G.selectedTds.length?G.selectedTds:[E]}else{return[]}}})();UE.plugins["table"]=function(){var ak=this,aM=null,aK=null,aL=null,y=5,aj=false,x=5,at=10,aE=0,aQ=null,H=360,aR=UE.UETable,ac=function(aS){return aR.getUETable(aS)},ad=function(aS){return aR.getUETableBySelected(aS)},P=function(aS,aT){return aR.getDefaultValue(aS,aT)},ax=function(aS){return aR.removeSelectedClass(aS)};function aC(aS){}ak.ready(function(){var aS=this;var aT=aS.selection.getText;aS.selection.getText=function(){var aV=ad(aS);if(aV){var aU="";u.each(aV.selectedTds,function(aW){aU+=aW[c.ie?"innerText":"textContent"]});return aU}else{return aT.call(aS.selection)}}});var aF=null,G=null,av="",au=false,I=null,L=false,K=null,M=null;var am=false,ar=true;ak.setOpt({"maxColNum":20,"maxRowNum":100,"defaultCols":5,"defaultRows":5,"tdvalign":"top","cursorpath":ak.options.UEDITOR_HOME_URL+"themes/default/images/cursor_","tableDragable":false,"classList":["ue-table-interlace-color-single","ue-table-interlace-color-double"]});ak.getUETable=ac;var D={"deletetable":1,"inserttable":1,"cellvalign":1,"insertcaption":1,"deletecaption":1,"inserttitle":1,"deletetitle":1,"mergeright":1,"mergedown":1,"mergecells":1,"insertrow":1,"insertrownext":1,"deleterow":1,"insertcol":1,"insertcolnext":1,"deletecol":1,"splittocells":1,"splittorows":1,"splittocols":1,"adaptbytext":1,"adaptbywindow":1,"adaptbycustomer":1,"insertparagraph":1,"insertparagraphbeforetable":1,"averagedistributecol":1,"averagedistributerow":1};ak.ready(function(){u.cssRule("table",".selectTdClass{background-color:#edf5fa !important}"+"table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}"+"table{margin-bottom:10px;border-collapse:collapse;display:table;}"+"td,th{padding: 5px 10px;border: 1px solid #DDD;}"+"caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+"th{border-top:1px solid #BBB;background-color:#F7F7F7;}"+"table tr.firstRow th{border-top-width:2px;}"+".ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }"+"td p{margin:0;padding:0;}",ak.document);var aW,aT,aU;ak.addListener("keydown",function(a1,a2){var a6=this;var a5=a2.keyCode||a2.which;if(a5==8){var bd=ad(a6);if(bd&&bd.selectedTds.length){if(bd.isFullCol()){a6.execCommand("deletecol")}else{if(bd.isFullRow()){a6.execCommand("deleterow")}else{a6.fireEvent("delcells")}}e.preventDefault(a2)}var aY=e.findParentByTagName(a6.selection.getStart(),"caption",true),a8=a6.selection.getRange();if(a8.collapsed&&aY&&ai(aY)){a6.fireEvent("saveScene");var bb=aY.parentNode;e.remove(aY);if(bb){a8.setStart(bb.rows[0].cells[0],0).setCursor(false,true)}a6.fireEvent("saveScene")}}if(a5==46){bd=ad(a6);if(bd){a6.fireEvent("saveScene");for(var a4=0,a0;a0=bd.selectedTds[a4++];){e.fillNode(a6.document,a0)}a6.fireEvent("saveScene");e.preventDefault(a2)}}if(a5==13){var a9=a6.selection.getRange(),aY=e.findParentByTagName(a9.startContainer,"caption",true);if(aY){var bb=e.findParentByTagName(aY,"table");if(!a9.collapsed){a9.deleteContents();a6.fireEvent("saveScene")}else{if(aY){a9.setStart(bb.rows[0].cells[0],0).setCursor(false,true)}}e.preventDefault(a2);return}if(a9.collapsed){var bb=e.findParentByTagName(a9.startContainer,"table");if(bb){var aZ=bb.rows[0].cells[0],ba=e.findParentByTagName(a6.selection.getStart(),["td","th"],true),a7=bb.previousSibling;if(aZ===ba&&(!a7||a7.nodeType==1&&a7.tagName=="TABLE")&&e.isStartInblock(a9)){var a3=e.findParent(a6.selection.getStart(),function(be){return e.isBlockElm(be)},true);if(a3&&(/t(h|d)/i.test(a3.tagName)||a3===ba.firstChild)){a6.execCommand("insertparagraphbeforetable");e.preventDefault(a2)}}}}}if((a2.ctrlKey||a2.metaKey)&&a2.keyCode=="67"){aW=null;var bd=ad(a6);if(bd){var bc=bd.selectedTds;aT=bd.isFullCol();aU=bd.isFullRow();aW=[[bd.cloneCell(bc[0],null,true)]];for(var a4=1,a0;a0=bc[a4];a4++){if(a0.parentNode!==bc[a4-1].parentNode){aW.push([bd.cloneCell(a0,null,true)])}else{aW[aW.length-1].push(bd.cloneCell(a0,null,true))}}}}});ak.addListener("tablehasdeleted",function(){aO(this,false,"",null);if(I){e.remove(I)}});ak.addListener("beforepaste",function(a3,a6){var ba=this;var bc=ba.selection.getRange();if(e.findParentByTagName(bc.startContainer,"caption",true)){var a5=ba.document.createElement("div");a5.innerHTML=a6.html;a6.html=a5[c.ie9below?"innerText":"textContent"];return}var be=ad(ba);if(aW){ba.fireEvent("saveScene");var bc=ba.selection.getRange();var bg=e.findParentByTagName(bc.startContainer,["td","th"],true),bh,bb;if(bg){var bj=ac(bg);if(aU){var bd=bj.getCellInfo(bg).rowIndex;if(bg.tagName=="TH"){bd++}for(var a7=0,a0;a0=aW[a7++];){var bi=bj.insertRow(bd++,"td");for(var a8=0,a1;a1=a0[a8];a8++){var aY=bi.cells[a8];if(!aY){aY=bi.insertCell(a8)}aY.innerHTML=a1.innerHTML;a1.getAttribute("width")&&aY.setAttribute("width",a1.getAttribute("width"));a1.getAttribute("vAlign")&&aY.setAttribute("vAlign",a1.getAttribute("vAlign"));a1.getAttribute("align")&&aY.setAttribute("align",a1.getAttribute("align"));a1.style.cssText&&(aY.style.cssText=a1.style.cssText)}for(var a8=0,a1;a1=bi.cells[a8];a8++){if(!a0[a8]){break}a1.innerHTML=a0[a8].innerHTML;a0[a8].getAttribute("width")&&a1.setAttribute("width",a0[a8].getAttribute("width"));a0[a8].getAttribute("vAlign")&&a1.setAttribute("vAlign",a0[a8].getAttribute("vAlign"));a0[a8].getAttribute("align")&&a1.setAttribute("align",a0[a8].getAttribute("align"));a0[a8].style.cssText&&(a1.style.cssText=a0[a8].style.cssText)}}}else{if(aT){aZ=bj.getCellInfo(bg);var a9=0;for(var a8=0,a0=aW[0],a1;a1=a0[a8++];){a9+=a1.colSpan||1}ba.__hasEnterExecCommand=true;for(a7=0;a7<a9;a7++){ba.execCommand("insertcol")}ba.__hasEnterExecCommand=false;bg=bj.table.rows[0].cells[aZ.cellIndex];if(bg.tagName=="TH"){bg=bj.table.rows[1].cells[aZ.cellIndex]}}for(var a7=0,a0;a0=aW[a7++];){bh=bg;for(var a8=0,a1;a1=a0[a8++];){if(bg){bg.innerHTML=a1.innerHTML;a1.getAttribute("width")&&bg.setAttribute("width",a1.getAttribute("width"));a1.getAttribute("vAlign")&&bg.setAttribute("vAlign",a1.getAttribute("vAlign"));a1.getAttribute("align")&&bg.setAttribute("align",a1.getAttribute("align"));a1.style.cssText&&(bg.style.cssText=a1.style.cssText);bb=bg;bg=bg.nextSibling}else{var a2=a1.cloneNode(true);e.removeAttributes(a2,["class","rowSpan","colSpan"]);bb.parentNode.appendChild(a2)}}bg=bj.getNextCell(bh,true,true);if(!aW[a7]){break}if(!bg){var aZ=bj.getCellInfo(bh);bj.table.insertRow(bj.table.rows.length);bj.update();bg=bj.getVSideCell(bh,true)}}}bj.update()}else{be=ba.document.createElement("table");for(var a7=0,a0;a0=aW[a7++];){var bi=be.insertRow(be.rows.length);for(var a8=0,a1;a1=a0[a8++];){a2=aR.cloneCell(a1,null,true);e.removeAttributes(a2,["class"]);bi.appendChild(a2)}if(a8==2&&a2.rowSpan>1){a2.rowSpan=1}}var a4=P(ba),bk=ba.body.offsetWidth-(ar?parseInt(e.getComputedStyle(ba.body,"margin-left"),10)*2:0)-a4.tableBorder*2-(ba.options.offsetWidth||0);ba.execCommand("insertHTML","<table  "+(aT&&aU?'width="'+bk+'"':"")+">"+be.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}ba.fireEvent("contentchange");ba.fireEvent("saveScene");a6.html="";return true}else{var a5=ba.document.createElement("div"),bf;a5.innerHTML=a6.html;bf=a5.getElementsByTagName("table");if(e.findParentByTagName(ba.selection.getStart(),"table")){u.each(bf,function(bl){e.remove(bl)});if(e.findParentByTagName(ba.selection.getStart(),"caption",true)){a5.innerHTML=a5[c.ie?"innerText":"textContent"]}}else{u.each(bf,function(bl){az(bl,true);e.removeAttributes(bl,["style","border"]);u.each(e.getElementsByTagName(bl,"td"),function(bm){if(ai(bm)){e.fillNode(ba.document,bm)}az(bm,true)})})}a6.html=a5.innerHTML}});ak.addListener("afterpaste",function(){u.each(e.getElementsByTagName(ak.body,"table"),function(aZ){if(aZ.offsetWidth>ak.body.offsetWidth){var aY=P(ak,aZ);aZ.style.width=ak.body.offsetWidth-(ar?parseInt(e.getComputedStyle(ak.body,"margin-left"),10)*2:0)-aY.tableBorder*2-(ak.options.offsetWidth||0)+"px"}})});ak.addListener("blur",function(){aW=null});var aX;ak.addListener("keydown",function(){clearTimeout(aX);aX=setTimeout(function(){var aZ=ak.selection.getRange(),aY=e.findParentByTagName(aZ.startContainer,["th","td"],true);if(aY){var a0=aY.parentNode.parentNode.parentNode;if(a0.offsetWidth>a0.getAttribute("width")){aY.style.wordBreak="break-all"}}},100)});ak.addListener("selectionchange",function(){aO(ak,false,"",null)});ak.addListener("contentchange",function(){var aY=this;af(aY);if(ad(aY)){return}var aZ=aY.selection.getRange();var a0=aZ.startContainer;a0=e.findParentByTagName(a0,["td","th"],true);u.each(e.getElementsByTagName(aY.document,"table"),function(a1){if(aY.fireEvent("excludetable",a1)===true){return}a1.ueTable=new aR(a1);a1.onmouseover=function(){aY.fireEvent("tablemouseover",a1)};a1.onmousemove=function(){aY.fireEvent("tablemousemove",a1);aY.options.tableDragable&&aN(true,this,aY);u.defer(function(){aY.fireEvent("contentchange",50)},true)};a1.onmouseout=function(){aY.fireEvent("tablemouseout",a1);aO(aY,false,"",null);af(aY)};a1.onclick=function(a6){a6=aY.window.event||a6;var a9=S(a6.target||a6.srcElement);if(!a9){return}var ba=ac(a9),a8=ba.table,a2=ba.getCellInfo(a9),a3,a7=aY.selection.getRange();if(ag(a8,a9,a6,true)){var a4=ba.getCell(ba.indexTable[ba.rowsNum-1][a2.colIndex].rowIndex,ba.indexTable[ba.rowsNum-1][a2.colIndex].cellIndex);if(a6.shiftKey&&ba.selectedTds.length){if(ba.selectedTds[0]!==a4){a3=ba.getCellsRange(ba.selectedTds[0],a4);ba.setSelected(a3)}else{a7&&a7.selectNodeContents(a4).select()}}else{if(a9!==a4){a3=ba.getCellsRange(a9,a4);ba.setSelected(a3)}else{a7&&a7.selectNodeContents(a4).select()}}return}if(ag(a8,a9,a6)){var a5=ba.getCell(ba.indexTable[a2.rowIndex][ba.colsNum-1].rowIndex,ba.indexTable[a2.rowIndex][ba.colsNum-1].cellIndex);if(a6.shiftKey&&ba.selectedTds.length){if(ba.selectedTds[0]!==a5){a3=ba.getCellsRange(ba.selectedTds[0],a5);ba.setSelected(a3)}else{a7&&a7.selectNodeContents(a5).select()}}else{if(a9!==a5){a3=ba.getCellsRange(a9,a5);ba.setSelected(a3)}else{a7&&a7.selectNodeContents(a5).select()}}}}});aG(aY,true)});e.on(ak.document,"mousemove",ao);e.on(ak.document,"mouseout",function(aY){var aZ=aY.target||aY.srcElement;if(aZ.tagName=="TABLE"){aO(ak,false,"",null)}});ak.addListener("interlacetable",function(a5,a4,aY){if(!a4){return}var a2=this,a3=a4.rows,a1=a3.length,aZ=function(a7,a6,a8){return a7[a6]?a7[a6]:a8?a7[a6%a7.length]:""};for(var a0=0;a0<a1;a0++){a3[a0].className=aZ(aY||a2.options.classList,a0,true)}});ak.addListener("uninterlacetable",function(a4,a3){if(!a3){return}var a1=this,a2=a3.rows,aY=a1.options.classList,a0=a2.length;for(var aZ=0;aZ<a0;aZ++){e.removeClasses(a2[aZ],aY)}});ak.addListener("mousedown",an);ak.addListener("mouseup",aq);e.on(ak.body,"dragstart",function(aY){aq.call(ak,"dragstart",aY)});ak.addOutputRule(function(aY){u.each(aY.getNodesByTagName("div"),function(aZ){if(aZ.getAttr("id")=="ue_tableDragLine"){aZ.parentNode.removeChild(aZ)}})});var aS=0;ak.addListener("mousedown",function(){aS=0});ak.addListener("tabkeydown",function(){var a1=this.selection.getRange(),aZ=a1.getCommonAncestor(true,true),a2=e.findParentByTagName(aZ,"table");if(a2){if(e.findParentByTagName(aZ,"caption",true)){var aY=e.getElementsByTagName(a2,"th td");if(aY&&aY.length){a1.setStart(aY[0],0).setCursor(false,true)}}else{var aY=e.findParentByTagName(aZ,["td","th"],true),a3=ac(aY);aS=aY.rowSpan>1?aS:a3.getCellInfo(aY).rowIndex;var a0=a3.getTabNextCell(aY,aS);if(a0){if(ai(a0)){a1.setStart(a0,0).setCursor(false,true)}else{a1.selectNodeContents(a0).select()}}else{ak.fireEvent("saveScene");ak.__hasEnterExecCommand=true;this.execCommand("insertrownext");ak.__hasEnterExecCommand=false;a1=this.selection.getRange();a1.setStart(a2.rows[a2.rows.length-1].cells[0],0).setCursor();ak.fireEvent("saveScene")}}return true}});c.ie&&ak.addListener("selectionchange",function(){aO(this,false,"",null)});ak.addListener("keydown",function(a2,aY){var a0=this;var aZ=aY.keyCode||aY.which;if(aZ==8||aZ==46){return}var a1=!aY.ctrlKey&&!aY.metaKey&&!aY.shiftKey&&!aY.altKey;a1&&ax(e.getElementsByTagName(a0.body,"td"));var a3=ad(a0);if(!a3){return}a1&&a3.clearSelected()});ak.addListener("beforegetcontent",function(){aG(this,false);c.ie&&u.each(this.document.getElementsByTagName("caption"),function(aY){if(e.isEmptyNode(aY)){aY.innerHTML="&nbsp;"}})});ak.addListener("aftergetcontent",function(){aG(this,true)});ak.addListener("getAllHtml",function(){ax(ak.document.getElementsByTagName("td"))});ak.addListener("fullscreenchanged",function(a1,aY){if(!aY){var aZ=this.body.offsetWidth/document.body.offsetWidth,a0=e.getElementsByTagName(this.body,"table");u.each(a0,function(a4){if(a4.offsetWidth<ak.body.offsetWidth){return false}var a6=e.getElementsByTagName(a4,"td"),a2=[];u.each(a6,function(a7){a2.push(a7.offsetWidth)});for(var a3=0,a5;a5=a6[a3];a3++){a5.setAttribute("width",Math.floor(a2[a3]*aZ))}a4.setAttribute("width",Math.floor(aa(ak,ar,P(ak))))})}});var aV=ak.execCommand;ak.execCommand=function(aZ,a1){var a5=this,aY=arguments;aZ=aZ.toLowerCase();var bb=ad(a5),ba,a6=new d.Range(a5.document),a0=a5.commands[aZ]||UE.commands[aZ],a7;if(!a0){return}if(bb&&!D[aZ]&&!a0.notNeedUndo&&!a5.__hasEnterExecCommand){a5.__hasEnterExecCommand=true;a5.fireEvent("beforeexeccommand",aZ);ba=bb.selectedTds;var a3=-2,a4=-2,bc,a8;for(var a2=0,a9;a9=ba[a2];a2++){if(ai(a9)){a6.setStart(a9,0).setCursor(false,true)}else{a6.selectNode(a9).select(true)}a8=a5.queryCommandState(aZ);bc=a5.queryCommandValue(aZ);if(a8!=-1){if(a3!==a8||a4!==bc){a5._ignoreContentChange=true;a7=aV.apply(a5,arguments);a5._ignoreContentChange=false}a3=a5.queryCommandState(aZ);a4=a5.queryCommandValue(aZ);if(e.isEmptyBlock(a9)){e.fillNode(a5.document,a9)}}}a6.setStart(ba[0],0).shrinkBoundary(true).setCursor(false,true);a5.fireEvent("contentchange");a5.fireEvent("afterexeccommand",aZ);a5.__hasEnterExecCommand=false;a5._selectionChange()}else{a7=aV.apply(a5,arguments)}return a7}});function az(aS,aT){ay(aS,"width",true);ay(aS,"height",true)}function ay(aS,aU,aT){if(aS.style[aU]){aT&&aS.setAttribute(aU,parseInt(aS.style[aU],10));aS.style[aU]=""}}function S(aS){if(aS.tagName=="TD"||aS.tagName=="TH"){return aS}var aT;if(aT=e.findParentByTagName(aS,"td",true)||e.findParentByTagName(aS,"th",true)){return aT}return null}function ai(aT){var aU=new RegExp(e.fillChar,"g");if(aT[c.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(aU,"").length>0){return 0}for(var aS in f.$isNotEmpty){if(aT.getElementsByTagName(aS).length){return 0}}return 1}function al(aS){if(aS.pageX||aS.pageY){return{x:aS.pageX,y:aS.pageY}}return{x:aS.clientX+ak.document.body.scrollLeft-ak.document.body.clientLeft,y:aS.clientY+ak.document.body.scrollTop-ak.document.body.clientTop}}function ao(aU){if(ah()){return}try{var aY=S(aU.target||aU.srcElement),aV;if(aj){ak.body.style.webkitUserSelect="none";if(Math.abs(aQ.x-aU.clientX)>at||Math.abs(aQ.y-aU.clientY)>at){B();aj=false;aE=0;aH(aU)}}if(av&&M){aE=0;ak.body.style.webkitUserSelect="none";ak.selection.getNative()[c.ie9below?"empty":"removeAllRanges"]();aV=al(aU);aO(ak,true,av,aV,aY);if(av=="h"){K.style.left=T(M,aU)+"px"}else{if(av=="v"){K.style.top=U(M,aU)+"px"}}return}if(aY){if(ak.fireEvent("excludetable",aY)===true){return}aV=al(aU);var aW=V(aY,aV),aX=e.findParentByTagName(aY,"table",true);if(ag(aX,aY,aU,true)){if(ak.fireEvent("excludetable",aX)===true){return}ak.body.style.cursor="url("+ak.options.cursorpath+"h.png),pointer"}else{if(ag(aX,aY,aU)){if(ak.fireEvent("excludetable",aX)===true){return}ak.body.style.cursor="url("+ak.options.cursorpath+"v.png),pointer"}else{ak.body.style.cursor="text";var aS=aY;if(/\d/.test(aW)){aW=aW.replace(/\d/,"");aY=ac(aY).getPreviewCell(aY,aW=="v")}aO(ak,aY?!!aW:false,aY?aW:"",aV,aY)}}}else{aN(false,aX,ak)}}catch(aT){aC(aT)}}var J;function aN(aT,aU,aS){if(!aT){if(L){return}J=setTimeout(function(){!L&&I&&I.parentNode&&I.parentNode.removeChild(I)},2000)}else{F(aU,aS)}}function F(aX,aV){var aW=e.getXY(aX),aS=aX.ownerDocument;if(I&&I.parentNode){return I}I=aS.createElement("div");I.contentEditable=false;I.innerHTML="";I.style.cssText="width:15px;height:15px;background-image:url("+aV.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(aW.y-15)+"px;left:"+(aW.x)+"px;";e.unSelectable(I);I.onmouseover=function(aZ){L=true};I.onmouseout=function(aZ){L=false};e.on(I,"click",function(a0,aZ){aT(aZ,this)});e.on(I,"dblclick",function(a0,aZ){aU(aZ)});e.on(I,"dragstart",function(a0,aZ){e.preventDefault(aZ)});var aY;function aT(a0,aZ){clearTimeout(aY);aY=setTimeout(function(){aV.fireEvent("tableClicked",aX,aZ)},300)}function aU(a0){clearTimeout(aY);var a3=ac(aX),a2=aX.rows[0].cells[0],aZ=a3.getLastCell(),a1=a3.getCellsRange(a2,aZ);aV.selection.getRange().setStart(a2,0).setCursor(false,true);a3.setSelected(a1)}aS.body.appendChild(I)}function ag(aY,aU,aV,aZ){var aW=al(aV),aX=V(aU,aW);if(aZ){var aT=aY.getElementsByTagName("caption")[0],aS=aT?aT.offsetHeight:0;return(aX=="v1")&&((aW.y-e.getXY(aY).y-aS)<8)}else{return(aX=="h1")&&((aW.x-e.getXY(aY).x)<8)}}function T(aS,aT){var aZ=ac(aS);if(aZ){var aX=aZ.getSameEndPosCells(aS,"x")[0],aW=aZ.getSameStartPosXCells(aS)[0],aV=al(aT).x,aU=(aX?e.getXY(aX).x:e.getXY(aZ.table).x)+20,aY=aW?e.getXY(aW).x+aW.offsetWidth-20:(ak.body.offsetWidth+5||parseInt(e.getComputedStyle(ak.body,"width"),10));aU+=y;aY-=y;return aV<aU?aU:aV>aY?aY:aV}}function U(aS,aU){try{var aW=e.getXY(aS).y,aV=al(aU).y;return aV<aW?aW:aV}catch(aT){aC(aT)}}function aO(aW,aU,aT,aX,aS){try{aW.body.style.cursor=aT=="h"?"col-resize":aT=="v"?"row-resize":"text";if(c.ie){if(aT&&!am&&!ad(aW)){Q(aW,aW.document);aB(aT,aS)}else{af(aW)}}au=aU}catch(aV){aC(aV)}}function W(){var aT="_UETableResizeLine",aS=this.document.getElementById(aT);if(!aS){aS=this.document.createElement("div");aS.id=aT;aS.contnetEditable=false;aS.setAttribute("unselectable","on");var aU={width:2*x+1+"px",position:"absolute","z-index":100000,cursor:"col-resize",background:"red",display:"none"};aS.onmouseout=function(){this.style.display="none"};u.extend(aS.style,aU);this.document.body.appendChild(aS)}return aS}function aP(aS,aW){var aT=W.call(this),aV=aW.table,aU={top:e.getXY(aV).y+"px",left:e.getXY(aS).x+aS.offsetWidth-x+"px",display:"block",height:aV.offsetHeight+"px"};u.extend(aT.style,aU)}function aD(aS){var aT=ac(aS);aP.call(this,aS,aT)}function V(aS,aU){var aT=e.getXY(aS);if(!aT){return""}if(aT.x+aS.offsetWidth-aU.x<x){return"h"}if(aU.x-aT.x<x){return"h1"}if(aT.y+aS.offsetHeight-aU.y<x){return"v"}if(aU.y-aT.y<x){return"v1"}return""}function an(aV,aS){if(ah()){return}aQ={x:aS.clientX,y:aS.clientY};if(aS.button==2){var aW=ad(ak),aT=false;if(aW){var aU=ab(ak,aS);u.each(aW.selectedTds,function(aX){if(aX===aU){aT=true}});if(!aT){ax(e.getElementsByTagName(ak.body,"th td"));aW.clearSelected()}else{aU=aW.selectedTds[0];setTimeout(function(){ak.selection.getRange().setStart(aU,0).setCursor(false,true)},0)}}}else{aI(aS)}}function C(){aM&&clearTimeout(aM);aM=null}function aJ(aT){aE=0;aT=aT||ak.window.event;var aZ=S(aT.target||aT.srcElement);if(aZ){var aU;if(aU=V(aZ,al(aT))){af(ak);if(aU=="h1"){aU="h";if(ag(e.findParentByTagName(aZ,"table"),aZ,aT)){ak.execCommand("adaptbywindow")}else{aZ=ac(aZ).getPreviewCell(aZ);if(aZ){var aX=ak.selection.getRange();aX.selectNodeContents(aZ).setCursor(true,true)}}}if(aU=="h"){var a0=ac(aZ),aY=a0.table,aS=O(aZ,aY,true);aS=N(aS,"left");a0.width=a0.offsetWidth;var aW=[],aV=[];u.each(aS,function(a1){aW.push(a1.offsetWidth)});u.each(aS,function(a1){a1.removeAttribute("width")});window.setTimeout(function(){var a2=true;u.each(aS,function(a3,a4){var a5=a3.offsetWidth;if(a5>aW[a4]){a2=false;return false}aV.push(a5)});var a1=a2?aV:aW;u.each(aS,function(a3,a4){a3.width=a1[a4]-X()})},0)}}}}function aI(aS){ax(e.getElementsByTagName(ak.body,"td th"));u.each(ak.document.getElementsByTagName("table"),function(aU){aU.ueTable=null});aF=ab(ak,aS);if(!aF){return}var aT=e.findParentByTagName(aF,"table",true);ut=ac(aT);ut&&ut.clearSelected();if(!au){ak.document.body.style.webkitUserSelect="";am=true;ak.addListener("mouseover",ap)}else{w(aS)}}function w(aS){if(c.ie){aS=aw(aS)}B();aj=true;aK=setTimeout(function(){aH(aS)},H)}function N(aV,aT){var aW=[],aX=null;for(var aS=0,aU=aV.length;aS<aU;aS++){aX=aV[aS][aT];if(aX){aW.push(aX)}}return aW}function B(){aK&&clearTimeout(aK);aK=null}function aw(aW){var aS=["pageX","pageY","clientX","clientY","srcElement","target"],aV={};if(aW){for(var aT=0,aU,aX;aU=aS[aT];aT++){aX=aW[aU];aX&&(aV[aU]=aX)}}return aV}function aH(aS){aj=false;aF=aS.target||aS.srcElement;if(!aF){return}var aT=V(aF,al(aS));if(/\d/.test(aT)){aT=aT.replace(/\d/,"");aF=ac(aF).getPreviewCell(aF,aT=="v")}af(ak);Q(ak,ak.document);ak.fireEvent("saveScene");aB(aT,aF);am=true;av=aT;M=aF}function aq(a1,aW){if(ah()){return}B();aj=false;if(au){aE=++aE%3;aQ={x:aW.clientX,y:aW.clientY};aL=setTimeout(function(){aE>0&&aE--},H);if(aE===2){aE=0;aJ(aW);return}}if(aW.button==2){return}var aX=this;var aY=aX.selection.getRange(),aZ=e.findParentByTagName(aY.startContainer,"table",true),aV=e.findParentByTagName(aY.endContainer,"table",true);if(aZ||aV){if(aZ===aV){aZ=e.findParentByTagName(aY.startContainer,["td","th","caption"],true);aV=e.findParentByTagName(aY.endContainer,["td","th","caption"],true);if(aZ!==aV){aX.selection.clearRange()}}else{aX.selection.clearRange()}}am=false;aX.document.body.style.webkitUserSelect="";if(av&&M){aX.selection.getNative()[c.ie9below?"empty":"removeAllRanges"]();aE=0;K=aX.document.getElementById("ue_tableDragLine");if(K){var aU=e.getXY(M),aT=e.getXY(K);switch(av){case"h":z(M,aT.x-aU.x);break;case"v":A(M,aT.y-aU.y-M.offsetHeight);break;default:}av="";M=null;af(aX);aX.fireEvent("saveScene");return}}if(!aF){var a0=e.findParentByTagName(aW.target||aW.srcElement,"td",true);if(!a0){a0=e.findParentByTagName(aW.target||aW.srcElement,"th",true)}if(a0&&(a0.tagName=="TD"||a0.tagName=="TH")){if(aX.fireEvent("excludetable",a0)===true){return}aY=new d.Range(aX.document);aY.setStart(a0,0).setCursor(false,true)}}else{var a2=ac(aF),aS=a2?a2.selectedTds[0]:null;if(aS){aY=new d.Range(aX.document);if(e.isEmptyBlock(aS)){aY.setStart(aS,0).setCursor(false,true)}else{aY.selectNodeContents(aS).shrinkBoundary().setCursor(false,true)}}else{aY=aX.selection.getRange().shrinkBoundary();if(!aY.collapsed){var aZ=e.findParentByTagName(aY.startContainer,["td","th"],true),aV=e.findParentByTagName(aY.endContainer,["td","th"],true);if(aZ&&!aV||!aZ&&aV||aZ&&aV&&aZ!==aV){aY.setCursor(false,true)}}}aF=null;aX.removeListener("mouseover",ap)}aX._selectionChange(250,aW)}function ap(aW,aS){if(ah()){return}var aT=this,aV=aS.target||aS.srcElement;G=e.findParentByTagName(aV,"td",true)||e.findParentByTagName(aV,"th",true);if(aF&&G&&((aF.tagName=="TD"&&G.tagName=="TD")||(aF.tagName=="TH"&&G.tagName=="TH"))&&e.findParentByTagName(aF,"table")==e.findParentByTagName(G,"table")){var aX=ac(G);if(aF!=G){aT.document.body.style.webkitUserSelect="none";aT.selection.getNative()[c.ie9below?"empty":"removeAllRanges"]();var aU=aX.getCellsRange(aF,G);aX.setSelected(aU)}else{aT.document.body.style.webkitUserSelect="";aX.clearSelected()}}aS.preventDefault?aS.preventDefault():(aS.returnValue=false)}function aA(aT,aU,aS){var aV=parseInt(e.getComputedStyle(aT,"line-height"),10),aW=aS+aU;aU=aW<aV?aV:aW;if(aT.style.height){aT.style.height=""}aT.rowSpan==1?aT.setAttribute("height",aU):(aT.removeAttribute&&aT.removeAttribute("height"))}function ae(aS){if(!aS){return 0}return parseInt(e.getComputedStyle(aS,"width"),10)}function z(aS,aU){var aX=ac(aS);if(aX){var aW=aX.table,aT=O(aS,aW);aW.style.width="";aW.removeAttribute("width");aU=E(aU,aS,aT);if(aS.nextSibling){var aV=0;u.each(aT,function(aY){aY.left.width=(+aY.left.width)+aU;aY.right&&(aY.right.width=(+aY.right.width)-aU)})}else{u.each(aT,function(aY){aY.left.width-=-aU})}}}function ah(){return ak.body.contentEditable==="false"}function A(aX,aV){if(Math.abs(aV)<10){return}var aY=ac(aX);if(aY){var aU=aY.getSameEndPosCells(aX,"y"),aS=aU[0]?aU[0].offsetHeight:0;for(var aW=0,aT;aT=aU[aW++];){aA(aT,aV,aS)}}}function O(aT,aY,aW){if(!aY){aY=e.findParentByTagName(aT,"table")}if(!aY){return null}var aV=e.getNodeIndex(aT),aZ=aT,aX=aY.rows,aU=0;while(aZ){if(aZ.nodeType===1){aU+=(aZ.colSpan||1)}aZ=aZ.previousSibling}aZ=null;var aS=[];u.each(aX,function(a2){var a0=a2.cells,a1=0;u.each(a0,function(a3){a1+=(a3.colSpan||1);if(a1===aU){aS.push({left:a3,right:a3.nextSibling||null});return false}else{if(a1>aU){if(aW){aS.push({left:a3})}return false}}})});return aS}function R(aS){var aV=Number.MAX_VALUE;for(var aU=0,aT;aT=aS[aU];aU++){aV=Math.min(aV,aT.width||Z(aT))}return aV}function E(aT,aV,aS){aT-=X();if(aT<0){return 0}aT-=Z(aV);var aU=aT<0?"left":"right";aT=Math.abs(aT);u.each(aS,function(aW){var aX=aW[aU];if(aX){aT=Math.min(aT,Z(aX)-y)}});aT=aT<0?0:aT;return aU==="left"?-aT:aT}function Z(aS){var aV=0,aU=0,aV=aS.offsetWidth-X();if(!aS.nextSibling){aV-=Y(aS)}aV=aV<0?0:aV;try{aS.width=aV}catch(aT){}return aV}function Y(aS){tab=e.findParentByTagName(aS,"table",false);if(tab.offsetVal===undefined){var aT=aS.previousSibling;if(aT){tab.offsetVal=aS.offsetWidth-aT.offsetWidth===aR.borderWidth?aR.borderWidth:0}else{tab.offsetVal=0}}return tab.offsetVal}function X(){if(aR.tabcellSpace===undefined){var aS=null,aU=ak.document.createElement("table"),aW=ak.document.createElement("tbody"),aY=ak.document.createElement("tr"),aV=ak.document.createElement("td"),aT=null;aV.style.cssText="border: 0;";aV.width=1;aY.appendChild(aV);aY.appendChild(aT=aV.cloneNode(false));aW.appendChild(aY);aU.appendChild(aW);aU.style.cssText="visibility: hidden;";ak.body.appendChild(aU);aR.paddingSpace=aV.offsetWidth-1;var aX=aU.offsetWidth;aV.style.cssText="";aT.style.cssText="";aR.borderWidth=(aU.offsetWidth-aX)/3;aR.tabcellSpace=aR.paddingSpace+aR.borderWidth;ak.body.removeChild(aU)}X=function(){return aR.tabcellSpace};return aR.tabcellSpace}function Q(aT,aS){if(am){return}K=aT.document.createElement("div");e.setAttributes(K,{id:"ue_tableDragLine",unselectable:"on",contenteditable:false,"onresizestart":"return false","ondragstart":"return false","onselectstart":"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"});aT.body.appendChild(K)}function af(aS){if(am){return}var aT;while(aT=aS.document.getElementById("ue_tableDragLine")){e.remove(aT)}}function aB(aX,aT){if(!aT){return}var aY=e.findParentByTagName(aT,"table"),aS=aY.getElementsByTagName("caption"),a0=aY.offsetWidth,aW=aY.offsetHeight-(aS.length>0?aS[0].offsetHeight:0),aZ=e.getXY(aY),aU=e.getXY(aT),aV;switch(aX){case"h":aV="height:"+aW+"px;top:"+(aZ.y+(aS.length>0?aS[0].offsetHeight:0))+"px;left:"+(aU.x+aT.offsetWidth);K.style.cssText=aV+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":aV="width:"+a0+"px;left:"+aZ.x+"px;top:"+(aU.y+aT.offsetHeight);K.style.cssText=aV+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)";break;default:}}function aG(aT,aU){var aX=e.getElementsByTagName(aT.body,"table"),aS;for(var aV=0,aW;aW=aX[aV++];){var aY=e.getElementsByTagName(aW,"td");if(aY[0]){if(aU){aS=(aY[0].style.borderColor).replace(/\s/g,"");if(/(#ffffff)|(rgb\(255,255,255\))/ig.test(aS)){e.addClass(aW,"noBorderTable")}}else{e.removeClasses(aW,"noBorderTable")}}}}function aa(aU,aV,aT){var aS=aU.body;return aS.offsetWidth-(aV?parseInt(e.getComputedStyle(aS,"margin-left"),10)*2:0)-aT.tableBorder*2-(aU.options.offsetWidth||0)}function ab(aV,aW){var aY=e.findParentByTagName(aW.target||aW.srcElement,["td","th"],true),aU=null;if(!aY){return null}aU=V(aY,al(aW));if(!aY){return null}if(aU==="h1"&&aY.previousSibling){var aX=e.getXY(aY),aT=aY.offsetWidth;if(Math.abs(aX.x+aT-aW.clientX)>aT/3){aY=aY.previousSibling}}else{if(aU==="v1"&&aY.parentNode.previousSibling){var aX=e.getXY(aY),aS=aY.offsetHeight;if(Math.abs(aX.y+aS-aW.clientY)>aS/3){aY=aY.parentNode.previousSibling.firstChild}}}return aY&&!(aV.fireEvent("excludetable",aY)===true)?aY:null}};UE.UETable.prototype.sortTable=function(G,w){var H=this.table,F=H.rows,J=[],x=F[0].cells[0].tagName==="TH",C=0;if(this.selectedTds.length){var E=this.cellsRange,D=E.endRowIndex+1;for(var A=E.beginRowIndex;A<D;A++){J[A]=F[A]}J.splice(0,E.beginRowIndex);C=(E.endRowIndex+1)===this.rowsNum?0:E.endRowIndex+1}else{for(var A=0,D=F.length;A<D;A++){J[A]=F[A]}}var y={"reversecurrent":function(K,L){return 1},"orderbyasc":function(K,L){var M=K.innerText||K.textContent,N=L.innerText||L.textContent;return M.localeCompare(N)},"reversebyasc":function(K,L){var M=K.innerHTML,N=L.innerHTML;return N.localeCompare(M)},"orderbynum":function(K,L){var M=K[c.ie?"innerText":"textContent"].match(/\d+/),N=L[c.ie?"innerText":"textContent"].match(/\d+/);if(M){M=+M[0]}if(N){N=+N[0]}return(M||0)-(N||0)},"reversebynum":function(K,L){var M=K[c.ie?"innerText":"textContent"].match(/\d+/),N=L[c.ie?"innerText":"textContent"].match(/\d+/);if(M){M=+M[0]}if(N){N=+N[0]}return(N||0)-(M||0)}};H.setAttribute("data-sort-type",w&&typeof w==="string"&&y[w]?w:"");x&&J.splice(0,1);J=u.sort(J,function(L,M){var K;if(w&&typeof w==="function"){K=w.call(this,L.cells[G],M.cells[G])}else{if(w&&typeof w==="number"){K=1}else{if(w&&typeof w==="string"&&y[w]){K=y[w].call(this,L.cells[G],M.cells[G])}else{K=y["orderbyasc"].call(this,L.cells[G],M.cells[G])}}}return K});var z=H.ownerDocument.createDocumentFragment();for(var B=0,D=J.length;B<D;B++){z.appendChild(J[B])}var I=H.getElementsByTagName("tbody")[0];if(!C){I.appendChild(z)}else{I.insertBefore(z,F[C-E.endRowIndex+E.beginRowIndex-1])}};UE.plugins["tablesort"]=function(){var y=this,z=UE.UETable,x=function(A){return z.getUETable(A)},w=function(A){return z.getTableItemsByRange(A)};y.ready(function(){u.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;"+"   background-image:url("+y.options.themePath+y.options.theme+"/images/sortable.png);}",y.document);y.addListener("afterexeccommand",function(B,A){if(A=="mergeright"||A=="mergedown"||A=="mergecells"){this.execCommand("disablesort")}})});UE.commands["sorttable"]={queryCommandState:function(){var D=this,F=w(D);if(!F.cell){return -1}var E=F.table,B=E.getElementsByTagName("td");for(var C=0,A;A=B[C++];){if(A.rowSpan!=1||A.colSpan!=1){return -1}}return 0},execCommand:function(D,F){var G=this,H=G.selection.getRange(),A=H.createBookmark(true),I=w(G),B=I.cell,J=x(I.table),C=J.getCellInfo(B);J.sortTable(C.cellIndex,F);H.moveToBookmark(A);try{H.select()}catch(E){}}};UE.commands["enablesort"]=UE.commands["disablesort"]={queryCommandState:function(B){var D=w(this).table;if(D&&B=="enablesort"){var A=e.getElementsByTagName(D,"th td");for(var C=0;C<A.length;C++){if(A[C].getAttribute("colspan")>1||A[C].getAttribute("rowspan")>1){return -1}}}return !D?-1:B=="enablesort"^D.getAttribute("data-sort")!="sortEnabled"?-1:0},execCommand:function(A){var B=w(this).table;B.setAttribute("data-sort",A=="enablesort"?"sortEnabled":"sortDisabled");A=="enablesort"?e.addClass(B,"sortEnabled"):e.removeClasses(B,"sortEnabled")}}};UE.plugins["contextmenu"]=function(){var y=this;y.setOpt("enableContextMenu",true);if(y.getOpt("enableContextMenu")===false){return}var x=y.getLang("contextMenu"),z,w=y.options.contextMenu||[{label:x["selectall"],cmdName:"selectall"},{label:x.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(x.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:x.unlink,cmdName:"unlink"},"-",{group:x.paragraph,icon:"justifyjustify",subMenu:[{label:x.justifyleft,cmdName:"justify",value:"left"},{label:x.justifyright,cmdName:"justify",value:"right"},{label:x.justifycenter,cmdName:"justify",value:"center"},{label:x.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:x.table,icon:"table",subMenu:[{label:x.inserttable,cmdName:"inserttable"},{label:x.deletetable,cmdName:"deletetable"},"-",{label:x.deleterow,cmdName:"deleterow"},{label:x.deletecol,cmdName:"deletecol"},{label:x.insertcol,cmdName:"insertcol"},{label:x.insertcolnext,cmdName:"insertcolnext"},{label:x.insertrow,cmdName:"insertrow"},{label:x.insertrownext,cmdName:"insertrownext"},"-",{label:x.insertcaption,cmdName:"insertcaption"},{label:x.deletecaption,cmdName:"deletecaption"},{label:x.inserttitle,cmdName:"inserttitle"},{label:x.deletetitle,cmdName:"deletetitle"},{label:x.inserttitlecol,cmdName:"inserttitlecol"},{label:x.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:x.mergecells,cmdName:"mergecells"},{label:x.mergeright,cmdName:"mergeright"},{label:x.mergedown,cmdName:"mergedown"},"-",{label:x.splittorows,cmdName:"splittorows"},{label:x.splittocols,cmdName:"splittocols"},{label:x.splittocells,cmdName:"splittocells"},"-",{label:x.averageDiseRow,cmdName:"averagedistributerow"},{label:x.averageDisCol,cmdName:"averagedistributecol"},"-",{label:x.edittd,cmdName:"edittd",exec:function(){if(UE.ui["edittd"]){new UE.ui["edittd"](this)}this.getDialog("edittd").open()}},{label:x.edittable,cmdName:"edittable",exec:function(){if(UE.ui["edittable"]){new UE.ui["edittable"](this)}this.getDialog("edittable").open()}},{label:x.setbordervisible,cmdName:"setbordervisible"}]},{group:x.tablesort,icon:"tablesort",subMenu:[{label:x.enablesort,cmdName:"enablesort"},{label:x.disablesort,cmdName:"disablesort"},"-",{label:x.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:x.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:x.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:x.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:x.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:x.borderbk,icon:"borderBack",subMenu:[{label:x.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:x.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:x.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#bbb","#ccc"]})}},{label:x.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:x.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["red","blue"]})}},{label:x.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:true,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:x.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:x.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:x.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:x.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:x.tableright,value:"right"}]},"-",{label:x.insertparagraphbefore,cmdName:"insertparagraph",value:true},{label:x.insertparagraphafter,cmdName:"insertparagraph"},{label:x["copy"],cmdName:"copy"},{label:x["paste"],cmdName:"paste"}];if(!w.length){return}var A=UE.ui.uiUtils;y.addListener("contextmenu",function(K,D){var H=A.getViewportOffsetByEvent(D);y.fireEvent("beforeselectionchange");if(z){z.destroy()}for(var E=0,J,B=[];J=w[E];E++){var G;(function(N){if(N=="-"){if((G=B[B.length-1])&&G!=="-"){B.push("-")}}else{if(N.hasOwnProperty("group")){for(var O=0,L,P=[];L=N.subMenu[O];O++){(function(Q){if(Q=="-"){if((G=P[P.length-1])&&G!=="-"){P.push("-")}else{P.splice(P.length-1)}}else{if((y.commands[Q.cmdName]||UE.commands[Q.cmdName]||Q.query)&&(Q.query?Q.query():y.queryCommandState(Q.cmdName))>-1){P.push({"label":Q.label||y.getLang("contextMenu."+Q.cmdName+(Q.value||""))||"","className":"edui-for-"+Q.cmdName+(Q.className?(" edui-for-"+Q.cmdName+"-"+Q.className):""),onclick:Q.exec?function(){Q.exec.call(y)}:function(){y.execCommand(Q.cmdName,Q.value)}})}}})(L)}if(P.length){function M(){switch(N.icon){case"table":return y.getLang("contextMenu.table");case"justifyjustify":return y.getLang("contextMenu.paragraph");case"aligntd":return y.getLang("contextMenu.aligntd");case"aligntable":return y.getLang("contextMenu.aligntable");case"tablesort":return x.tablesort;case"borderBack":return x.borderbk;default:return""}}B.push({"label":M(),className:"edui-for-"+N.icon,"subMenu":{items:P,editor:y}})}}else{if((y.commands[N.cmdName]||UE.commands[N.cmdName]||N.query)&&(N.query?N.query.call(y):y.queryCommandState(N.cmdName))>-1){B.push({"label":N.label||y.getLang("contextMenu."+N.cmdName),className:"edui-for-"+(N.icon?N.icon:N.cmdName+(N.value||"")),onclick:N.exec?function(){N.exec.call(y)}:function(){y.execCommand(N.cmdName,N.value)}})}}}})(J)}if(B[B.length-1]=="-"){B.pop()}z=new UE.ui.Menu({items:B,className:"edui-contextmenu",editor:y});z.render();z.showAt(H);y.fireEvent("aftershowcontextmenu",z);e.preventDefault(D);if(c.ie){var F;try{F=y.selection.getNative().createRange()}catch(C){return}if(F.item){var I=new d.Range(y.document);I.selectNode(F.item(0)).select(true,true)}}});y.addListener("aftershowcontextmenu",function(E,D){if(y.zeroclipboard){var B=D.items;for(var C in B){if(B[C].className=="edui-for-copy"){y.zeroclipboard.clip(B[C].getDom())}}}})};UE.plugins["shortcutmenu"]=function(){var x=this,y,w=x.options.shortcutMenu||[];if(!w.length){return}x.addListener("contextmenu mouseup",function(E,A){var C=this,z={type:E,target:A.target||A.srcElement,screenX:A.screenX,screenY:A.screenY,clientX:A.clientX,clientY:A.clientY};setTimeout(function(){var F=C.selection.getRange();if(F.collapsed===false||E=="contextmenu"){if(!y){y=new b.editor.ui.ShortCutMenu({editor:C,items:w,theme:C.options.theme,className:"edui-shortcutmenu"});y.render();C.fireEvent("afterrendershortcutmenu",y)}y.show(z,!!UE.plugins["contextmenu"])}});if(E=="contextmenu"){e.preventDefault(A);if(c.ie9below){var B;try{B=C.selection.getNative().createRange()}catch(A){return}if(B.item){var D=new d.Range(C.document);D.selectNode(B.item(0)).select(true,true)}}}});x.addListener("keydown",function(z){if(z=="keydown"){y&&!y.isHidden&&y.hide()}})};UE.plugins["basestyle"]=function(){var w={"bold":["strong","b"],"italic":["em","i"],"subscript":["sub"],"superscript":["sup"]},x=function(A,B){return e.filterNodeList(A.selection.getStartElementPath(),B)},y=this;y.addshortcutkey({"Bold":"ctrl+66","Italic":"ctrl+73","Underline":"ctrl+85"});y.addInputRule(function(A){u.each(A.getNodesByTagName("b i"),function(B){switch(B.tagName){case"b":B.tagName="strong";break;case"i":B.tagName="em"}})});for(var z in w){(function(A,B){y.commands[A]={execCommand:function(C){var E=y.selection.getRange(),D=x(this,B);if(E.collapsed){if(D){var G=y.document.createTextNode("");E.insertNode(G).removeInlineStyle(B);E.setStartBefore(G);e.remove(G)}else{var F=E.document.createElement(B[0]);if(C=="superscript"||C=="subscript"){G=y.document.createTextNode("");E.insertNode(G).removeInlineStyle(["sub","sup"]).setStartBefore(G).collapse(true)}E.insertNode(F).setStart(F,0)}E.collapse(true)}else{if(C=="superscript"||C=="subscript"){if(!D||D.tagName.toLowerCase()!=C){E.removeInlineStyle(["sub","sup"])}}D?E.removeInlineStyle(B):E.applyInlineStyle(B[0])}E.select()},queryCommandState:function(){return x(this,B)?1:0}}})(z,w[z])}};UE.plugins["elementpath"]=function(){var w,y,x=this;x.setOpt("elementPathEnabled",true);if(!x.options.elementPathEnabled){return}x.commands["elementpath"]={execCommand:function(z,A){var C=y[A],B=x.selection.getRange();w=A*1;B.selectNode(C).select()},queryCommandValue:function(){var D=[].concat(this.selection.getStartElementPath()).reverse(),C=[];y=D;for(var A=0,z;z=D[A];A++){if(z.nodeType==3){continue}var B=z.tagName.toLowerCase();if(B=="img"&&z.getAttribute("anchorname")){B="anchor"}C[A]=B;if(w==A){w=-1;break}}return C}}};UE.plugins["formatmatch"]=function(){var A=this,z=[],y,x=0;A.addListener("reset",function(){z=[];x=0});function w(J,D){if(c.webkit){var H=D.target.tagName=="IMG"?D.target:null}function B(K){if(I){K.selectNode(I)}return K.applyInlineStyle(z[z.length-1].tagName,null,z)}A.undoManger&&A.undoManger.save();var F=A.selection.getRange(),E=H||F.getClosedNode();if(y&&E&&E.tagName=="IMG"){E.style.cssText+=";float:"+(y.style.cssFloat||y.style.styleFloat||"none")+";display:"+(y.style.display||"inline");y=null}else{if(!y){var C=F.collapsed;if(C){var I=A.document.createTextNode("match");F.insertNode(I).select()}A.__hasEnterExecCommand=true;var G=A.options.removeFormatAttributes;A.options.removeFormatAttributes="";A.execCommand("removeformat");A.options.removeFormatAttributes=G;A.__hasEnterExecCommand=false;F=A.selection.getRange();if(z.length){B(F)}if(I){F.setStartBefore(I).collapse(true)}F.select();I&&e.remove(I)}}A.undoManger&&A.undoManger.save();A.removeListener("mouseup",w);x=0}A.commands["formatmatch"]={execCommand:function(C){if(x){x=0;z=[];A.removeListener("mouseup",w);return}var E=A.selection.getRange();y=E.getClosedNode();if(!y||y.tagName!="IMG"){E.collapse(true).shrinkBoundary();var F=E.startContainer;z=e.findParents(F,true,function(G){return !e.isBlockElm(G)&&G.nodeType==1});for(var D=0,B;B=z[D];D++){if(B.tagName=="A"){z.splice(D,1);break}}}A.addListener("mouseup",w);x=1},queryCommandState:function(){return x},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){var A=this;var w={"table":1,"tbody":1,"tr":1,"ol":1,"ul":1};function z(I,F,D){var H=F.searchStr;if(F.dir==-1){I=I.split("").reverse().join("");H=H.split("").reverse().join("");D=I.length-D}var G=new RegExp(H,"g"+(F.casesensitive?"":"i")),E;while(E=G.exec(I)){if(E.index>=D){return F.dir==-1?I.length-E.index-F.searchStr.length:E.index}}return -1}function y(H,D,I){var J,F,G=I.all||I.dir==1?"getNextDomNode":"getPreDomNode";if(e.isBody(H)){H=H.firstChild}var E=1;while(H){J=H.nodeType==3?H.nodeValue:H[c.ie?"innerText":"textContent"];F=z(J,I,D);E=0;if(F!=-1){return{"node":H,"index":F}}H=e[G](H);while(H&&w[H.nodeName.toLowerCase()]){H=e[G](H,true)}if(H){D=I.dir==-1?(H.nodeType==3?H.nodeValue:H[c.ie?"innerText":"textContent"]).length:0}}}function x(H,G,J){var D=0,E=H.firstChild,F=0,I;while(E){if(E.nodeType==3){F=E.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;D+=F;if(D>=G){return{"node":E,"index":F-(D-G)}}}else{if(!f.$empty[E.tagName]){F=E[c.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length;D+=F;if(D>=G){I=x(E,F-(D-G),J);if(I){return I}}}}E=e.getNextDomNode(E)}}function C(E,F){var H=E.selection.getRange(),N,L=F.searchStr,M=E.document.createElement("span");M.innerHTML="$$ueditor_searchreplace_key$$";H.shrinkBoundary(true);if(!H.collapsed){H.select();var K=E.selection.getText();if(new RegExp("^"+F.searchStr+"$",(F.casesensitive?"":"i")).test(K)){if(F.replaceStr!=undefined){B(H,F.replaceStr);H.select();return true}else{H.collapse(F.dir==-1)}}}H.insertNode(M);H.enlargeToBlockElm(true);N=H.startContainer;var D=N[c.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");H.setStartBefore(M);e.remove(M);var G=y(N,D,F);if(G){var J=x(G.node,G.index,L);var I=x(G.node,G.index+L.length,L);H.setStart(J.node,J.index).setEnd(I.node,I.index);if(F.replaceStr!==undefined){B(H,F.replaceStr)}H.select();return true}else{H.setCursor()}}function B(D,E){E=A.document.createTextNode(E);D.deleteContents().insertNode(E)}return{commands:{"searchreplace":{execCommand:function(D,G){u.extend(G,{all:false,casesensitive:false,dir:1},true);var F=0;if(G.all){var H=A.selection.getRange(),E=A.body.firstChild;if(E&&E.nodeType==1){H.setStart(E,0);H.shrinkBoundary(true)}else{if(E.nodeType==3){H.setStartBefore(E)}}H.collapse(true).select(true);if(G.replaceStr!==undefined){A.fireEvent("saveScene")}while(C(this,G)){F++}if(F){A.fireEvent("saveScene")}}else{if(G.replaceStr!==undefined){A.fireEvent("saveScene")}if(C(this,G)){F++}if(F){A.fireEvent("saveScene")}}return F},notNeedUndo:1}}}});UE.plugins["customstyle"]=function(){var w=this;w.setOpt({"customstyle":[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});w.commands["customstyle"]={execCommand:function(y,G){var C=this,M=G.tag,E=e.findParent(C.selection.getStart(),function(O){return O.getAttribute("label")},true),L,x,N={};for(var H in G){if(G[H]!==undefined){N[H]=G[H]}}delete N.tag;if(E&&E.getAttribute("label")==G.label){L=this.selection.getRange();x=L.createBookmark();if(L.collapsed){if(f.$block[E.tagName]){var A=C.document.createElement("p");e.moveChild(E,A);E.parentNode.insertBefore(A,E);e.remove(E)}else{e.remove(E,true)}}else{var z=e.getCommonAncestor(x.start,x.end),F=e.getElementsByTagName(z,M);if(new RegExp(M,"i").test(z.tagName)){F.push(z)}for(var B=0,D;D=F[B++];){if(D.getAttribute("label")==G.label){var K=e.getPosition(D,x.start),I=e.getPosition(D,x.end);if((K&e.POSITION_FOLLOWING||K&e.POSITION_CONTAINS)&&(I&e.POSITION_PRECEDING||I&e.POSITION_CONTAINS)){if(f.$block[M]){var A=C.document.createElement("p");e.moveChild(D,A);D.parentNode.insertBefore(A,D)}}e.remove(D,true)}}E=e.findParent(z,function(O){return O.getAttribute("label")==G.label},true);if(E){e.remove(E,true)}}L.moveToBookmark(x).select()}else{if(f.$block[M]){this.execCommand("paragraph",M,N,"customstyle");L=C.selection.getRange();if(!L.collapsed){L.collapse();E=e.findParent(C.selection.getStart(),function(O){return O.getAttribute("label")==G.label},true);var J=C.document.createElement("p");e.insertAfter(E,J);e.fillNode(C.document,J);L.setStart(J,0).setCursor()}}else{L=C.selection.getRange();if(L.collapsed){E=C.document.createElement(M);e.setAttributes(E,N);L.insertNode(E).setStart(E,0).setCursor();return}x=L.createBookmark();L.applyInlineStyle(M,N).moveToBookmark(x).select()}}},queryCommandValue:function(){var x=e.filterNodeList(this.selection.getStartElementPath(),function(y){return y.getAttribute("label")});return x?x.getAttribute("label"):""}};w.addListener("keyup",function(C,x){var y=x.keyCode||x.which;if(y==32||y==13){var B=w.selection.getRange();if(B.collapsed){var z=e.findParent(w.selection.getStart(),function(D){return D.getAttribute("label")},true);if(z&&f.$block[z.tagName]&&e.isEmptyNode(z)){var A=w.document.createElement("p");e.insertAfter(z,A);e.fillNode(w.document,A);e.remove(z);B.setStart(A,0).setCursor()}}}})};UE.plugins["catchremoteimage"]=function(){var x=this,w=UE.ajax;if(x.options.catchRemoteImageEnable===false){return}x.setOpt({catchRemoteImageEnable:false});x.addListener("afterpaste",function(){x.fireEvent("catchRemoteImage")});x.addListener("catchRemoteImage",function(){var A=x.getOpt("catcherLocalDomain"),y=x.getActionUrl(x.getOpt("catcherActionName")),B=x.getOpt("catcherUrlPrefix"),z=x.getOpt("catcherFieldName");var G=[],F=e.getElementsByTagName(x.document,"img"),I=function(K,M){if(K.indexOf(location.host)!=-1||/(^\.)|(^\/)/.test(K)){return true}if(M){for(var J=0,L;L=M[J++];){if(K.indexOf(L)!==-1){return true}}}return false};for(var E=0,D;D=F[E++];){if(D.getAttribute("word_img")){continue}var H=D.getAttribute("_src")||D.src||"";if(/^(https?|ftp):/i.test(H)&&!I(H,A)){G.push(H)}}if(G.length){C(G,{success:function(S){try{var N=S.state!==undefined?S:eval("("+S.responseText+")")}catch(L){return}var M,O,J,K,R,Q,P=N.list;for(M=0;J=F[M++];){R=J.getAttribute("_src")||J.src||"";for(O=0;K=P[O++];){if(R==K.source&&K.state=="SUCCESS"){Q=B+K.url;e.setAttributes(J,{"src":Q,"_src":Q});break}}}x.fireEvent("catchremotesuccess")},error:function(){x.fireEvent("catchremoteerror")}})}function C(K,J){var N=u.serializeParam(x.queryCommandValue("serverparam"))||"",O=u.formatUrl(y+(y.indexOf("?")==-1?"?":"&")+N),L=u.isCrossDomainUrl(O),M={"method":"POST","dataType":L?"jsonp":"","timeout":60000,"onsuccess":J["success"],"onerror":J["error"]};M[z]=K;w.request(O,M)}})};UE.plugin.register("snapscreen",function(){var x=this;var y;function w(C){var B,z=document.createElement("a"),A=u.serializeParam(x.queryCommandValue("serverparam"))||"";z.href=C;if(c.ie){z.href=z.href}B=z.search;if(A){B=B+(B.indexOf("?")==-1?"?":"&")+A;B=B.replace(/[&]+/ig,"&")}return{"port":z.port,"hostname":z.hostname,"path":z.pathname+B||+z.hash}}return{commands:{"snapscreen":{execCommand:function(z){var H,E,G;var D=x.getLang("snapScreen_plugin");if(!y){var A=x.container;var B=x.container.ownerDocument||x.container.document;y=B.createElement("object");try{y.type="application/x-pluginbaidusnap"}catch(C){return}y.style.cssText="position:absolute;left:-9999px;width:0;height:0;";y.setAttribute("width","0");y.setAttribute("height","0");A.appendChild(y)}function F(K){try{K=eval("("+K+")");if(K.state=="SUCCESS"){var J=x.options;x.execCommand("insertimage",{src:J.snapscreenUrlPrefix+K.url,_src:J.snapscreenUrlPrefix+K.url,alt:K.title||"",floatStyle:J.snapscreenImgAlign})}else{alert(K.state)}}catch(I){alert(D.callBackErrorMsg)}}H=x.getActionUrl(x.getOpt("snapscreenActionName"));E=w(H);setTimeout(function(){try{G=y.saveSnapshot(E.hostname,E.path,E.port)}catch(I){x.ui._dialogs["snapscreenDialog"].open();return}F(G)},50)},queryCommandState:function(){return(navigator.userAgent.indexOf("Windows",0)!=-1)?0:-1}}}}});UE.commands["insertparagraph"]={execCommand:function(w,x){var y=this,A=y.selection.getRange(),B=A.startContainer,C;while(B){if(e.isBody(B)){break}C=B;B=B.parentNode}if(C){var z=y.document.createElement("p");if(x){C.parentNode.insertBefore(z,C)}else{C.parentNode.insertBefore(z,C.nextSibling)}e.fillNode(y.document,z);A.setStart(z,0).setCursor(false,true)}}};UE.plugin.register("webapp",function(){var x=this;function w(y,z){return !z?'<img title="'+y.title+'" width="'+y.width+'" height="'+y.height+'"'+' src="'+x.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+y.logo+'" style="background:url('+y.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+y.url+'" '+(y.align&&!y.cssfloat?'align="'+y.align+'"':"")+(y.cssfloat?'style="float:'+y.cssfloat+'"':"")+"/>":'<iframe class="edui-faked-webapp" title="'+y.title+'" '+(y.align&&!y.cssfloat?'align="'+y.align+'"':"")+(y.cssfloat?'style="float:'+y.cssfloat+'"':"")+'width="'+y.width+'" height="'+y.height+'"  scrolling="no" frameborder="0" src="'+y.url+'" logo_url = "'+y.logo+'"></iframe>'}return{outputRule:function(y){u.each(y.getNodesByTagName("img"),function(B){var A;if(B.getAttr("class")=="edui-faked-webapp"){A=w({title:B.getAttr("title"),"width":B.getAttr("width"),"height":B.getAttr("height"),"align":B.getAttr("align"),"cssfloat":B.getStyle("float"),"url":B.getAttr("_url"),"logo":B.getAttr("_logo_url")},true);var z=UE.uNode.createElement(A);B.parentNode.replaceChild(z,B)}})},inputRule:function(y){u.each(y.getNodesByTagName("iframe"),function(A){if(A.getAttr("class")=="edui-faked-webapp"){var z=UE.uNode.createElement(w({title:A.getAttr("title"),"width":A.getAttr("width"),"height":A.getAttr("height"),"align":A.getAttr("align"),"cssfloat":A.getStyle("float"),"url":A.getAttr("src"),"logo":A.getAttr("logo_url")}));A.parentNode.replaceChild(z,A)}})},commands:{"webapp":{execCommand:function(y,A){var z=this,B=w(u.extend(A,{align:"none"}),false);z.execCommand("inserthtml",B)},queryCommandState:function(){var A=this,z=A.selection.getRange().getClosedNode(),y=z&&(z.className=="edui-faked-webapp");return y?1:0}}}}});UE.plugins["template"]=function(){UE.commands["template"]={execCommand:function(w,x){x.html&&this.execCommand("inserthtml",x.html)}};this.addListener("click",function(A,x){var w=x.target||x.srcElement,y=this.selection.getRange();var z=e.findParent(w,function(B){if(B.className&&e.hasClass(B,"ue_t")){return B}},true);z&&y.selectNode(z).shrinkBoundary().select()});this.addListener("keydown",function(z,w){var x=this.selection.getRange();if(!x.collapsed){if(!w.ctrlKey&&!w.metaKey&&!w.shiftKey&&!w.altKey){var y=e.findParent(x.startContainer,function(A){if(A.className&&e.hasClass(A,"ue_t")){return A}},true);if(y){e.removeClasses(y,["ue_t"])}}}})};UE.plugin.register("music",function(){var x=this;function w(C,D,A,y,z,B){return !B?"<img "+(y&&!z?'align="'+y+'"':"")+(z?'style="float:'+z+'"':"")+' width="'+D+'" height="'+A+'" _url="'+C+'" class="edui-faked-music"'+' src="'+x.options.langPath+x.options.lang+'/images/music.png" />':'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer"'+' src="'+C+'" width="'+D+'" height="'+A+'" '+(y&&!z?'align="'+y+'"':"")+(z?'style="float:'+z+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >'}return{outputRule:function(y){u.each(y.getNodesByTagName("img"),function(D){var C;if(D.getAttr("class")=="edui-faked-music"){var A=D.getStyle("float");var z=D.getAttr("align");C=w(D.getAttr("_url"),D.getAttr("width"),D.getAttr("height"),z,A,true);var B=UE.uNode.createElement(C);D.parentNode.replaceChild(B,D)}})},inputRule:function(y){u.each(y.getNodesByTagName("embed"),function(C){if(C.getAttr("class")=="edui-faked-music"){var A=C.getStyle("float");var z=C.getAttr("align");html=w(C.getAttr("src"),C.getAttr("width"),C.getAttr("height"),z,A,false);var B=UE.uNode.createElement(html);C.parentNode.replaceChild(B,C)}})},commands:{"music":{execCommand:function(y,A){var z=this,B=w(A.url,A.width||400,A.height||95,"none",false);z.execCommand("inserthtml",B)},queryCommandState:function(){var A=this,z=A.selection.getRange().getClosedNode(),y=z&&(z.className=="edui-faked-music");return y?1:0}}}}});UE.plugin.register("autoupload",function(){function y(F,B){var L=B;var E,P,K,A,z,I,C,N,H=/image\/\w+/i.test(F.type)?"image":"file",J="loading_"+(+new Date()).toString(36);E=L.getOpt(H+"FieldName");P=L.getOpt(H+"UrlPrefix");K=L.getOpt(H+"MaxSize");A=L.getOpt(H+"AllowFiles");z=L.getActionUrl(L.getOpt(H+"ActionName"));C=function(S){var R=L.document.getElementById(J);R&&e.remove(R);L.fireEvent("showmessage",{"id":J,"content":S,"type":"error","timeout":4000})};if(H=="image"){I='<img class="loadingclass" id="'+J+'" src="'+L.options.themePath+L.options.theme+'/images/spacer.gif" title="'+(L.getLang("autoupload.loading")||"")+'" >';N=function(R){var S=P+R.url,T=L.document.getElementById(J);if(T){T.setAttribute("src",S);T.setAttribute("_src",S);T.setAttribute("title",R.title||"");T.setAttribute("alt",R.original||"");T.removeAttribute("id");e.removeClasses(T,"loadingclass")}}}else{I="<p>"+'<img class="loadingclass" id="'+J+'" src="'+L.options.themePath+L.options.theme+'/images/spacer.gif" title="'+(L.getLang("autoupload.loading")||"")+'" >'+"</p>";N=function(S){var T=P+S.url,U=L.document.getElementById(J);var V=L.selection.getRange(),R=V.createBookmark();V.selectNode(U).select();L.execCommand("insertfile",{"url":T});V.moveToBookmark(R).select()}}L.execCommand("inserthtml",I);if(!L.getOpt(H+"ActionName")){C(L.getLang("autoupload.errorLoadConfig"));return}if(F.size>K){C(L.getLang("autoupload.exceedSizeError"));return}var G=F.name?F.name.substr(F.name.lastIndexOf(".")):"";if((G&&H!="image")||(A&&(A.join("")+".").indexOf(G.toLowerCase()+".")==-1)){C(L.getLang("autoupload.exceedTypeError"));return}var Q=new XMLHttpRequest(),D=new FormData(),M=u.serializeParam(L.queryCommandValue("serverparam"))||"",O=u.formatUrl(z+(z.indexOf("?")==-1?"?":"&")+M);D.append(E,F,F.name||("blob."+F.type.substr("image/".length)));D.append("type","ajax");Q.open("post",O,true);Q.setRequestHeader("X-Requested-With","XMLHttpRequest");Q.addEventListener("load",function(R){try{var T=(new Function("return "+u.trim(R.target.response)))();if(T.state=="SUCCESS"&&T.url){N(T)}else{C(T.state)}}catch(S){C(L.getLang("autoupload.loadError"))}});Q.send(D)}function x(z){return z.clipboardData&&z.clipboardData.items&&z.clipboardData.items.length==1&&/^image\//.test(z.clipboardData.items[0].type)?z.clipboardData.items:null}function w(z){return z.dataTransfer&&z.dataTransfer.files?z.dataTransfer.files:null}return{outputRule:function(z){u.each(z.getNodesByTagName("img"),function(A){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(A.getAttr("class"))){A.parentNode.removeChild(A)}});u.each(z.getNodesByTagName("p"),function(A){if(/\bloadpara\b/.test(A.getAttr("class"))){A.parentNode.removeChild(A)}})},bindEvents:{"ready":function(z){var A=this;if(window.FormData&&window.FileReader){e.on(A.body,"paste drop",function(B){var D=false,E;E=B.type=="paste"?x(B):w(B);if(E){var F=E.length,C;while(F--){C=E[F];if(C.getAsFile){C=C.getAsFile()}if(C&&C.size>0){y(C,A);D=true}}D&&B.preventDefault()}});e.on(A.body,"dragover",function(B){if(B.dataTransfer.types[0]=="Files"){B.preventDefault()}});u.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)}}}}});UE.plugin.register("autosave",function(){var x=this,w=new Date(),y=20,A=null;function z(B){var C;if(new Date()-w<y){return}if(!B.hasContents()){A&&x.removePreferences(A);return}w=new Date();B._saveFlag=null;C=x.body.innerHTML;if(B.fireEvent("beforeautosave",{content:C})===false){return}x.setPreferences(A,C);B.fireEvent("afterautosave",{content:C})}return{defaultOptions:{saveInterval:500},bindEvents:{"ready":function(){var B="-drafts-data",C=null;if(x.key){C=x.key+B}else{C=(x.container.parentNode.id||"ue-common")+B}A=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+C},"contentchange":function(){if(!A){return}if(x._saveFlag){window.clearTimeout(x._saveFlag)}if(x.options.saveInterval>0){x._saveFlag=window.setTimeout(function(){z(x)},x.options.saveInterval)}else{z(x)}}},commands:{"clearlocaldata":{execCommand:function(B,C){if(A&&x.getPreferences(A)){x.removePreferences(A)}},notNeedUndo:true,ignoreContentChange:true},"getlocaldata":{execCommand:function(B,C){return A?x.getPreferences(A)||"":""},notNeedUndo:true,ignoreContentChange:true},"drafts":{execCommand:function(B,C){if(A){x.body.innerHTML=x.getPreferences(A)||"<p>"+e.fillHtml+"</p>";x.focus(true)}},queryCommandState:function(){return A?(x.getPreferences(A)===null?-1:0):-1},notNeedUndo:true,ignoreContentChange:true}}}});UE.plugin.register("charts",function(){var w=this;return{bindEvents:{"chartserror":function(){}},commands:{"charts":{execCommand:function(y,A){var D=e.findParentByTagName(this.selection.getRange().startContainer,"table",true),B=[],z={};if(!D){return false}if(!x(D)){w.fireEvent("chartserror");return false}z.title=A.title||"";z.subTitle=A.subTitle||"";z.xTitle=A.xTitle||"";z.yTitle=A.yTitle||"";z.suffix=A.suffix||"";z.tip=A.tip||"";z.dataFormat=A.tableDataFormat||"";z.chartType=A.chartType||0;for(var C in z){if(!z.hasOwnProperty(C)){continue}B.push(C+":"+z[C])}D.setAttribute("data-chart",B.join(";"));e.addClass(D,"edui-charts-table")},queryCommandState:function(y,z){var A=e.findParentByTagName(this.selection.getRange().startContainer,"table",true);return A&&x(A)?0:-1}}},inputRule:function(y){u.each(y.getNodesByTagName("table"),function(z){if(z.getAttr("data-chart")!==undefined){z.setAttr("style")}})},outputRule:function(y){u.each(y.getNodesByTagName("table"),function(z){if(z.getAttr("data-chart")!==undefined){z.setAttr("style","display: none;")}})}};function x(E){var A=null,z=0;if(E.rows.length<2){return false}if(E.rows[0].cells.length<2){return false}A=E.rows[0].cells;z=A.length;for(var B=0,y;y=A[B];B++){if(y.tagName.toLowerCase()!=="th"){return false}}for(var B=1,D;D=E.rows[B];B++){if(D.cells.length!=z){return false}if(D.cells[0].tagName.toLowerCase()!=="th"){return false}for(var C=1,y;y=D.cells[C];C++){var F=u.trim((y.innerText||y.textContent||""));F=F.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,"");if(!/^\d*\.?\d+$/.test(F)){return false}}}return true}});UE.plugin.register("section",function(){function z(A){this.tag="";this.level=-1,this.dom=null;this.nextSection=null;this.previousSection=null;this.parentSection=null;this.startAddress=[];this.endAddress=[];this.children=[]}function x(A){var B=new z();return u.extend(B,A)}function w(D,C){var A=C;for(var B=0;B<D.length;B++){if(!A.childNodes){return null}A=A.childNodes[D[B]]}return A}var y=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){y.fireEvent("updateSections")}},bindEvents:{"ready":function(){y.fireEvent("updateSections");e.on(y.body,"drop paste",function(){y.fireEvent("updateSections")})},"afterexeccommand":function(B,A){if(A=="paragraph"){y.fireEvent("updateSections")}},"keyup":function(E,A){var C=this,D=C.selection.getRange();if(D.collapsed!=true){C.fireEvent("updateSections")}else{var B=A.keyCode||A.which;if(B==13||B==8||B==46){C.fireEvent("updateSections")}}}},commands:{"getsections":{execCommand:function(A,F){var E=F||["h1","h2","h3","h4","h5","h6"];for(var D=0;D<E.length;D++){if(typeof E[D]=="string"){E[D]=function(J){return function(K){return K.tagName==J.toUpperCase()}}(E[D])}else{if(typeof E[D]!="function"){E[D]=function(J){return null}}}}function C(K){for(var J=0;J<E.length;J++){if(E[J](K)){return J}}return -1}var G=this,B=x({"level":-1,"title":"root"}),H=B;function I(R,N){var Q,T=null,S,K,L=R.childNodes;for(var O=0,P=L.length;O<P;O++){K=L[O];Q=C(K);if(Q>=0){var J=G.selection.getRange().selectNode(K).createAddress(true).startAddress,M=x({"tag":K.tagName,"title":K.innerText||K.textContent||"","level":Q,"dom":K,"startAddress":u.clone(J,[]),"endAddress":u.clone(J,[]),"children":[]});H.nextSection=M;M.previousSection=H;S=H;while(Q<=S.level){S=S.parentSection}M.parentSection=S;S.children.push(M);T=H=M}else{K.nodeType===1&&I(K,N);T&&T.endAddress[T.endAddress.length-1]++}}}I(G.body,B);return B},notNeedUndo:true},"movesection":{execCommand:function(A,H,L,D){var F=this,K,J;if(!H||!L||L.level==-1){return}K=D?L.endAddress:L.startAddress;J=w(K,F.body);if(!K||!J||E(H.startAddress,H.endAddress,K)){return}var I=w(H.startAddress,F.body),C=w(H.endAddress,F.body),B,G;if(D){B=C;while(B&&!(e.getPosition(I,B)&e.POSITION_FOLLOWING)){G=B.previousSibling;e.insertAfter(J,B);if(B==I){break}B=G}}else{B=I;while(B&&!(e.getPosition(B,C)&e.POSITION_FOLLOWING)){G=B.nextSibling;J.parentNode.insertBefore(B,J);if(B==C){break}B=G}}F.fireEvent("updateSections");function E(R,N,M){var P=false,Q=false;for(var O=0;O<R.length;O++){if(O>=M.length){break}if(M[O]>R[O]){P=true;break}else{if(M[O]<R[O]){break}}}for(var O=0;O<N.length;O++){if(O>=M.length){break}if(M[O]<R[O]){Q=true;break}else{if(M[O]>R[O]){break}}}return P&&Q}}},"deletesection":{execCommand:function(A,H,E){var F=this;if(!H){return}function D(L){var J=F.body;for(var K=0;K<L.length;K++){if(!J.childNodes){return null}J=J.childNodes[L[K]]}return J}var I=D(H.startAddress),C=D(H.endAddress),B=I,G;if(!E){while(B&&e.inDoc(C,F.document)&&!(e.getPosition(B,C)&e.POSITION_FOLLOWING)){G=B.nextSibling;e.remove(B);B=G}}else{e.remove(B)}F.fireEvent("updateSections")}},"selectsection":{execCommand:function(B,E){if(!E&&!E.dom){return false}var C=this,D=C.selection.getRange(),A={"startAddress":u.clone(E.startAddress,[]),"endAddress":u.clone(E.endAddress,[])};A.endAddress[A.endAddress.length-1]++;D.moveToAddress(A).select().scrollToView();return true},notNeedUndo:true},"scrolltosection":{execCommand:function(B,E){if(!E&&!E.dom){return false}var C=this,D=C.selection.getRange(),A={"startAddress":E.startAddress,"endAddress":E.endAddress};A.endAddress[A.endAddress.length-1]++;D.moveToAddress(A).scrollToView();return true},notNeedUndo:true}}}});UE.plugin.register("simpleupload",function(){var z=this,y=false,w;function x(){var D=w.offsetWidth||20,C=w.offsetHeight||20,A=document.createElement("iframe"),B="display:block;width:"+D+"px;height:"+C+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";e.on(A,"load",function(){var K=(+new Date()).toString(36),L,F,E;F=(A.contentDocument||A.contentWindow.document);E=F.body;L=F.createElement("div");L.innerHTML='<form id="edui_form_'+K+'" target="edui_iframe_'+K+'" method="POST" enctype="multipart/form-data" action="'+z.getOpt("serverUrl")+'" '+'style="'+B+'">'+'<input id="edui_input_'+K+'" type="file" accept="image/*" name="'+z.options.imageFieldName+'" '+'style="'+B+'">'+"</form>"+'<iframe id="edui_iframe_'+K+'" name="edui_iframe_'+K+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';L.className="edui-"+z.options.theme;L.id=z.ui.id+"_iframeupload";E.style.cssText=B;E.style.width=D+"px";E.style.height=C+"px";E.appendChild(L);if(E.parentNode){E.parentNode.style.width=D+"px";E.parentNode.style.height=D+"px"}var G=F.getElementById("edui_form_"+K);var I=F.getElementById("edui_input_"+K);var H=F.getElementById("edui_iframe_"+K);e.on(I,"change",function(){if(!I.value){return}var R="loading_"+(+new Date()).toString(36);var S=u.serializeParam(z.queryCommandValue("serverparam"))||"";var Q=z.getActionUrl(z.getOpt("imageActionName"));var M=z.getOpt("imageAllowFiles");z.focus();z.execCommand("inserthtml",'<img class="loadingclass" id="'+R+'" src="'+z.options.themePath+z.options.theme+'/images/spacer.gif" title="'+(z.getLang("simpleupload.loading")||"")+'" >');function N(){try{var X,W,Y,U=(H.contentDocument||H.contentWindow.document).body,Z=U.innerText||U.textContent||"";W=(new Function("return "+Z))();X=z.options.imageUrlPrefix+W.url;if(W.state=="SUCCESS"&&W.url){Y=z.document.getElementById(R);Y.setAttribute("src",X);Y.setAttribute("_src",X);Y.setAttribute("title",W.title||"");Y.setAttribute("alt",W.original||"");Y.removeAttribute("id");e.removeClasses(Y,"loadingclass")}else{T&&T(W.state)}}catch(V){T&&T(z.getLang("simpleupload.loadError"))}G.reset();e.un(H,"load",N)}function T(V){if(R){var U=z.document.getElementById(R);U&&e.remove(U);z.fireEvent("showmessage",{"id":R,"content":V,"type":"error","timeout":4000})}}if(!z.getOpt("imageActionName")){errorHandler(z.getLang("autoupload.errorLoadConfig"));return}var P=I.value,O=P?P.substr(P.lastIndexOf(".")):"";if(!O||(M&&(M.join("")+".").indexOf(O.toLowerCase()+".")==-1)){T(z.getLang("simpleupload.exceedTypeError"));return}e.on(H,"load",N);G.action=u.formatUrl(Q+(Q.indexOf("?")==-1?"?":"&")+S);G.submit()});var J;z.addListener("selectionchange",function(){clearTimeout(J);J=setTimeout(function(){var M=z.queryCommandState("simpleupload");if(M==-1){I.disabled="disabled"}else{I.disabled=false}},400)});y=true});A.style.cssText=B;w.appendChild(A)}return{bindEvents:{"ready":function(){u.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n"+".loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;"+"}",this.document)},"simpleuploadbtnready":function(B,A){w=A;z.afterConfigReady(x)}},outputRule:function(A){u.each(A.getNodesByTagName("img"),function(B){if(/\b(loaderrorclass)|(bloaderrorclass)\b/.test(B.getAttr("class"))){B.parentNode.removeChild(B)}})},commands:{"simpleupload":{queryCommandState:function(){return y?0:-1}}}}});UE.plugin.register("serverparam",function(){var w=this,x={};return{commands:{"serverparam":{execCommand:function(y,z,A){if(z===undefined||z===null){x={}}else{if(u.isString(z)){if(A===undefined||A===null){delete x[z]}else{x[z]=A}}else{if(u.isObject(z)){u.extend(x,z,true)}else{if(u.isFunction(z)){u.extend(x,z(),true)}}}}},queryCommandValue:function(){return x||{}}}}}});UE.plugin.register("insertfile",function(){var x=this;function w(A){var y=A.substr(A.lastIndexOf(".")+1).toLowerCase(),z={"rar":"icon_rar.gif","zip":"icon_rar.gif","tar":"icon_rar.gif","gz":"icon_rar.gif","bz2":"icon_rar.gif","doc":"icon_doc.gif","docx":"icon_doc.gif","pdf":"icon_pdf.gif","mp3":"icon_mp3.gif","xls":"icon_xls.gif","chm":"icon_chm.gif","ppt":"icon_ppt.gif","pptx":"icon_ppt.gif","avi":"icon_mv.gif","rmvb":"icon_mv.gif","wmv":"icon_mv.gif","flv":"icon_mv.gif","swf":"icon_mv.gif","rm":"icon_mv.gif","exe":"icon_exe.gif","psd":"icon_psd.gif","txt":"icon_txt.gif","jpg":"icon_jpg.gif","png":"icon_jpg.gif","jpeg":"icon_jpg.gif","gif":"icon_jpg.gif","ico":"icon_jpg.gif","bmp":"icon_jpg.gif"};return z[y]?z[y]:z["txt"]}return{commands:{"insertfile":{execCommand:function(y,z){z=u.isArray(z)?z:[z];var B,E,C,F,A="",G=x.getOpt("UEDITOR_HOME_URL"),D=G+(G.substr(G.length-1)=="/"?"":"/")+"dialogs/attachment/fileTypeImages/";for(B=0;B<z.length;B++){E=z[B];C=D+w(E.url);F=E.title||E.url.substr(E.url.lastIndexOf("/")+1);A+='<p style="line-height: 16px;">'+'<img style="vertical-align: middle; margin-right: 2px;" src="'+C+'" _src="'+C+'" />'+'<a style="font-size:12px; color:#0066cc;" href="'+E.url+'" title="'+F+'">'+F+"</a>"+"</p>"}x.execCommand("insertHtml",A)}}}}});UE.plugins.xssFilter=function(){var w=UEDITOR_CONFIG;var z=w.whitList;function x(B){var C=B.tagName;var A=B.attrs;if(!z.hasOwnProperty(C)){B.parentNode.removeChild(B);return false}UE.utils.each(A,function(E,D){if(z[C].indexOf(D)===-1){B.setAttr(D)}})}if(z&&w.xssFilterRules){this.options.filterRules=function(){var A={};UE.utils.each(z,function(C,B){A[B]=function(D){return x(D)}});return A}()}var y=[];UE.utils.each(z,function(B,A){y.push(A)});if(z&&w.inputXssFilter){this.addInputRule(function(A){A.traversal(function(B){if(B.type!=="element"){return false}x(B)})})}if(z&&w.outputXssFilter){this.addOutputRule(function(A){A.traversal(function(B){if(B.type!=="element"){return false}x(B)})})}};var b=b||{};b.editor=b.editor||{};UE.ui=b.editor.ui={};(function(){var x=b.editor.browser,y=b.editor.dom.domUtils;var z="$EDITORUI";var A=window[z]={};var C="ID"+z;var B=0;var D=b.editor.ui.uiUtils={uid:function(F){return(F?F[C]||(F[C]=++B):++B)},hook:function(H,F){var G;if(H&&H._callbacks){G=H}else{G=function(){var K;if(H){K=H.apply(this,arguments)}var I=G._callbacks;var J=I.length;while(J--){var L=I[J].apply(this,arguments);if(K===undefined){K=L}}return K};G._callbacks=[]}G._callbacks.push(F);return G},createElementByHtml:function(G){var F=document.createElement("div");F.innerHTML=G;F=F.firstChild;F.parentNode.removeChild(F);return F},getViewportElement:function(){return(x.ie&&x.quirks)?document.body:document.documentElement},getClientRect:function(I){var F;try{F=I.getBoundingClientRect()}catch(H){F={left:0,top:0,height:0,width:0}}var J={left:Math.round(F.left),top:Math.round(F.top),height:Math.round(F.bottom-F.top),width:Math.round(F.right-F.left)};var G;while((G=I.ownerDocument)!==document&&(I=y.getWindow(G).frameElement)){F=I.getBoundingClientRect();J.left+=F.left;J.top+=F.top}J.bottom=J.top+J.height;J.right=J.left+J.width;return J},getViewportRect:function(){var G=D.getViewportElement();var H=(window.innerWidth||G.clientWidth)|0;var F=(window.innerHeight||G.clientHeight)|0;return{left:0,top:0,height:F,width:H,bottom:F,right:H}},setViewportOffset:function(F,H){var I;var G=D.getFixedLayer();if(F.parentNode===G){F.style.left=H.left+"px";F.style.top=H.top+"px"}else{y.setViewportOffset(F,H)}},getEventOffset:function(G){var F=G.target||G.srcElement;var I=D.getClientRect(F);var H=D.getViewportOffsetByEvent(G);return{left:H.left-I.left,top:H.top-I.top}},getViewportOffsetByEvent:function(G){var F=G.target||G.srcElement;var H=y.getWindow(F).frameElement;var I={left:G.clientX,top:G.clientY};if(H&&F.ownerDocument!==document){var J=D.getClientRect(H);I.left+=J.left;I.top+=J.top}return I},setGlobal:function(F,G){A[F]=G;return z+'["'+F+'"]'},unsetGlobal:function(F){delete A[F]},copyAttributes:function(J,I){var F=I.attributes;var H=F.length;while(H--){var G=F[H];if(G.nodeName!="style"&&G.nodeName!="class"&&(!x.ie||G.specified)){J.setAttribute(G.nodeName,G.nodeValue)}}if(I.className){y.addClass(J,I.className)}if(I.style.cssText){J.style.cssText+=";"+I.style.cssText}},removeStyle:function(F,G){if(F.style.removeProperty){F.style.removeProperty(G)}else{if(F.style.removeAttribute){F.style.removeAttribute(G)}else{throw""}}},contains:function(F,G){return F&&G&&(F===G?false:(F.contains?F.contains(G):F.compareDocumentPosition(G)&16))},startDrag:function(I,F,G){var G=G||document;var M=I.clientX;var N=I.clientY;function J(O){var P=O.clientX-M;var Q=O.clientY-N;F.ondragmove(P,Q,O);if(O.stopPropagation){O.stopPropagation()}else{O.cancelBubble=true}}if(G.addEventListener){function K(O){G.removeEventListener("mousemove",J,true);G.removeEventListener("mouseup",K,true);window.removeEventListener("mouseup",K,true);F.ondragstop()}G.addEventListener("mousemove",J,true);G.addEventListener("mouseup",K,true);window.addEventListener("mouseup",K,true);I.preventDefault()}else{var H=I.srcElement;H.setCapture();function L(){H.releaseCapture();H.detachEvent("onmousemove",J);H.detachEvent("onmouseup",L);H.detachEvent("onlosecaptrue",L);F.ondragstop()}H.attachEvent("onmousemove",J);H.attachEvent("onmouseup",L);H.attachEvent("onlosecaptrue",L);I.returnValue=false}F.ondragstart()},getFixedLayer:function(){var F=document.getElementById("edui_fixedlayer");if(F==null){F=document.createElement("div");F.id="edui_fixedlayer";document.body.appendChild(F);if(x.ie&&x.version<=8){F.style.position="absolute";w();setTimeout(E)}else{F.style.position="fixed"}F.style.left="0";F.style.top="0";F.style.width="0";F.style.height="0"}return F},makeUnselectable:function(F){if(x.opera||(x.ie&&x.version<9)){F.unselectable="on";if(F.hasChildNodes()){for(var G=0;G<F.childNodes.length;G++){if(F.childNodes[G].nodeType==1){D.makeUnselectable(F.childNodes[G])}}}}else{if(F.style.MozUserSelect!==undefined){F.style.MozUserSelect="none"}else{if(F.style.WebkitUserSelect!==undefined){F.style.WebkitUserSelect="none"}else{if(F.style.KhtmlUserSelect!==undefined){F.style.KhtmlUserSelect="none"}}}}}};function E(){var F=document.getElementById("edui_fixedlayer");D.setViewportOffset(F,{left:0,top:0})}function w(F){y.on(window,"scroll",E);y.on(window,"resize",b.editor.utils.defer(E,0,true))}})();(function(){var z=b.editor.utils,y=b.editor.ui.uiUtils,w=b.editor.EventBase,x=b.editor.ui.UIBase=function(){};x.prototype={className:"",uiName:"",initOptions:function(C){var B=this;for(var A in C){B[A]=C[A]}this.id=this.id||"edui"+y.uid()},initUIBase:function(){this._globalKey=z.unhtml(y.setGlobal(this.id,this))},render:function(B){var C=this.renderHtml();var A=y.createElementByHtml(C);var F=e.getElementsByTagName(A,"*");var I="edui-"+(this.theme||this.editor.options.theme);var E=document.getElementById("edui_fixedlayer");for(var D=0,G;G=F[D++];){e.addClass(G,I)}e.addClass(A,I);if(E){E.className="";e.addClass(E,I)}var H=this.getDom();if(H!=null){H.parentNode.replaceChild(A,H);y.copyAttributes(A,H)}else{if(typeof B=="string"){B=document.getElementById(B)}B=B||y.getFixedLayer();e.addClass(B,I);B.appendChild(A)}this.postRender()},getDom:function(A){if(!A){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+A)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(B){var A="edui-"+this.uiName;return(B.replace(/##/g,this.id).replace(/%%-/g,this.uiName?A+"-":"").replace(/%%/g,(this.uiName?A:"")+" "+this.className).replace(/\$\$/g,this._globalKey))},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var A=this.getDom();if(A){b.editor.dom.domUtils.remove(A)}y.unsetGlobal(this.id)}};z.inherits(x,w)})();(function(){var y=b.editor.utils,x=b.editor.ui.UIBase,w=b.editor.ui.Separator=function(z){this.initOptions(z);this.initSeparator()};w.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};y.inherits(w,x)})();(function(){var A=b.editor.utils,w=b.editor.dom.domUtils,y=b.editor.ui.UIBase,z=b.editor.ui.uiUtils;var x=b.editor.ui.Mask=function(B){this.initOptions(B);this.initUIBase()};x.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var B=this;w.on(window,"resize",function(){setTimeout(function(){if(!B.isHidden()){B._fill()}})})},show:function(B){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=B},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_onClick:function(B,C){this.fireEvent("click",B,C)},_fill:function(){var B=this.getDom();var C=z.getViewportRect();B.style.width=C.width+"px";B.style.height=C.height+"px"}};A.inherits(x,y)})();(function(){var D=b.editor.utils,C=b.editor.ui.uiUtils,z=b.editor.dom.domUtils,B=b.editor.ui.UIBase,A=b.editor.ui.Popup=function(E){this.initOptions(E);this.initPopup()};var w=[];function y(F,E){for(var G=0;G<w.length;G++){var H=w[G];if(!H.isHidden()){if(H.queryAutoHide(E)!==false){if(F&&/scroll/ig.test(F.type)&&H.className=="edui-wordpastepop"){return}H.hide()}}}if(w.length){H.editor.fireEvent("afterhidepop")}}A.postHide=y;var x=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];A.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();w.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;">'+' <div id="##_body" class="edui-popup-body">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div>"+" </div>"+"</div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:B.prototype.postRender,postRender:function(){if(this.content instanceof B){this.content.postRender()}if(this.captureWheel&&!this.captured){this.captured=true;var J=(document.documentElement.clientHeight||document.body.clientHeight)-80,E=this.getDom().offsetHeight,F=C.getClientRect(this.combox.getDom()).top,G=this.getDom("content"),H=this.getDom("body").getElementsByTagName("iframe"),I=this;H.length&&(H=H[0]);while(F+E>J){E-=30}G.style.height=E+"px";H&&(H.style.height=E+"px");if(window.XMLHttpRequest){z.on(G,("onmousewheel" in document.body)?"mousewheel":"DOMMouseScroll",function(K){if(K.preventDefault){K.preventDefault()}else{K.returnValue=false}if(K.wheelDelta){G.scrollTop-=(K.wheelDelta/120)*60}else{G.scrollTop-=(K.detail/-3)*60}})}else{z.on(this.getDom(),"mousewheel",function(K){K.returnValue=false;I.getDom("content").scrollTop-=(K.wheelDelta/120)*60})}}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var E=this.getDom("content");return C.getClientRect(E)},fitSize:function(){if(this.captureWheel&&this.sized){return this.__size}this.sized=true;var F=this.getDom("body");F.style.width="";F.style.height="";var G=this.mesureSize();if(this.captureWheel){F.style.width=-(-20-G.width)+"px";var E=parseInt(this.getDom("content").style.height,10);!window.isNaN(E)&&(G.height=E)}else{F.style.width=G.width+"px"}F.style.height=G.height+"px";this.__size=G;this.captureWheel&&(this.getDom("content").style.overflow="auto");return G},showAnchor:function(E,F){this.showAnchorRect(C.getClientRect(E),F)},showAnchorRect:function(J,F,E){this._doAutoRender();var N=C.getViewportRect();this.getDom().style.visibility="hidden";this._show();var I=this.fitSize();var K,L,G,M;if(F){K=this.canSideLeft&&(J.right+I.width>N.right&&J.left>I.width);L=this.canSideUp&&(J.top+I.height>N.bottom&&J.bottom>I.height);G=(K?J.left-I.width:J.right);M=(L?J.bottom-I.height:J.top)}else{K=this.canSideLeft&&(J.right+I.width>N.right&&J.left>I.width);L=this.canSideUp&&(J.top+I.height>N.bottom&&J.bottom>I.height);G=(K?J.right-I.width:J.left);M=(L?J.top-I.height:J.bottom)}var H=this.getDom();C.setViewportOffset(H,{left:G,top:M});z.removeClasses(H,x);H.className+=" "+x[(L?1:0)*2+(K?1:0)];if(this.editor){H.style.zIndex=this.editor.container.style.zIndex*1+10;b.editor.ui.uiUtils.getFixedLayer().style.zIndex=H.style.zIndex-1}this.getDom().style.visibility="visible"},showAt:function(F){var E=F.left;var H=F.top;var G={left:E,top:H,right:E,bottom:H,height:0,width:0};this.showAnchorRect(G,false,true)},_show:function(){if(this._hidden){var E=this.getDom();E.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(E){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!E){this.fireEvent("hide")}}},queryAutoHide:function(E){return !E||!C.contains(this.getDom(),E)}};D.inherits(A,B);z.on(document,"mousedown",function(F){var E=F.target||F.srcElement;y(F,E)});z.on(window,"scroll",function(F,E){y(F,E)})})();(function(){var A=b.editor.utils,z=b.editor.ui.UIBase,w=b.editor.ui.ColorPicker=function(B){this.initOptions(B);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};w.prototype={getHtmlTpl:function(){return y(this.noColorText,this.editor)},_onTableClick:function(C){var D=C.target||C.srcElement;var B=D.getAttribute("data-color");if(B){this.fireEvent("pickcolor",B)}},_onTableOver:function(C){var D=C.target||C.srcElement;var B=D.getAttribute("data-color");if(B){this.getDom("preview").style.backgroundColor=B}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};A.inherits(w,z);var x=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,"+"f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,"+"d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,"+"bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,"+"a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,"+"7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,"+"c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function y(E,B){var C='<div id="##" class="edui-colorpicker %%">'+'<div class="edui-colorpicker-topbar edui-clearfix">'+'<div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div>'+'<div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+E+"</div>"+"</div>"+'<table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0">'+'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+B.getLang("themeColor")+"</td> </tr>"+'<tr class="edui-colorpicker-tablefirstrow" >';for(var D=0;D<x.length;D++){if(D&&D%10===0){C+="</tr>"+(D==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+B.getLang("standardColor")+"</td></tr>":"")+"<tr"+(D==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}C+=D<70?'<td style="padding: 0 2px;"><a hidefocus title="'+x[D]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell"'+' data-color="#'+x[D]+'"'+' style="background-color:#'+x[D]+";border:solid #ccc;"+(D<10||D>=60?"border-width:1px;":D>=10&&D<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"'+"></a></td>":""}C+="</tr></table></div>";return C}})();(function(){var z=b.editor.utils,y=b.editor.ui.uiUtils,x=b.editor.ui.UIBase;var w=b.editor.ui.TablePicker=function(A){this.initOptions(A);this.initTablePicker()};w.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var A=this;return'<div id="##" class="edui-tablepicker %%">'+'<div class="edui-tablepicker-body">'+'<div class="edui-infoarea">'+'<span id="##_label" class="edui-label"></span>'+"</div>"+'<div class="edui-pickarea"'+' onmousemove="$$._onMouseMove(event, this);"'+' onmouseover="$$._onMouseOver(event, this);"'+' onmouseout="$$._onMouseOut(event, this);"'+' onclick="$$._onClick(event, this);"'+">"+'<div id="##_overlay" class="edui-overlay"></div>'+"</div>"+"</div>"+"</div>"},_UIBase_render:x.prototype.render,render:function(A){this._UIBase_render(A);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(B,C){var E=this.getDom("overlay").style;var D=this.lengthOfCellSide;E.width=B*D+"px";E.height=C*D+"px";var A=this.getDom("label");A.innerHTML=B+this.editor.getLang("t_col")+" x "+C+this.editor.getLang("t_row");this.numCols=B;this.numRows=C},_onMouseOver:function(B,A){var C=B.relatedTarget||B.fromElement;if(!y.contains(A,C)&&A!==C){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(B,A){var C=B.relatedTarget||B.toElement;if(!y.contains(A,C)&&A!==C){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(B,A){var G=this.getDom("overlay").style;var E=y.getEventOffset(B);var F=this.lengthOfCellSide;var C=Math.ceil(E.left/F);var D=Math.ceil(E.top/F);this._track(C,D)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};z.inherits(w,x)})();(function(){var w=b.editor.browser,x=b.editor.dom.domUtils,z=b.editor.ui.uiUtils;var y='onmousedown="$$.Stateful_onMouseDown(event, this);"'+' onmouseup="$$.Stateful_onMouseUp(event, this);"'+(w.ie?(' onmouseenter="$$.Stateful_onMouseEnter(event, this);"'+' onmouseleave="$$.Stateful_onMouseLeave(event, this);"'):(' onmouseover="$$.Stateful_onMouseOver(event, this);"'+' onmouseout="$$.Stateful_onMouseOut(event, this);"'));b.editor.ui.Stateful={alwalysHoverable:false,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var A=this._Stateful_dGetHtmlTpl();return A.replace(/stateful/g,function(){return y})},Stateful_onMouseEnter:function(B,A){this.target=A;if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(B,A){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(B,A){var C=B.relatedTarget;if(!z.contains(A,C)&&A!==C){this.Stateful_onMouseEnter(B,A)}},Stateful_onMouseOut:function(B,A){var C=B.relatedTarget;if(!z.contains(A,C)&&A!==C){this.Stateful_onMouseLeave(B,A)}},Stateful_onMouseDown:function(B,A){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(B,A){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(A){return x.hasClass(this.getStateDom(),"edui-state-"+A)},addState:function(A){if(!this.hasState(A)){this.getStateDom().className+=" edui-state-"+A}},removeState:function(A){if(this.hasState(A)){x.removeClasses(this.getStateDom(),["edui-state-"+A])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(A){if(!this.isDisabled()&&A){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(A){if(A){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var z=b.editor.utils,y=b.editor.ui.UIBase,x=b.editor.ui.Stateful,w=b.editor.ui.Button=function(C){if(C.name){var A=C.name;var B=C.cssRules;if(!C.className){C.className="edui-for-"+A}C.cssRules=".edui-default  .edui-for-"+A+" .edui-icon {"+B+"}"}this.initOptions(C);this.initButton()};w.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();if(this.cssRules){z.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+'<div id="##_state" stateful>'+'<div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div>"+"</div>"+"</div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(A){var C=A.target||A.srcElement,B=C&&C.tagName&&C.tagName.toLowerCase();if(B=="input"||B=="object"||B=="object"){return false}},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}},setTitle:function(B){var A=this.getDom("label");A.innerHTML=B}};z.inherits(w,y);z.extend(w.prototype,x)})();(function(){var B=b.editor.utils,A=b.editor.ui.uiUtils,w=b.editor.dom.domUtils,z=b.editor.ui.UIBase,y=b.editor.ui.Stateful,x=b.editor.ui.SplitButton=function(C){this.initOptions(C);this.initSplitButton()};x.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var C=this;if(this.popup!=null){var D=this.popup;this.popup=null;this.setPopup(D)}},_UIBase_postRender:z.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(C){if(this.popup===C){return}if(this.popup!=null){this.popup.dispose()}C.addListener("show",B.bind(this._onPopupShow,this));C.addListener("hide",B.bind(this._onPopupHide,this));C.addListener("postrender",B.bind(function(){C.getDom("body").appendChild(A.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(A.getClientRect(this.getDom()).width+20)+'px"></div>'));C.getDom().className+=" "+this.className},this));this.popup=C},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%">'+"<div "+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body">'+'<div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);">'+'<div class="edui-box edui-icon"></div>'+"</div>"+'<div class="edui-box edui-splitborder"></div>'+'<div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div>'+"</div></div></div>"},showPopup:function(){var C=A.getClientRect(this.getDom());C.top-=this.popup.SHADOW_RADIUS;C.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(C)},_onArrowClick:function(D,C){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};B.inherits(x,z);B.extend(x.prototype,y,true)})();(function(){var B=b.editor.utils,A=b.editor.ui.uiUtils,x=b.editor.ui.ColorPicker,y=b.editor.ui.Popup,z=b.editor.ui.SplitButton,w=b.editor.ui.ColorButton=function(C){this.initOptions(C);this.initColorButton()};w.prototype={initColorButton:function(){var C=this;this.popup=new y({content:new x({noColorText:C.editor.getLang("clearColor"),editor:C.editor,onpickcolor:function(E,D){C._onPickColor(D)},onpicknocolor:function(E,D){C._onPickNoColor(D)}}),editor:C.editor});this.initSplitButton()},_SplitButton_postRender:z.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(A.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(C){this.getDom("colorlump").style.backgroundColor=C;this.color=C},_onPickColor:function(C){if(this.fireEvent("pickcolor",C)!==false){this.setColor(C);this.popup.hide()}},_onPickNoColor:function(C){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};B.inherits(w,z)})();(function(){var A=b.editor.utils,w=b.editor.ui.Popup,z=b.editor.ui.TablePicker,x=b.editor.ui.SplitButton,y=b.editor.ui.TableButton=function(B){this.initOptions(B);this.initTableButton()};y.prototype={initTableButton:function(){var B=this;this.popup=new w({content:new z({editor:B.editor,onpicktable:function(E,C,D){B._onPickTable(C,D)}}),"editor":B.editor});this.initSplitButton()},_onPickTable:function(B,C){if(this.fireEvent("picktable",B,C)!==false){this.popup.hide()}}};A.inherits(y,x)})();(function(){var y=b.editor.utils,x=b.editor.ui.UIBase;var w=b.editor.ui.AutoTypeSetPicker=function(z){this.initOptions(z);this.initAutoTypeSetPicker()};w.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var B=this.editor,C=B.options.autotypeset,A=B.getLang("autoTypeSet");var E="textAlignValue"+B.uid,z="imageBlockLineValue"+B.uid,D="symbolConverValue"+B.uid;return'<div id="##" class="edui-autotypesetpicker %%">'+'<div class="edui-autotypesetpicker-body">'+"<table >"+'<tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(C["mergeEmptyline"]?"checked":"")+">"+A.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(C["removeEmptyline"]?"checked":"")+">"+A.delLine+"</td></tr>"+'<tr><td nowrap><input type="checkbox" name="removeClass" '+(C["removeClass"]?"checked":"")+">"+A.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(C["indent"]?"checked":"")+">"+A.indent+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="textAlign" '+(C["textAlign"]?"checked":"")+">"+A.alignment+"</td>"+'<td colspan="2" id="'+E+'">'+'<input type="radio" name="'+E+'" value="left" '+((C["textAlign"]&&C["textAlign"]=="left")?"checked":"")+">"+B.getLang("justifyleft")+'<input type="radio" name="'+E+'" value="center" '+((C["textAlign"]&&C["textAlign"]=="center")?"checked":"")+">"+B.getLang("justifycenter")+'<input type="radio" name="'+E+'" value="right" '+((C["textAlign"]&&C["textAlign"]=="right")?"checked":"")+">"+B.getLang("justifyright")+"</td>"+"</tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="imageBlockLine" '+(C["imageBlockLine"]?"checked":"")+">"+A.imageFloat+"</td>"+'<td nowrap id="'+z+'">'+'<input type="radio" name="'+z+'" value="none" '+((C["imageBlockLine"]&&C["imageBlockLine"]=="none")?"checked":"")+">"+B.getLang("default")+'<input type="radio" name="'+z+'" value="left" '+((C["imageBlockLine"]&&C["imageBlockLine"]=="left")?"checked":"")+">"+B.getLang("justifyleft")+'<input type="radio" name="'+z+'" value="center" '+((C["imageBlockLine"]&&C["imageBlockLine"]=="center")?"checked":"")+">"+B.getLang("justifycenter")+'<input type="radio" name="'+z+'" value="right" '+((C["imageBlockLine"]&&C["imageBlockLine"]=="right")?"checked":"")+">"+B.getLang("justifyright")+"</td>"+"</tr>"+'<tr><td nowrap><input type="checkbox" name="clearFontSize" '+(C["clearFontSize"]?"checked":"")+">"+A.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(C["clearFontFamily"]?"checked":"")+">"+A.removeFontFamily+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(C["removeEmptyNode"]?"checked":"")+">"+A.removeHtml+"</td></tr>"+'<tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(C["pasteFilter"]?"checked":"")+">"+A.pasteFilter+"</td></tr>"+"<tr>"+'<td nowrap><input type="checkbox" name="symbolConver" '+(C["bdc2sb"]||C["tobdc"]?"checked":"")+">"+A.symbol+"</td>"+'<td id="'+D+'">'+'<input type="radio" name="bdc" value="bdc2sb" '+(C["bdc2sb"]?"checked":"")+">"+A.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(C["tobdc"]?"checked":"")+">"+A.tobdc+""+"</td>"+'<td nowrap align="right"><button >'+A.run+"</button></td>"+"</tr>"+"</table>"+"</div>"+"</div>"},_UIBase_render:x.prototype.render};y.inherits(w,x)})();(function(){var B=b.editor.utils,z=b.editor.ui.Popup,x=b.editor.ui.AutoTypeSetPicker,A=b.editor.ui.SplitButton,w=b.editor.ui.AutoTypeSetButton=function(C){this.initOptions(C);this.initAutoTypeSetButton()};function y(O){var P={},F=O.getDom(),G=O.editor.uid,I=null,D=null,M=e.getElementsByTagName(F,"input");for(var H=M.length-1,J;J=M[H--];){I=J.getAttribute("type");if(I=="checkbox"){D=J.getAttribute("name");P[D]&&delete P[D];if(J.checked){var E=document.getElementById(D+"Value"+G);if(E){if(/input/ig.test(E.tagName)){P[D]=E.value}else{var L=E.getElementsByTagName("input");for(var N=L.length-1,K;K=L[N--];){if(K.checked){P[D]=K.value;break}}}}else{P[D]=true}}else{P[D]=false}}else{P[J.getAttribute("value")]=J.checked}}var Q=e.getElementsByTagName(F,"select");for(var H=0,R;R=Q[H++];){var C=R.getAttribute("name");P[C]=P[C]?R.value:""}B.extend(O.editor.options.autotypeset,P);O.editor.setPreferences("autotypeset",P)}w.prototype={initAutoTypeSetButton:function(){var D=this;this.popup=new z({content:new x({editor:D.editor}),"editor":D.editor,hide:function(){if(!this._hidden&&this.getDom()){y(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var C=0;this.popup.addListener("postRenderAfter",function(){var G=this;if(C){return}var F=this.getDom(),E=F.getElementsByTagName("button")[0];E.onclick=function(){y(G);D.editor.execCommand("autotypeset");G.hide()};e.on(F,"click",function(K){var P=K.target||K.srcElement,L=D.editor.uid;if(P&&P.tagName=="INPUT"){if(P.name=="imageBlockLine"||P.name=="textAlign"||P.name=="symbolConver"){var I=P.checked,O=document.getElementById(P.name+"Value"+L),N=O.getElementsByTagName("input"),J={"imageBlockLine":"none","textAlign":"left","symbolConver":"tobdc"};for(var M=0;M<N.length;M++){if(I){if(N[M].value==J[P.name]){N[M].checked="checked"}}else{N[M].checked=false}}}if(P.name==("imageBlockLineValue"+L)||P.name==("textAlignValue"+L)||P.name=="bdc"){var H=P.parentNode.previousSibling.getElementsByTagName("input");H&&(H[0].checked=true)}y(G)}});C=1});this.initSplitButton()}};B.inherits(w,A)})();(function(){var A=b.editor.utils,x=b.editor.ui.Popup,y=b.editor.ui.Stateful,z=b.editor.ui.UIBase;var w=b.editor.ui.CellAlignPicker=function(B){this.initOptions(B);this.initSelected();this.initCellAlignPicker()};w.prototype={initSelected:function(){var C={valign:{top:0,middle:1,bottom:2},align:{left:0,center:1,right:2},count:3},B=-1;if(this.selected){this.selectedIndex=C.valign[this.selected.valign]*C.count+C.align[this.selected.align]}},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){var B=["left","center","right"],C=9,E=null,F=-1,G=[];for(var D=0;D<C;D++){E=this.selectedIndex===D?' class="edui-cellalign-selected" ':"";F=D%3;F===0&&G.push("<tr>");G.push('<td index="'+D+'" '+E+' stateful><div class="edui-icon edui-'+B[F]+'"></div></td>');F===2&&G.push("</tr>")}return'<div id="##" class="edui-cellalignpicker %%">'+'<div class="edui-cellalignpicker-body">'+'<table onclick="$$._onClick(event);">'+G.join("")+"</table>"+"</div>"+"</div>"},getStateDom:function(){return this.target},_onClick:function(B){var C=B.target||B.srcElement;if(/icon/.test(C.className)){this.items[C.parentNode.getAttribute("index")].onclick();x.postHide(B)}},_UIBase_render:z.prototype.render};A.inherits(w,z);A.extend(w.prototype,y,true)})();(function(){var A=b.editor.utils,x=b.editor.ui.Stateful,z=b.editor.ui.uiUtils,y=b.editor.ui.UIBase;var w=b.editor.ui.PastePicker=function(B){this.initOptions(B);this.initPastePicker()};w.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div>'+'<div class="edui-pastecontainer">'+'<div class="edui-title">'+this.editor.getLang("pasteOpt")+"</div>"+'<div class="edui-button">'+'<div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful>'+'<div class="edui-richtxticon"></div></div>'+'<div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful>'+'<div class="edui-tagicon"></div></div>'+'<div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful>'+'<div class="edui-plaintxticon"></div></div>'+"</div>"+"</div>"+"</div>"},getStateDom:function(){return this.target},format:function(B){this.editor.ui._isTransfer=true;this.editor.fireEvent("pasteTransfer",B)},_onClick:function(B){var C=e.getNextDomNode(B),D=z.getViewportRect().height,E=z.getClientRect(C);if((E.top+E.height)>D){C.style.top=(-E.height-B.offsetHeight)+"px"}else{C.style.top=""}if(/hidden/ig.test(e.getComputedStyle(C,"visibility"))){C.style.visibility="visible";e.addClass(B,"edui-state-opened")}else{C.style.visibility="hidden";e.removeClasses(B,"edui-state-opened")}},_UIBase_render:y.prototype.render};A.inherits(w,y);A.extend(w.prototype,x,true)})();(function(){var z=b.editor.utils,y=b.editor.ui.uiUtils,x=b.editor.ui.UIBase,w=b.editor.ui.Toolbar=function(A){this.initOptions(A);this.initToolbar()};w.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(B,A){if(A===undefined){this.items.push(B)}else{this.items.splice(A,0,B)}},getHtmlTpl:function(){var A=[];for(var B=0;B<this.items.length;B++){A[B]=this.items[B].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+A.join("")+"</div>"},postRender:function(){var A=this.getDom();for(var B=0;B<this.items.length;B++){this.items[B].postRender()}y.makeUnselectable(A)},_onMouseDown:function(A){var C=A.target||A.srcElement,B=C&&C.tagName&&C.tagName.toLowerCase();if(B=="input"||B=="object"||B=="object"){return false}}};z.inherits(w,x)})();(function(){var F=b.editor.utils,x=b.editor.dom.domUtils,E=b.editor.ui.uiUtils,D=b.editor.ui.UIBase,B=b.editor.ui.Popup,C=b.editor.ui.Stateful,w=b.editor.ui.CellAlignPicker,y=b.editor.ui.Menu=function(G){this.initOptions(G);this.initMenu()};var A={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};y.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var G=0;G<this.items.length;G++){var H=this.items[G];if(H=="-"){this.items[G]=this.getSeparator()}else{if(!(H instanceof z)){H.editor=this.editor;H.theme=this.editor.options.theme;this.items[G]=this.createItem(H)}}}},getSeparator:function(){return A},createItem:function(G){G.menu=this;return new z(G)},_Popup_getContentHtmlTpl:B.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var G=[];for(var H=0;H<this.items.length;H++){var I=this.items[H];G[H]=I.renderHtml()}return('<div class="%%-body">'+G.join("")+"</div>")},_Popup_postRender:B.prototype.postRender,postRender:function(){var I=this;for(var G=0;G<this.items.length;G++){var H=this.items[G];H.ownerMenu=this;H.postRender()}x.on(this.getDom(),"mouseover",function(K){K=K||event;var L=K.relatedTarget||K.fromElement;var J=I.getDom();if(!E.contains(J,L)&&J!==L){I.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(G){if(G){if(E.contains(this.getDom(),G)){return false}for(var H=0;H<this.items.length;H++){var I=this.items[H];if(I.queryAutoHide(G)===false){return false}}}},clearItems:function(){for(var G=0;G<this.items.length;G++){var H=this.items[G];clearTimeout(H._showingTimer);clearTimeout(H._closingTimer);if(H.subMenu){H.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){x.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};F.inherits(y,B);var z=b.editor.ui.MenuItem=function(H){this.initOptions(H);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof y)){if(H.className&&H.className.indexOf("aligntd")!=-1){var G=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new B({content:new w(this.subMenu),parentMenu:G,editor:G.editor,destroy:function(){if(this.getDom()){x.remove(this.getDom())}}});this.subMenu.addListener("postRenderAfter",function(){x.on(this.getDom(),"mouseover",function(){G.addState("opened")})})}else{this.subMenu=new y(this.subMenu)}}};z.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);">'+'<div class="%%-body">'+this.renderLabelHtml()+"</div>"+"</div>"},postRender:function(){var G=this;this.addListener("over",function(){G.ownerMenu.fireEvent("submenuover",G);if(G.subMenu){G.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){G.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(G._closingTimer);G._closingTimer=null;G.addState("opened")});this.ownerMenu.addListener("hide",function(){G.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(I,H){if(H!==G){G.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(H){if(H&&E.contains(G.getDom(),H)){return false}return this._bakQueryAutoHide(H)}}this.getDom().style.tabIndex="-1";E.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var G=this;if(!G.isDisabled()){G.addState("opened");clearTimeout(G._showingTimer);clearTimeout(G._closingTimer);G._closingTimer=null;G._showingTimer=setTimeout(function(){G.showSubMenu()},250)}},delayHideSubMenu:function(){var G=this;if(!G.isDisabled()){G.removeState("opened");clearTimeout(G._showingTimer);if(!G._closingTimer){G._closingTimer=setTimeout(function(){if(!G.hasState("opened")){G.hideSubMenu()}G._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div>'+'<div class="edui-box edui-icon"></div>'+'<div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(G){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(G)}},_onClick:function(G,H){if(this.hasState("disabled")){return}if(this.fireEvent("click",G,H)!==false){if(this.subMenu){this.showSubMenu()}else{B.postHide(G)}}},showSubMenu:function(){var G=E.getClientRect(this.getDom());G.right-=5;G.left+=2;G.width-=7;G.top-=4;G.bottom+=4;G.height+=8;this.subMenu.showAnchorRect(G,true,true)},hideSubMenu:function(){this.subMenu.hide()}};F.inherits(z,D);F.extend(z.prototype,C,true)})();(function(){var A=b.editor.utils,z=b.editor.ui.uiUtils,x=b.editor.ui.Menu,y=b.editor.ui.SplitButton,w=b.editor.ui.Combox=function(B){this.initOptions(B);this.initCombox()};w.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var D=this;this.items=this.items||[];for(var B=0;B<this.items.length;B++){var C=this.items[B];C.uiName="listitem";C.index=B;C.onclick=function(){D.selectByIndex(this.index)}}this.popup=new x({items:this.items,uiName:"list",editor:this.editor,captureWheel:true,combox:this});this.initSplitButton()},_SplitButton_postRender:y.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var B=z.getClientRect(this.getDom());B.top+=1;B.bottom-=1;B.height-=2;this.popup.showAnchorRect(B)},getValue:function(){return this.value},setValue:function(C){var B=this.indexByValue(C);if(B!=-1){this.selectedIndex=B;this.setLabel(this.items[B].label);this.value=this.items[B].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(C));this.value=C}},setLabel:function(B){this.getDom("button_body").innerHTML=B;this.label=B},getLabelForUnknowValue:function(B){return B},indexByValue:function(C){for(var B=0;B<this.items.length;B++){if(C==this.items[B].value){return B}}return -1},getItem:function(B){return this.items[B]},selectByIndex:function(B){if(B<this.items.length&&this.fireEvent("select",B)!==false){this.selectedIndex=B;this.value=this.items[B].value;this.setLabel(this.items[B].label)}}};A.inherits(w,y)})();(function(){var F=b.editor.utils,z=b.editor.dom.domUtils,E=b.editor.ui.uiUtils,B=b.editor.ui.Mask,D=b.editor.ui.UIBase,x=b.editor.ui.Button,y=b.editor.ui.Dialog=function(I){if(I.name){var H=I.name;var G=I.cssRules;if(!I.className){I.className="edui-for-"+H}if(G){I.cssRules=".edui-default .edui-for-"+H+" .edui-dialog-content  {"+G+"}"}}this.initOptions(F.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(K,J){return J?this.onok():this.oncancel()},holdScroll:false},I));this.initDialog()};var C;var A;var w;y.prototype={draggable:false,uiName:"dialog",initDialog:function(){var H=this,I=this.editor.options.theme;if(this.cssRules){F.cssRule("edui-customize-"+this.name+"-style",this.cssRules)}this.initUIBase();this.modalMask=(C||(C=new B({className:"edui-dialog-modalmask",theme:I,onclick:function(){w&&w.close(false)}})));this.dragMask=(A||(A=new B({className:"edui-dialog-dragmask",theme:I})));this.closeButton=new x({className:"edui-dialog-closebutton",title:H.closeDialog,theme:I,onclick:function(){H.close(false)}});this.fullscreen&&this.initResizeEvent();if(this.buttons){for(var G=0;G<this.buttons.length;G++){if(!(this.buttons[G] instanceof x)){this.buttons[G]=new x(F.extend(this.buttons[G],{editor:this.editor},true))}}}},initResizeEvent:function(){var G=this;z.on(window,"resize",function(){if(G._hidden||G._hidden===undefined){return}if(G.__resizeTimer){window.clearTimeout(G.__resizeTimer)}G.__resizeTimer=window.setTimeout(function(){G.__resizeTimer=null;var J=G.getDom(),H=G.getDom("content"),L=UE.ui.uiUtils.getClientRect(J),I=UE.ui.uiUtils.getClientRect(H),K=E.getViewportRect();H.style.width=(K.width-L.width+I.width)+"px";H.style.height=(K.height-L.height+I.height)+"px";J.style.width=K.width+"px";J.style.height=K.height+"px";G.fireEvent("resize")},100)})},fitSize:function(){var G=this.getDom("body");var H=this.mesureSize();G.style.width=H.width+"px";G.style.height=H.height+"px";return H},safeSetOffset:function(J){var I=this;var G=I.getDom();var M=E.getViewportRect();var K=E.getClientRect(G);var H=J.left;if(H+K.width>M.right){H=M.right-K.width}var L=J.top;if(L+K.height>M.bottom){L=M.bottom-K.height}G.style.left=Math.max(H,0)+"px";G.style.top=Math.max(L,0)+"px"},showAtCenter:function(){var O=E.getViewportRect();if(!this.fullscreen){this.getDom().style.display="";var L=this.fitSize();var M=this.getDom("titlebar").offsetHeight|0;var J=O.width/2-L.width/2;var N=O.height/2-(L.height-M)/2-M;var K=this.getDom();this.safeSetOffset({left:Math.max(J|0,0),top:Math.max(N|0,0)});if(!z.hasClass(K,"edui-state-centered")){K.className+=" edui-state-centered"}}else{var I=this.getDom(),G=this.getDom("content");I.style.display="block";var P=UE.ui.uiUtils.getClientRect(I),H=UE.ui.uiUtils.getClientRect(G);I.style.left="-100000px";G.style.width=(O.width-P.width+H.width)+"px";G.style.height=(O.height-P.height+H.height)+"px";I.style.width=O.width+"px";I.style.height=O.height+"px";I.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY="hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}this._show()},getContentHtml:function(){var G="";if(typeof this.content=="string"){G=this.content}else{if(this.iframeUrl){G='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}}return G},getHtmlTpl:function(){var H="";if(this.buttons){var G=[];for(var I=0;I<this.buttons.length;I++){G[I]=this.buttons[I].renderHtml()}H='<div class="%%-foot">'+'<div id="##_buttons" class="%%-buttons">'+G.join("")+"</div>"+"</div>"}return'<div id="##" class="%%"><div '+(!this.fullscreen?'class="%%"':'class="%%-wrap edui-dialog-fullscreen-flag"')+'><div id="##_body" class="%%-body">'+'<div class="%%-shadow"></div>'+'<div id="##_titlebar" class="%%-titlebar">'+'<div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);">'+'<span class="%%-caption">'+(this.title||"")+"</span>"+"</div>"+this.closeButton.renderHtml()+"</div>"+'<div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+H+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var H=this;this.addListener("show",function(){H.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){H.modalMask.hide()});if(this.buttons){for(var G=0;G<this.buttons.length;G++){this.buttons[G].postRender()}}z.on(window,"resize",function(){setTimeout(function(){if(!H.isHidden()){H.safeSetOffset(E.getClientRect(H.getDom()))}})});this._hide()},mesureSize:function(){var G=this.getDom("body");var I=E.getClientRect(this.getDom("content")).width;var H=G.style;H.width=I;return E.getClientRect(G)},_onTitlebarMouseDown:function(H,G){if(this.draggable){var J;var K=E.getViewportRect();var I=this;E.startDrag(H,{ondragstart:function(){J=E.getClientRect(I.getDom());I.getDom("contmask").style.visibility="visible";I.dragMask.show(I.getDom().style.zIndex-1)},ondragmove:function(N,O){var L=J.left+N;var M=J.top+O;I.safeSetOffset({left:L,top:M})},ondragstop:function(){I.getDom("contmask").style.visibility="hidden";z.removeClasses(I.getDom(),["edui-state-centered"]);I.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");b.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var G=this.getDom();G.style.display="none";G.style.zIndex="";G.style.width="";G.style.height="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(G){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(H){}}w=this},_onCloseButtonClick:function(H,G){this.close(false)},close:function(J){if(this.fireEvent("close",J)!==false){if(this.fullscreen){document.documentElement.style.overflowX=this._originalContext.html.overflowX;document.documentElement.style.overflowY=this._originalContext.html.overflowY;document.body.style.overflowX=this._originalContext.body.overflowX;document.body.style.overflowY=this._originalContext.body.overflowY;delete this._originalContext}this._hide();var G=this.getDom("content");var I=this.getDom("iframe");if(G&&I){var H=I.contentDocument||I.contentWindow.document;H&&(H.body.innerHTML="");z.remove(G)}}}};F.inherits(y,D)})();(function(){var z=b.editor.utils,w=b.editor.ui.Menu,y=b.editor.ui.SplitButton,x=b.editor.ui.MenuButton=function(A){this.initOptions(A);this.initMenuButton()};x.prototype={initMenuButton:function(){var A=this;this.uiName="menubutton";this.popup=new w({items:A.items,className:A.className,editor:A.editor});this.popup.addListener("show",function(){var C=this;for(var B=0;B<C.items.length;B++){C.items[B].removeState("checked");if(C.items[B].value==A._value){C.items[B].addState("checked");this.value=A._value}}});this.initSplitButton()},setValue:function(A){this._value=A}};z.inherits(x,y)})();(function(){var z=b.editor.utils,x=b.editor.ui.Popup,y=b.editor.ui.SplitButton,w=b.editor.ui.MultiMenuPop=function(A){this.initOptions(A);this.initMultiMenu()};w.prototype={initMultiMenu:function(){var A=this;this.popup=new x({content:"",editor:A.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+A.id+'_iframe" src="'+A.iframeUrl+'" frameborder="0"></iframe>';A.editor.container.style.zIndex&&(this.getDom().style.zIndex=A.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};z.inherits(w,y)})();(function(){var C=b.editor.ui,D=C.UIBase,E=C.uiUtils,F=b.editor.utils,x=b.editor.dom.domUtils;var w=[],B,z=false;var A=C.ShortCutMenu=function(G){this.initOptions(G);this.initShortCutMenu()};A.postHide=y;A.prototype={isHidden:true,SPACE:5,initShortCutMenu:function(){this.items=this.items||[];this.initUIBase();this.initItems();this.initEvent();w.push(this)},initEvent:function(){var H=this,G=H.editor.document;x.on(G,"mousemove",function(K){if(H.isHidden===false){if(H.getSubMenuMark()||H.eventType=="contextmenu"){return}var M=true,L=H.getDom(),O=L.offsetWidth,N=L.offsetHeight,I=O/2+H.SPACE,J=N/2,P=Math.abs(K.screenX-H.left),Q=Math.abs(K.screenY-H.top);clearTimeout(B);B=setTimeout(function(){if(Q>0&&Q<J){H.setOpacity(L,"1")}else{if(Q>J&&Q<J+70){H.setOpacity(L,"0.5");M=false}else{if(Q>J+70&&Q<J+140){H.hide()}}}if(M&&P>0&&P<I){H.setOpacity(L,"1")}else{if(P>I&&P<I+70){H.setOpacity(L,"0.5")}else{if(P>I+70&&P<I+140){H.hide()}}}})}});if(c.chrome){x.on(G,"mouseout",function(I){var J=I.relatedTarget||I.toElement;if(J==null||J.tagName=="HTML"){H.hide()}})}H.editor.addListener("afterhidepop",function(){if(!H.isHidden){z=true}})},initItems:function(){if(F.isArray(this.items)){for(var G=0,I=this.items.length;G<I;G++){var H=this.items[G].toLowerCase();if(C[H]){this.items[G]=new C[H](this.editor);this.items[G].className+=" edui-shortcutsubmenu "}}}},setOpacity:function(G,H){if(c.ie&&c.version<9){G.style.filter="alpha(opacity = "+parseFloat(H)*100+");"}else{G.style.opacity=H}},getSubMenuMark:function(){z=false;var H=E.getFixedLayer();var I=x.getElementsByTagName(H,"div",function(K){return x.hasClass(K,"edui-shortcutsubmenu edui-popup")});for(var G=0,J;J=I[G++];){if(J.style.display!="none"){z=true}}return z},show:function(G,J){var K=this,M={},H=this.getDom(),I=E.getFixedLayer();function N(P){if(P.left<0){P.left=0}if(P.top<0){P.top=0}H.style.cssText="position:absolute;left:"+P.left+"px;top:"+P.top+"px;"}function O(P){if(!P.tagName){P=P.getDom()}M.left=parseInt(P.style.left);M.top=parseInt(P.style.top);M.top-=H.offsetHeight+15;N(M)}K.eventType=G.type;H.style.cssText="display:block;left:-9999px";if(G.type=="contextmenu"&&J){var L=x.getElementsByTagName(I,"div","edui-contextmenu")[0];if(L){O(L)}else{K.editor.addListener("aftershowcontextmenu",function(Q,P){O(P)})}}else{M=E.getViewportOffsetByEvent(G);M.top-=H.offsetHeight+K.SPACE;M.left+=K.SPACE+20;N(M);K.setOpacity(H,0.2)}K.isHidden=false;K.left=G.screenX+H.offsetWidth/2-K.SPACE;K.top=G.screenY-(H.offsetHeight/2)-K.SPACE;if(K.editor){H.style.zIndex=K.editor.container.style.zIndex*1+10;I.style.zIndex=H.style.zIndex-1}},hide:function(){if(this.getDom()){this.getDom().style.display="none"}this.isHidden=true},postRender:function(){if(F.isArray(this.items)){for(var G=0,H;H=this.items[G++];){H.postRender()}}},getHtmlTpl:function(){var G;if(F.isArray(this.items)){G=[];for(var H=0;H<this.items.length;H++){G[H]=this.items[H].renderHtml()}G=G.join("")}else{G=this.items}return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+G+"</div>"}};F.inherits(A,D);function y(H){var K=H.target||H.srcElement,G=x.findParent(K,function(L){return x.hasClass(L,"edui-shortcutmenu")||x.hasClass(L,"edui-popup")},true);if(!G){for(var I=0,J;J=w[I++];){J.hide()}}}x.on(document,"mousedown",function(G){y(G)});x.on(window,"scroll",function(G){y(G)})})();(function(){var y=b.editor.utils,x=b.editor.ui.UIBase,w=b.editor.ui.Breakline=function(z){this.initOptions(z);this.initSeparator()};w.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};y.inherits(w,x)})();(function(){var z=b.editor.utils,w=b.editor.dom.domUtils,y=b.editor.ui.UIBase,x=b.editor.ui.Message=function(A){this.initOptions(A);this.initMessage()};x.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%">'+' <div id="##_closer" class="edui-message-closer"></div>'+' <div id="##_body" class="edui-message-body edui-message-type-info">'+' <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe>'+' <div class="edui-shadow"></div>'+' <div id="##_content" class="edui-message-content">'+"  </div>"+" </div>"+"</div>"},reset:function(B){var A=this;if(!B.keepshow){clearTimeout(this.timer);A.timer=setTimeout(function(){A.hide()},B.timeout||4000)}B.content!==undefined&&A.setContent(B.content);B.type!==undefined&&A.setType(B.type);A.show()},postRender:function(){var B=this,A=this.getDom("closer");A&&w.on(A,"click",function(){B.hide()})},setContent:function(A){this.getDom("content").innerHTML=A},setType:function(B){B=B||"info";var A=this.getDom("body");A.className=A.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+B)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var A=this.getDom("body").match(/edui-message-type-([\w-]+)/);return A?A[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var A=this.getDom();if(A){A.style.display="none";A.parentNode&&A.parentNode.removeChild(A)}}};z.inherits(x,y)})();(function(){var L=b.editor.utils;var B=b.editor.ui;var w=B.Dialog;B.buttons={};B.Dialog=function(N){var M=new w(N);M.addListener("hide",function(){if(M.editor){var O=M.editor;try{if(c.gecko){var R=O.window.scrollY,Q=O.window.scrollX;O.body.focus();O.window.scrollTo(Q,R)}else{O.focus()}}catch(P){}}});return M};var D={"anchor":"~/dialogs/anchor/anchor.html","insertimage":"~/dialogs/image/image.html","link":"~/dialogs/link/link.html","spechars":"~/dialogs/spechars/spechars.html","searchreplace":"~/dialogs/searchreplace/searchreplace.html","map":"~/dialogs/map/map.html","gmap":"~/dialogs/gmap/gmap.html","insertvideo":"~/dialogs/video/video.html","help":"~/dialogs/help/help.html","preview":"~/dialogs/preview/preview.html","emotion":"~/dialogs/emotion/emotion.html","wordimage":"~/dialogs/wordimage/wordimage.html","attachment":"~/dialogs/attachment/attachment.html","insertframe":"~/dialogs/insertframe/insertframe.html","edittip":"~/dialogs/table/edittip.html","edittable":"~/dialogs/table/edittable.html","edittd":"~/dialogs/table/edittd.html","webapp":"~/dialogs/webapp/webapp.html","snapscreen":"~/dialogs/snapscreen/snapscreen.html","scrawl":"~/dialogs/scrawl/scrawl.html","music":"~/dialogs/music/music.html","template":"~/dialogs/template/template.html","background":"~/dialogs/background/background.html","charts":"~/dialogs/charts/charts.html"};var x=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"];for(var C=0,y;y=x[C++];){y=y.toLowerCase();B[y]=function(M){return function(N){var O=new B.Button({className:"edui-for-"+M,title:N.options.labelMap[M]||N.getLang("labelMap."+M)||"",onclick:function(){N.execCommand(M)},theme:N.options.theme,showText:false});B.buttons[M]=O;N.addListener("selectionchange",function(R,P,S){var Q=N.queryCommandState(M);if(Q==-1){O.setDisabled(true);O.setChecked(false)}else{if(!S){O.setDisabled(false);O.setChecked(Q)}}});return O}}(y)}B.cleardoc=function(M){var N=new B.Button({className:"edui-for-cleardoc",title:M.options.labelMap.cleardoc||M.getLang("labelMap.cleardoc")||"",theme:M.options.theme,onclick:function(){if(confirm(M.getLang("confirmClear"))){M.execCommand("cleardoc")}}});B.buttons["cleardoc"]=N;M.addListener("selectionchange",function(){N.setDisabled(M.queryCommandState("cleardoc")==-1)});return N};var K={"justify":["left","right","center","justify"],"imagefloat":["none","left","center","right"],"directionality":["ltr","rtl"]};for(var G in K){(function(N,P){for(var O=0,M;M=P[O++];){(function(Q){B[N.replace("float","")+Q]=function(R){var S=new B.Button({className:"edui-for-"+N.replace("float","")+Q,title:R.options.labelMap[N.replace("float","")+Q]||R.getLang("labelMap."+N.replace("float","")+Q)||"",theme:R.options.theme,onclick:function(){R.execCommand(N,Q)}});B.buttons[N]=S;R.addListener("selectionchange",function(U,T,V){S.setDisabled(R.queryCommandState(N)==-1);S.setChecked(R.queryCommandValue(N)==Q&&!V)});return S}})(M)}})(G,K[G])}for(var C=0,y;y=["backcolor","forecolor"][C++];){B[y]=function(M){return function(N){var O=new B.ColorButton({className:"edui-for-"+M,color:"default",title:N.options.labelMap[M]||N.getLang("labelMap."+M)||"",editor:N,onpickcolor:function(Q,P){N.execCommand(M,P)},onpicknocolor:function(){N.execCommand(M,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){N.execCommand(M,this.color)}});B.buttons[M]=O;N.addListener("selectionchange",function(){O.setDisabled(N.queryCommandState(M)==-1)});return O}}(y)}var A={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var G in A){(function(O,P){for(var N=0,M;M=P[N++];){if(c.opera&&M==="searchreplace"){continue}(function(Q){B[Q]=function(S,T,U){T=T||(S.options.iframeUrlMap||{})[Q]||D[Q];U=S.options.labelMap[Q]||S.getLang("labelMap."+Q)||"";var R;if(T){R=new B.Dialog(L.extend({iframeUrl:S.ui.mapUrl(T),editor:S,className:"edui-for-"+Q,title:U,holdScroll:Q==="insertimage",fullscreen:/charts|preview/.test(Q),closeDialog:S.getLang("closeDialog")},O=="ok"?{buttons:[{className:"edui-okbutton",label:S.getLang("ok"),editor:S,onclick:function(){R.close(true)}},{className:"edui-cancelbutton",label:S.getLang("cancel"),editor:S,onclick:function(){R.close(false)}}]}:{}));S.ui._dialogs[Q+"Dialog"]=R}var V=new B.Button({className:"edui-for-"+Q,title:U,onclick:function(){if(R){switch(Q){case"wordimage":var W=S.execCommand("wordimage");if(W&&W.length){R.render();R.open()}break;case"scrawl":if(S.queryCommandState("scrawl")!=-1){R.render();R.open()}break;default:R.render();R.open()}}},theme:S.options.theme,disabled:(Q=="scrawl"&&S.queryCommandState("scrawl")==-1)||(Q=="charts")});B.buttons[Q]=V;S.addListener("selectionchange",function(){var X={"edittable":1};if(Q in X){return}var W=S.queryCommandState(Q);if(V.getDom()){V.setDisabled(W==-1);V.setChecked(W)}});return V}})(M.toLowerCase())}})(G,A[G])}B.snapscreen=function(N,O,P){P=N.options.labelMap["snapscreen"]||N.getLang("labelMap.snapscreen")||"";var Q=new B.Button({className:"edui-for-snapscreen",title:P,onclick:function(){N.execCommand("snapscreen")},theme:N.options.theme});B.buttons["snapscreen"]=Q;O=O||(N.options.iframeUrlMap||{})["snapscreen"]||D["snapscreen"];if(O){var M=new B.Dialog({iframeUrl:N.ui.mapUrl(O),editor:N,className:"edui-for-snapscreen",title:P,buttons:[{className:"edui-okbutton",label:N.getLang("ok"),editor:N,onclick:function(){M.close(true)}},{className:"edui-cancelbutton",label:N.getLang("cancel"),editor:N,onclick:function(){M.close(false)}}]});M.render();N.ui._dialogs["snapscreenDialog"]=M}N.addListener("selectionchange",function(){Q.setDisabled(N.queryCommandState("snapscreen")==-1)});return Q};B.insertcode=function(M,O,P){O=M.options["insertcode"]||[];P=M.options.labelMap["insertcode"]||M.getLang("labelMap.insertcode")||"";var N=[];L.each(O,function(R,S){N.push({label:R,value:S,theme:M.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var Q=new B.Combox({editor:M,items:N,onselect:function(S,R){M.execCommand("insertcode",this.items[R].value)},onbuttonclick:function(){this.showPopup()},title:P,initValue:P,className:"edui-for-insertcode",indexByValue:function(T){if(T){for(var S=0,R;R=this.items[S];S++){if(R.value.indexOf(T)!=-1){return S}}}return -1}});B.buttons["insertcode"]=Q;M.addListener("selectionchange",function(T,R,U){if(!U){var S=M.queryCommandState("insertcode");if(S==-1){Q.setDisabled(true)}else{Q.setDisabled(false);var V=M.queryCommandValue("insertcode");if(!V){Q.setValue(P);return}V&&(V=V.replace(/['"]/g,"").split(",")[0]);Q.setValue(V)}}});return Q};B.fontfamily=function(N,R,S){R=N.options["fontfamily"]||[];S=N.options.labelMap["fontfamily"]||N.getLang("labelMap.fontfamily")||"";if(!R.length){return}for(var O=0,M,P=[];M=R[O];O++){var Q=N.getLang("fontfamily")[M.name]||"";(function(U,V){P.push({label:U,value:V,theme:N.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+L.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(M.label||Q,M.val)}var T=new B.Combox({editor:N,items:P,onselect:function(V,U){N.execCommand("FontFamily",this.items[U].value)},onbuttonclick:function(){this.showPopup()},title:S,initValue:S,className:"edui-for-fontfamily",indexByValue:function(W){if(W){for(var V=0,U;U=this.items[V];V++){if(U.value.indexOf(W)!=-1){return V}}}return -1}});B.buttons["fontfamily"]=T;N.addListener("selectionchange",function(W,U,X){if(!X){var V=N.queryCommandState("FontFamily");if(V==-1){T.setDisabled(true)}else{T.setDisabled(false);var Y=N.queryCommandValue("FontFamily");Y&&(Y=Y.replace(/['"]/g,"").split(",")[0]);T.setValue(Y)}}});return T};B.fontsize=function(M,P,R){R=M.options.labelMap["fontsize"]||M.getLang("labelMap.fontsize")||"";P=P||M.options["fontsize"]||[];if(!P.length){return}var O=[];for(var N=0;N<P.length;N++){var Q=P[N]+"px";O.push({label:Q,value:Q,theme:M.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var S=new B.Combox({editor:M,items:O,title:R,initValue:R,onselect:function(U,T){M.execCommand("FontSize",this.items[T].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});B.buttons["fontsize"]=S;M.addListener("selectionchange",function(V,T,W){if(!W){var U=M.queryCommandState("FontSize");if(U==-1){S.setDisabled(true)}else{S.setDisabled(false);S.setValue(M.queryCommandValue("FontSize"))}}});return S};B.paragraph=function(M,P,Q){Q=M.options.labelMap["paragraph"]||M.getLang("labelMap.paragraph")||"";P=M.options["paragraph"]||[];if(L.isEmptyObject(P)){return}var O=[];for(var N in P){O.push({value:N,label:P[N]||M.getLang("paragraph")[N],theme:M.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var R=new B.Combox({editor:M,items:O,title:Q,initValue:Q,className:"edui-for-paragraph",onselect:function(T,S){M.execCommand("Paragraph",this.items[S].value)},onbuttonclick:function(){this.showPopup()}});B.buttons["paragraph"]=R;M.addListener("selectionchange",function(V,S,W){if(!W){var U=M.queryCommandState("Paragraph");if(U==-1){R.setDisabled(true)}else{R.setDisabled(false);var X=M.queryCommandValue("Paragraph");var T=R.indexByValue(X);if(T!=-1){R.setValue(X)}else{R.setValue(R.initValue)}}}});return R};B.customstyle=function(M){var Q=M.options["customstyle"]||[],S=M.options.labelMap["customstyle"]||M.getLang("labelMap.customstyle")||"";if(!Q.length){return}var P=M.getLang("customstyle");for(var N=0,O=[],R;R=Q[N++];){(function(V){var U={};U.label=V.label?V.label:P[V.name];U.style=V.style;U.className=V.className;U.tag=V.tag;O.push({label:U.label,value:U,theme:M.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label">'+"<"+U.tag+" "+(U.className?' class="'+U.className+'"':"")+(U.style?' style="'+U.style+'"':"")+">"+U.label+"</"+U.tag+">"+"</div>"}})})(R)}var T=new B.Combox({editor:M,items:O,title:S,initValue:S,className:"edui-for-customstyle",onselect:function(V,U){M.execCommand("customstyle",this.items[U].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(W){for(var U=0,V;V=this.items[U++];){if(V.label==W){return U-1}}return -1}});B.buttons["customstyle"]=T;M.addListener("selectionchange",function(X,U,Y){if(!Y){var W=M.queryCommandState("customstyle");if(W==-1){T.setDisabled(true)}else{T.setDisabled(false);var Z=M.queryCommandValue("customstyle");var V=T.indexByValue(Z);if(V!=-1){T.setValue(Z)}else{T.setValue(T.initValue)}}}});return T};B.inserttable=function(M,N,O){O=M.options.labelMap["inserttable"]||M.getLang("labelMap.inserttable")||"";var P=new B.TableButton({editor:M,title:O,className:"edui-for-inserttable",onpicktable:function(S,Q,R){M.execCommand("InsertTable",{numRows:R,numCols:Q,border:1})},onbuttonclick:function(){this.showPopup()}});B.buttons["inserttable"]=P;M.addListener("selectionchange",function(){P.setDisabled(M.queryCommandState("inserttable")==-1)});return P};B.lineheight=function(N){var R=N.options.lineheight||[];if(!R.length){return}for(var O=0,M,P=[];M=R[O++];){P.push({label:M,value:M,theme:N.options.theme,onclick:function(){N.execCommand("lineheight",this.value)}})}var Q=new B.MenuButton({editor:N,className:"edui-for-lineheight",title:N.options.labelMap["lineheight"]||N.getLang("labelMap.lineheight")||"",items:P,onbuttonclick:function(){var S=N.queryCommandValue("LineHeight")||this.value;N.execCommand("LineHeight",S)}});B.buttons["lineheight"]=Q;N.addListener("selectionchange",function(){var S=N.queryCommandState("LineHeight");if(S==-1){Q.setDisabled(true)}else{Q.setDisabled(false);var T=N.queryCommandValue("LineHeight");T&&Q.setValue((T+"").replace(/cm/,""));Q.setChecked(S)}});return Q};var J=["top","bottom"];for(var H=0,I;I=J[H++];){(function(M){B["rowspacing"+M]=function(O){var S=O.options["rowspacing"+M]||[];if(!S.length){return null}for(var P=0,N,Q=[];N=S[P++];){Q.push({label:N,value:N,theme:O.options.theme,onclick:function(){O.execCommand("rowspacing",this.value,M)}})}var R=new B.MenuButton({editor:O,className:"edui-for-rowspacing"+M,title:O.options.labelMap["rowspacing"+M]||O.getLang("labelMap.rowspacing"+M)||"",items:Q,onbuttonclick:function(){var T=O.queryCommandValue("rowspacing",M)||this.value;O.execCommand("rowspacing",T,M)}});B.buttons[M]=R;O.addListener("selectionchange",function(){var T=O.queryCommandState("rowspacing",M);if(T==-1){R.setDisabled(true)}else{R.setDisabled(false);var U=O.queryCommandValue("rowspacing",M);U&&R.setValue((U+"").replace(/%/,""));R.setChecked(T)}});return R}})(I)}var F=["insertorderedlist","insertunorderedlist"];for(var E=0,z;z=F[E++];){(function(M){B[M]=function(O){var S=O.options[M],N=function(){O.execCommand(M,this.value)},Q=[];for(var P in S){Q.push({label:S[P]||O.getLang()[M][P]||"",value:P,theme:O.options.theme,onclick:N})}var R=new B.MenuButton({editor:O,className:"edui-for-"+M,title:O.getLang("labelMap."+M)||"","items":Q,onbuttonclick:function(){var T=O.queryCommandValue(M)||this.value;O.execCommand(M,T)}});B.buttons[M]=R;O.addListener("selectionchange",function(){var T=O.queryCommandState(M);if(T==-1){R.setDisabled(true)}else{R.setDisabled(false);var U=O.queryCommandValue(M);R.setValue(U);R.setChecked(T)}});return R}})(z)}B.fullscreen=function(M,N){N=M.options.labelMap["fullscreen"]||M.getLang("labelMap.fullscreen")||"";var O=new B.Button({className:"edui-for-fullscreen",title:N,theme:M.options.theme,onclick:function(){if(M.ui){M.ui.setFullScreen(!M.ui.isFullScreen())}this.setChecked(M.ui.isFullScreen())}});B.buttons["fullscreen"]=O;M.addListener("selectionchange",function(){var P=M.queryCommandState("fullscreen");O.setDisabled(P==-1);O.setChecked(M.ui.isFullScreen())});return O};B["emotion"]=function(N,O){var M="emotion";var P=new B.MultiMenuPop({title:N.options.labelMap[M]||N.getLang("labelMap."+M+"")||"",editor:N,className:"edui-for-"+M,iframeUrl:N.ui.mapUrl(O||(N.options.iframeUrlMap||{})[M]||D[M])});B.buttons[M]=P;N.addListener("selectionchange",function(){P.setDisabled(N.queryCommandState(M)==-1)});return P};B.autotypeset=function(M){var N=new B.AutoTypeSetButton({editor:M,title:M.options.labelMap["autotypeset"]||M.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){M.execCommand("autotypeset")}});B.buttons["autotypeset"]=N;M.addListener("selectionchange",function(){N.setDisabled(M.queryCommandState("autotypeset")==-1)});return N};B["simpleupload"]=function(M){var N="simpleupload",O=new B.Button({className:"edui-for-"+N,title:M.options.labelMap[N]||M.getLang("labelMap."+N)||"",onclick:function(){},theme:M.options.theme,showText:false});B.buttons[N]=O;M.addListener("ready",function(){var P=O.getDom("body"),Q=P.children[0];M.fireEvent("simpleuploadbtnready",Q)});M.addListener("selectionchange",function(R,P,S){var Q=M.queryCommandState(N);if(Q==-1){O.setDisabled(true);O.setChecked(false)}else{if(!S){O.setDisabled(false);O.setChecked(Q)}}});return O}})();(function(){var C=b.editor.utils,B=b.editor.ui.uiUtils,A=b.editor.ui.UIBase,w=b.editor.dom.domUtils;var z=[];function x(D){this.initOptions(D);this.initEditorUI()}x.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var D=this.editor,F=this;D.addListener("ready",function(){D.getDialog=function(L){return D.ui._dialogs[L+"Dialog"]};w.on(D.window,"scroll",function(L){b.editor.ui.Popup.postHide(L)});D.ui._actualFrameWidth=D.options.initialFrameWidth;UE.browser.ie&&UE.browser.version===6&&D.container.ownerDocument.execCommand("BackgroundImageCache",false,true);if(D.options.elementPathEnabled){D.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+D.getLang("elementPathTip")+":</div>"}if(D.options.wordCount){function K(){I(D,F);w.un(D.document,"click",arguments.callee)}w.on(D.document,"click",K);D.ui.getDom("wordcount").innerHTML=D.getLang("wordCountTip")}D.ui._scale();if(D.options.scaleEnabled){if(D.autoHeightEnabled){D.disableAutoHeight()}F.enableScale()}else{F.disableScale()}if(!D.options.elementPathEnabled&&!D.options.wordCount&&!D.options.scaleEnabled){D.ui.getDom("elementpath").style.display="none";D.ui.getDom("wordcount").style.display="none";D.ui.getDom("scale").style.display="none"}if(!D.selection.isFocus()){return}D.fireEvent("selectionchange",false,true)});D.addListener("mousedown",function(M,L){var K=L.target||L.srcElement;b.editor.ui.Popup.postHide(L,K);b.editor.ui.ShortCutMenu.postHide(L)});D.addListener("delcells",function(){if(UE.ui["edittip"]){new UE.ui["edittip"](D)}D.getDialog("edittip").open()});var G,E=false,J;D.addListener("afterpaste",function(){if(D.queryCommandState("pasteplain")){return}if(b.editor.ui.PastePicker){G=new b.editor.ui.Popup({content:new b.editor.ui.PastePicker({editor:D}),editor:D,className:"edui-wordpastepop"});G.render()}E=true});D.addListener("afterinserthtml",function(){clearTimeout(J);J=setTimeout(function(){if(G&&(E||D.ui._isTransfer)){if(G.isHidden()){var L=w.createElement(D.document,"span",{"style":"line-height:0px;","innerHTML":"\ufeff"}),K=D.selection.getRange();K.insertNode(L);var M=m(L,"firstChild","previousSibling");M&&G.showAnchor(M.nodeType==3?M.parentNode:M);w.remove(L)}else{G.show()}delete D.ui._isTransfer;E=false}},200)});D.addListener("contextmenu",function(L,K){b.editor.ui.Popup.postHide(K)});D.addListener("keydown",function(M,K){if(G){G.dispose(K)}var L=K.keyCode||K.which;if(K.altKey&&L==90){UE.ui.buttons["fullscreen"].onclick()}});D.addListener("wordcount",function(K){I(this,F)});function I(M,R){M.setOpt({wordCount:true,maximumWords:10000,wordCountMsg:M.options.wordCountMsg||M.getLang("wordCountMsg"),wordOverFlowMsg:M.options.wordOverFlowMsg||M.getLang("wordOverFlowMsg")});var Q=M.options,O=Q.maximumWords,P=Q.wordCountMsg,N=Q.wordOverFlowMsg,L=R.getDom("wordcount");if(!Q.wordCount){return}var K=M.getContentLength(true);if(K>O){L.innerHTML=N;M.fireEvent("wordcountoverflow")}else{L.innerHTML=P.replace("{#leave}",O-K).replace("{#count}",K)}}D.addListener("selectionchange",function(){if(D.options.elementPathEnabled){F[(D.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(D.options.scaleEnabled){F[(D.queryCommandState("scale")==-1?"dis":"en")+"ableScale"]()}});var H=new b.editor.ui.Popup({editor:D,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();D.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(K){this.hide();D.ui._dialogs[K]&&D.ui._dialogs[K].open()},_onImgSetFloat:function(K){this.hide();D.execCommand("imagefloat",K)},_setIframeAlign:function(M){var K=H.anchorEl;var L=K.cloneNode(true);switch(M){case -2:L.setAttribute("align","");break;case -1:L.setAttribute("align","left");break;case 1:L.setAttribute("align","right");break}K.parentNode.insertBefore(L,K);w.remove(K);H.anchorEl=L;H.showAnchor(H.anchorEl)},_updateIframe:function(){var K=D._iframe=H.anchorEl;if(w.hasClass(K,"ueditor_baidumap")){D.selection.getRange().selectNode(K).select();D.ui._dialogs.mapDialog.open();H.hide()}else{D.ui._dialogs.insertframeDialog.open();H.hide()}},_onRemoveButtonClick:function(K){D.execCommand(K);this.hide()},queryAutoHide:function(K){if(K&&K.ownerDocument==D.document){if(K.tagName.toLowerCase()=="img"||w.findParentByTagName(K,"a",true)){return K!==H.anchorEl}}return b.editor.ui.Popup.prototype.queryAutoHide.call(this,K)}});H.render();if(D.options.imagePopup){D.addListener("mouseover",function(N,L){L=L||window.event;var K=L.target||L.srcElement;if(D.ui._dialogs.insertframeDialog&&/iframe/ig.test(K.tagName)){var M=H.formatHtml("<nobr>"+D.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+D.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+D.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+D.getLang("justifyright")+"</span>&nbsp;&nbsp;"+' <span onclick="$$._updateIframe( this);" class="edui-clickable">'+D.getLang("modify")+"</span></nobr>");if(M){H.getDom("content").innerHTML=M;H.anchorEl=K;H.showAnchor(H.anchorEl)}else{H.hide()}}});D.addListener("selectionchange",function(R,K){if(!K){return}var N="",Q="",O=D.selection.getRange().getClosedNode(),M=D.ui._dialogs;if(O&&O.tagName=="IMG"){var L="insertimageDialog";if(O.className.indexOf("edui-faked-video")!=-1||O.className.indexOf("edui-upload-video")!=-1){L="insertvideoDialog"}if(O.className.indexOf("edui-faked-webapp")!=-1){L="webappDialog"}if(O.src.indexOf("http://api.map.baidu.com")!=-1){L="mapDialog"}if(O.className.indexOf("edui-faked-music")!=-1){L="musicDialog"}if(O.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){L="gmapDialog"}if(O.getAttribute("anchorname")){L="anchorDialog";N=H.formatHtml("<nobr>"+D.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+D.getLang("modify")+"</span>&nbsp;&nbsp;"+"<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+D.getLang("delete")+"</span></nobr>")}if(O.getAttribute("word_img")){D.word_img=[O.getAttribute("word_img")];L="wordimageDialog"}if(w.hasClass(O,"loadingclass")||w.hasClass(O,"loaderrorclass")){L=""}if(!M[L]){return}Q="<nobr>"+D.getLang("property")+": "+'<span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+D.getLang("default")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+D.getLang("justifyleft")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+D.getLang("justifyright")+"</span>&nbsp;&nbsp;"+'<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+D.getLang("justifycenter")+"</span>&nbsp;&nbsp;"+"<span onclick=\"$$._onImgEditButtonClick('"+L+'\');" class="edui-clickable">'+D.getLang("modify")+"</span></nobr>";!N&&(N=H.formatHtml(Q))}if(D.ui._dialogs.linkDialog){var P=D.queryCommandValue("link");var T;if(P&&(T=(P.getAttribute("_href")||P.getAttribute("href",2)))){var S=T;if(T.length>30){S=T.substring(0,20)+"..."}if(N){N+='<div style="height:5px;"></div>'}N+=H.formatHtml("<nobr>"+D.getLang("anthorMsg")+': <a target="_blank" href="'+T+'" title="'+T+'" >'+S+"</a>"+' <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+D.getLang("modify")+"</span>"+' <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+D.getLang("clear")+"</span></nobr>");H.showAnchor(P)}}if(N){H.getDom("content").innerHTML=N;H.anchorEl=O||P;H.showAnchor(H.anchorEl)}else{H.hide()}})}},_initToolbars:function(){var D=this.editor;var J=this.toolbars||[];var L=[];for(var E=0;E<J.length;E++){var G=J[E];var K=new b.editor.ui.Toolbar({theme:D.options.theme});for(var F=0;F<G.length;F++){var H=G[F];var I=null;if(typeof H=="string"){H=H.toLowerCase();if(H=="|"){H="Separator"}if(H=="||"){H="Breakline"}if(b.editor.ui[H]){I=new b.editor.ui[H](D)}if(H=="fullscreen"){if(L&&L[0]){L[0].items.splice(0,0,I)}else{I&&K.items.splice(0,0,I)}continue}}else{I=H}if(I&&I.id){K.add(I)}}L[E]=K}C.each(UE._customizeUI,function(P,O){var N,M;if(P.id&&P.id!=D.key){return false}N=P.execFn.call(D,D,O);if(N){M=P.index;if(M===undefined){M=K.items.length}K.add(N,M)}});this.toolbars=L},getHtmlTpl:function(){return'<div id="##" class="%%">'+'<div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;">'+'<div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+"</div>"+'<div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div>'+'<div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div>'+'<div style="height:0;overflow:hidden;clear:both;"></div>'+"</div>"+'<div id="##_message_holder" class="%%-messageholder"></div>'+"</div>"+'<div id="##_iframeholder" class="%%-iframeholder">'+"</div>"+'<div id="##_bottombar" class="%%-bottomContainer"><table><tr>'+'<td id="##_elementpath" class="%%-bottombar"></td>'+'<td id="##_wordcount" class="%%-wordcount"></td>'+'<td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td>'+"</tr></table></div>"+'<div id="##_scalelayer"></div>'+"</div>"},showWordImageDialog:function(){this._dialogs["wordimageDialog"].open()},renderToolbarBoxHtml:function(){var D=[];for(var E=0;E<this.toolbars.length;E++){D.push(this.toolbars[E].renderHtml())}return D.join("")},setFullScreen:function(G){var F=this.editor,E=F.container.parentNode.parentNode;if(this._fullscreen!=G){this._fullscreen=G;this.editor.fireEvent("beforefullscreenchange",G);if(b.editor.browser.gecko){var D=F.selection.getRange().createBookmark()}if(G){while(E.tagName!="BODY"){var I=b.editor.dom.domUtils.getComputedStyle(E,"position");z.push(I);E.style.position="static";E=E.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=F.iframe.parentNode.offsetWidth;if(this._bakAutoHeight){F.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;F.iframe.parentNode.style.width="";this._updateFullScreen()}else{while(E.tagName!="BODY"){E.style.position=z.shift();E=E.parentNode}this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){F.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;F.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(c.gecko&&F.body.contentEditable==="true"){var H=document.createElement("input");document.body.appendChild(H);F.body.contentEditable=false;setTimeout(function(){H.focus();setTimeout(function(){F.body.contentEditable=true;F.fireEvent("fullscreenchanged",G);F.selection.getRange().moveToBookmark(D).select(true);b.editor.dom.domUtils.remove(H);G&&window.scroll(0,0)},0)},0)}if(F.body.contentEditable==="true"){this.editor.fireEvent("fullscreenchanged",G);this.triggerLayout()}}},_updateFullScreen:function(){if(this._fullscreen){var E=B.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+E.width+"px;height:"+E.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);B.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(E.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),true);if(c.gecko){try{window.onresize()}catch(D){}}}},_updateElementPath:function(){var D=this.getDom("elementpath"),H;if(this.elementPathEnabled&&(H=this.editor.queryCommandValue("elementpath"))){var E=[];for(var G=0,F;F=H[G];G++){E[G]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+G+'&quot;);">'+F+"</span>")}D.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+E.join(" &gt; ")+"</div>"}else{D.style.display="none"}},disableElementPath:function(){var D=this.getDom("elementpath");D.innerHTML="";D.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var D=this.getDom("elementpath");D.style.display="";this.elementPathEnabled=true;this._updateElementPath()},_scale:function(){var F=document,H=this.editor,J=H.container,I=H.document,W=this.getDom("toolbarbox"),D=this.getDom("bottombar"),S=this.getDom("scale"),U=this.getDom("scalelayer");var K=false,R=null,M=0,N=H.options.minFrameWidth,P=0,Q=0,V=0,T=0;function G(){R=w.getXY(J);if(!M){M=H.options.minFrameHeight+W.offsetHeight+D.offsetHeight}U.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+J.offsetWidth+"px;height:"+J.offsetHeight+"px;z-index:"+(H.options.zIndex+1);w.on(F,"mousemove",O);w.on(I,"mouseup",X);w.on(F,"mouseup",X)}var L=this;this.editor.addListener("fullscreenchanged",function(Y,Z){if(Z){L.disableScale()}else{if(L.editor.options.scaleEnabled){L.enableScale();var aa=L.editor.document.createElement("span");L.editor.body.appendChild(aa);L.editor.body.style.height=Math.max(w.getXY(aa).y,L.editor.iframe.offsetHeight-20)+"px";w.remove(aa)}}});function O(Z){E();var Y=Z||window.event;P=Y.pageX||(F.documentElement.scrollLeft+Y.clientX);Q=Y.pageY||(F.documentElement.scrollTop+Y.clientY);V=P-R.x;T=Q-R.y;if(V>=N){K=true;U.style.width=V+"px"}if(T>=M){K=true;U.style.height=T+"px"}}function X(){if(K){K=false;H.ui._actualFrameWidth=U.offsetWidth-2;J.style.width=H.ui._actualFrameWidth+"px";H.setHeight(U.offsetHeight-D.offsetHeight-W.offsetHeight-2,true)}if(U){U.style.display="none"}E();w.un(F,"mousemove",O);w.un(I,"mouseup",X);w.un(F,"mouseup",X)}function E(){if(c.ie){F.selection.clear()}else{window.getSelection().removeAllRanges()}}this.enableScale=function(){if(H.queryCommandState("source")==1){return}S.style.display="";this.scaleEnabled=true;w.on(S,"mousedown",G)};this.disableScale=function(){S.style.display="none";this.scaleEnabled=false;w.un(S,"mousedown",G)}},isFullScreen:function(){return this._fullscreen},postRender:function(){A.prototype.postRender.call(this);for(var E=0;E<this.toolbars.length;E++){this.toolbars[E].postRender()}var F=this;var G,D=b.editor.dom.domUtils,H=function(){clearTimeout(G);G=setTimeout(function(){F._updateFullScreen()})};D.on(window,"resize",H);F.addListener("destroy",function(){D.un(window,"resize",H);clearTimeout(G)})},showToolbarMsg:function(E,D){this.getDom("toolbarmsg_label").innerHTML=E;this.getDom("toolbarmsg").style.display="";if(!D){var F=this.getDom("upload_dialog");F.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(D){return D?D.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var D=this.getDom();if(D.style.zoom=="1"){D.style.zoom="100%"}else{D.style.zoom="1"}}};C.inherits(x,b.editor.ui.UIBase);var y={};UE.ui.Editor=function(F){var D=new UE.Editor(F);D.options.editor=D;C.loadFile(document,{href:D.options.themePath+D.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var E=D.render;D.render=function(G){if(G.constructor===String){D.key=G;y[G]=D}C.domReady(function(){D.langIsReady?H():D.addListener("langReady",H);function H(){D.setOpt({labelMap:D.options.labelMap||D.getLang("labelMap")});new x(D.options);if(G){if(G.constructor===String){G=document.getElementById(G)}G&&G.getAttribute("name")&&(D.options.textarea=G.getAttribute("name"));if(G&&/script|textarea/ig.test(G.tagName)){var M=document.createElement("div");G.parentNode.insertBefore(M,G);var J=G.value||G.innerHTML;D.options.initialContent=/^[\t\r\n ]*$/.test(J)?D.options.initialContent:J.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");G.className&&(M.className=G.className);G.style.cssText&&(M.style.cssText=G.style.cssText);if(/textarea/i.test(G.tagName)){D.textarea=G;D.textarea.style.display="none"}else{G.parentNode.removeChild(G)}if(G.id){M.id=G.id;w.removeAttributes(G,"id")}G=M;G.innerHTML=""}}w.addClass(G,"edui-"+D.options.theme);D.ui.render(G);var N=D.options;D.container=D.ui.getDom();var O=w.findParents(G,true);var K=[];for(var L=0,I;I=O[L];L++){K[L]=I.style.display;I.style.display="block"}if(N.initialFrameWidth){N.minFrameWidth=N.initialFrameWidth}else{N.minFrameWidth=N.initialFrameWidth=G.offsetWidth;var P=G.style.width;if(/%$/.test(P)){N.initialFrameWidth=P}}if(N.initialFrameHeight){N.minFrameHeight=N.initialFrameHeight}else{N.initialFrameHeight=N.minFrameHeight=G.offsetHeight}for(var L=0,I;I=O[L];L++){I.style.display=K[L]}if(G.style.height){G.style.height=""}D.container.style.width=N.initialFrameWidth+(/%$/.test(N.initialFrameWidth)?"":"px");D.container.style.zIndex=N.zIndex;E.call(D,D.ui.getDom("iframeholder"));D.fireEvent("afteruiready")}})};return D};UE.getEditor=function(E,F){var D=y[E];if(!D){D=y[E]=new UE.ui.Editor(F);D.render(E)}return D};UE.delEditor=function(E){var D;if(D=y[E]){D.key&&D.destroy();delete y[E]}};UE.registerUI=function(G,E,F,D){C.each(G.split(/\s+/),function(H){UE._customizeUI[H]={id:D,execFn:E,index:F}})}})();UE.registerUI("message",function(x){var y=b.editor.ui;var B=y.Message;var z;var w=[];var A=x;A.addListener("ready",function(){z=document.getElementById(A.ui.id+"_message_holder");C();setTimeout(function(){C()},500)});A.addListener("showmessage",function(G,F){F=u.isString(F)?{"content":F}:F;var D=new B({"timeout":F.timeout,"type":F.type,"content":F.content,"keepshow":F.keepshow,"editor":A}),E=F.id||("msg_"+(+new Date()).toString(36));D.render(z);w[E]=D;D.reset(F);C();return E});A.addListener("updatemessage",function(G,D,F){F=u.isString(F)?{"content":F}:F;var E=w[D];E.render(z);E&&E.reset(F)});A.addListener("hidemessage",function(F,D){var E=w[D];E&&E.hide()});function C(){var D=A.ui.getDom("toolbarbox");if(D){z.style.top=D.offsetHeight+3+"px"}z.style.zIndex=Math.max(A.options.zIndex,A.iframe.style.zIndex)+1}});UE.registerUI("autosave",function(w){var x=null,y=null;w.on("afterautosave",function(){clearTimeout(x);x=setTimeout(function(){if(y){w.trigger("hidemessage",y)}y=w.trigger("showmessage",{content:w.getLang("autosave.success"),timeout:2000})},2000)})})})();